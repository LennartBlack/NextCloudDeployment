
- command: eksctl create cluster \\                                                                                                                      >   --name nextcloud-cluster \\                                                                                                                                     >   --version 1.29                                                                                                                                                 bash: eksctl: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135157
- command: --region eu-central-1 \\                                                                                                                    >   --nodegroup-name nextcloud-nodes \\                                                                                                                             >   --node-type t3a.medium \\                                                                                                                                       >   --nodes 1 \\                                                                                                                                                    >   --nodes-min 1 \\                                                                                                                                                >   --nodes-max 1 \\                                                                                                                                                bash:  : command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135157
- command: --managed \\                                                                                                                                >   --with-oidc \\                                                                                                                                                  >   --alb-ingress-access \\                                                                                                                                         >   --enable-efs \\                                                                                                                                                 >   --tags \"project=nextcloud\"                                                                                                                                     bash:  : command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135157
- command: eksctl create cluster   --name nextcloud-cluster   --version 1.29   --region eu-central-1   --nodegroup-name nextcloud-nodes   --node-type t3a.medium   --nodes 1   --nodes-min 1   --nodes-max 1   --managed   --with-oidc   --alb-ingress-access   --enable-efs   --tags \"project=nextcloud\"                  bash: eksctl: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135193
- command: kubectl version --client                                                                                                                                                        Client Version: v1.32.0-eks-aeac579                                                                                                                                                                   Kustomize Version: v5.5.0
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135241
- command: eksctl create cluster   --name nextcloud-cluster   --version 1.29   --region eu-central-1   --nodegroup-name nextcloud-nodes   --node-type t3a.medium   --nodes 1   --nodes-min 1   --nodes-max 1   --managed   --with-oidc   --alb-ingress-access   --enable-efs   --tags \"project=nextcloud\"                                                                                        bash: eksctl: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135262
- command: create cluster   --name nextcloud-cluster   --version 1.29   --region eu-central-1   --nodegroup-name nextcloud-nodes   --node-type t3a.medium   --nodes 1   --nodes-min 1   --nodes-max 1   --managed   --with-oidc   --alb-ingress-access   --enable-efs   --tags \"project=nextcloud                                                                                                > ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135298
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135299
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135299
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135299
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135299
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135300
- command: curl --silent --location \"https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_Linux_amd64.tar.gz\" | tar xz -C /tmp
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135306
- command: sudo mv /tmp/eksctl /usr/local/bin
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135306
- command: sudo mv /tmp/eksctl /usr/local/bin                                                                                                                                              mv: cannot stat '/tmp/eksctl': No such file or directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135311
- command: eksctl version                                                                                                                                                                  0.208.0
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135316
- command: helm repo list                                                                                                                                                                  bash: helm: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135325
- command: NAME    URL                                                                                                                                                                     bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135325
- command: eks     https://aws.github.io/eks-charts^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135338
- command: eksctl create cluster   --name nextcloud-cluster   --version 1.29   --region eu-central-1   --nodegroup-name nextcloud-nodes   --node-type t3a.medium   --nodes 1   --nodes-min 1   --nodes-max 1   --managed   --with-oidc   --alb-ingress-access   --enable-efs   --tags \"project=nextcloud\"                                                                                        Error: unknown flag: --enable-efs
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135339
- command: eksctl create cluster   --name nextcloud-cluster   --version 1.29   --region eu-central-1   --nodegroup-name nextcloud-nodes   --node-type t3a.medium   --nodes 1   --nodes-min 1   --nodes-max 1   --managed   --with-oidc   --alb-ingress-access  --tags \"project=nextcloud\"                                                                                                        Error: unknown flag: --alb-ingress-access
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135354
- command: eksctl create cluster   --name nextcloud-cluster   --version 1.29   --region eu-central-1   --nodegroup-name nextcloud-nodes   --node-type t3a.medium   --nodes 1   --nodes-min 1   --nodes-max 1   --managed   --with-oidc  --tags \"project=nextcloud\"                                                                                                                               2025-05-13 11:22:42 [✖]  only one argument is allowed to be used as a name
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135362
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747135371
- command: eksctl delete cluster --name $CLUSTER --region $REGION                                                                                                                          Error: unable to describe cluster control plane: operation error EKS: DescribeCluster, https response error StatusCode: 400, RequestID: 031fefa4-2b79-4792-9891-85adf4b4137c, api error InvalidParameterException: The parameter name contains invalid characters. It should conform to the regular expression \"^[0-9A-Za-z][A-Za-z0-9-_]*\"In other words, it should start with a number or letter, and can contain numbers, letters, dashes, and underscores.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136166
- command: eksctl delete cluster --name $nextcloud-cluster --region $EU-Central-1                                                                                                          Error: could not create cluster provider from options: checking AWS STS access – cannot get role ARN for current session: operation error STS: GetCallerIdentity, https response error StatusCode: 0, RequestID: , request send failed, Post \"https://sts.-Central-1.amazonaws.com/\": dial tcp: lookup sts.-Central-1.amazonaws.com: no such host
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136205
- command: eksctl delete cluster                                                                                                                                                                                                                                                                                               Error: --name must be set
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136258
- command: helm uninstall nc --namespace nextcloud                                                                                                                                                                                                                                                           bash: helm: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136268
- command: kubectl delete namespace nextcloud                                                                                                                                                                                                                                                                Error from server (NotFound): namespaces \"nextcloud\" not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136274
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136890
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136890
- command: eksctl create cluster --name nextcloud-cluster --version 1.29 --region eu-central-1 --nodegroup-name nextcloud-nodes --node-type t3a.medium --nodes 1 --nodes-min 1 --nodes-max 1 --managed --with-oidc --tags \"project=nextcloud\"                                                                                                                                                                                                          2025-05-13 11:48:13 [ℹ]  eksctl version 0.208.0                                                                                                                                                                                  2025-05-13 11:48:13 [ℹ]  using region eu-central-1                                                                                                                                                                               2025-05-13 11:48:13 [!]  Amazon EKS will no longer publish EKS-optimized Amazon Linux 2 (AL2) AMIs after November 26th, 2025. Additionally, Kubernetes version 1.32 is the last version for which Amazon EKS will release AL2 AMIs. From version 1.33 onwards, Amazon EKS will continue to release AL2023 and Bottlerocket based AMIs. The default AMI family when creating clusters and nodegroups in Eksctl will be changed to AL2023 in the future.            2025-05-13 11:48:13 [ℹ]  setting availability zones to [eu-central-1a eu-central-1b eu-central-1c]                                                                                                                               2025-05-13 11:48:13 [ℹ]  subnets for eu-central-1a - public:192.168.0.0/19 private:192.168.96.0/19                                                                                                                               2025-05-13 11:48:13 [ℹ]  subnets for eu-central-1b - public:192.168.32.0/19 private:192.168.128.0/19                                                                                                                             2025-05-13 11:48:13 [ℹ]  subnets for eu-central-1c - public:192.168.64.0/19 private:192.168.160.0/19                                                                                                                             2025-05-13 11:48:13 [ℹ]  nodegroup \"nextcloud-nodes\" will use \"\" [AmazonLinux2/1.29]                                                                                                                                             2025-05-13 11:48:13 [ℹ]  using Kubernetes version 1.29                                                                                                                                                                           2025-05-13 11:48:13 [ℹ]  creating EKS cluster \"nextcloud-cluster\" in \"eu-central-1\" region with managed nodes                                                                                                                    2025-05-13 11:48:13 [ℹ]  will create 2 separate CloudFormation stacks for cluster itself and the initial managed nodegroup                                                                                                       2025-05-13 11:48:13 [ℹ]  if you encounter any issues, check CloudFormation console or try 'eksctl utils describe-stacks --region=eu-central-1 --cluster=nextcloud-cluster'                                                       2025-05-13 11:48:13 [ℹ]  Kubernetes API endpoint access will use default of {publicAccess=true, privateAccess=false} for cluster \"nextcloud-cluster\" in \"eu-central-1\"                                                           2025-05-13 11:48:13 [ℹ]  CloudWatch logging will not be enabled for cluster \"nextcloud-cluster\" in \"eu-central-1\"                                                                                                                2025-05-13 11:48:13 [ℹ]  you can enable it with 'eksctl utils update-cluster-logging --enable-types={SPECIFY-YOUR-LOG-TYPES-HERE (e.g. all)} --region=eu-central-1 --cluster=nextcloud-cluster'                                  2025-05-13 11:48:13 [ℹ]  default addons metrics-server, vpc-cni, kube-proxy, coredns were not specified, will install them as EKS addons                                                                                         2025-05-13 11:48:13 [ℹ]                                                                                                                                                                                                          2 sequential tasks: { create cluster control plane \"nextcloud-cluster\",                                                                                                                                                              2 sequential sub-tasks: {                                                                                                                                                                                                            5 sequential sub-tasks: {                                                                                                                                                                                                            1 task: { create addons },                                                                                                                                                                                                       wait for control plane to become ready,                                                                                                                                                                                          associate IAM OIDC provider,                                                                                                                                                                                                     no tasks,                                                                                                                                                                                                                        update VPC CNI to use IRSA if required,                                                                                                                                                                                      },                                                                                                                                                                                                                               create managed nodegroup \"nextcloud-nodes\",                                                                                                                                                                                  }                                                                                                                                                                                                                            }                                                                                                                                                                                                                                2025-05-13 11:48:13 [ℹ]  building cluster stack \"eksctl-nextcloud-cluster-cluster\"                                                                                                                                               2025-05-13 11:48:13 [!]  1 error(s) occurred and cluster hasn't been created properly, you may wish to check CloudFormation console                                                                                              2025-05-13 11:48:13 [ℹ]  to cleanup resources, run 'eksctl delete cluster --region=eu-central-1 --name=nextcloud-cluster'                                                                                                        2025-05-13 11:48:13 [✖]  creating CloudFormation stack \"eksctl-nextcloud-cluster-cluster\": operation error CloudFormation: CreateStack, https response error StatusCode: 400, RequestID: 40f3ab89-98d8-45fb-abc9-cc3c4f3f092f, AlreadyExistsException: Stack [eksctl-nextcloud-cluster-cluster] already exists                                                                                                                                                    Error: failed to create cluster \"nextcloud-cluster\"
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747136893
- command: ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-addon-vpc-cni\"                                                                                                                                 2025-05-13 11:59:24 [ℹ]  updating addon                                                                                                                                                                                           2025-05-13 11:59:34 [ℹ]  addon \"vpc-cni\" active                                                                                                                                                                                   2025-05-13 11:59:34 [ℹ]  building managed nodegroup stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                      2025-05-13 11:59:34 [ℹ]  deploying stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                                       2025-05-13 11:59:35 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                      2025-05-13 12:00:05 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                      2025-05-13 12:00:57 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                      2025-05-13 12:02:05 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                      2025-05-13 12:02:05 [ℹ]  waiting for the control plane to become ready                                                                                                                                                            2025-05-13 12:02:05 [✔]  saved kubeconfig as \"/home/cloudshell-user/.kube/config\"                                                                                                                                                 2025-05-13 12:02:05 [ℹ]  no tasks                                                                                                                                                                                                 2025-05-13 12:02:05 [✔]  all EKS cluster resources for \"nextcloudcluster\" have been created                                                                                                                                       2025-05-13 12:02:05 [ℹ]  nodegroup \"nextcloudnodes\" has 1 node(s)                                                                                                                                                                 2025-05-13 12:02:05 [ℹ]  node \"ip-192-168-88-181.eu-central-1.compute.internal\" is ready                                                                                                                                          2025-05-13 12:02:05 [ℹ]  waiting for at least 1 node(s) to become ready in \"nextcloudnodes\"                                                                                                                                       2025-05-13 12:02:05 [ℹ]  nodegroup \"nextcloudnodes\" has 1 node(s)                                                                                                                                                                 2025-05-13 12:02:05 [ℹ]  node \"ip-192-168-88-181.eu-central-1.compute.internal\" is ready                                                                                                                                          2025-05-13 12:02:05 [✔]  created 1 managed nodegroup(s) in cluster \"nextcloudcluster\"                                                                                                                                             2025-05-13 12:02:06 [ℹ]  kubectl command should work with \"/home/cloudshell-user/.kube/config\", try 'kubectl get nodes'                                                                                                           2025-05-13 12:02:06 [✔]  EKS cluster \"nextcloudcluster\" in \"eu-central-1\" region is ready
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747137726
- command: helm repo add nextcloud https://nextcloud.github.io/helm/                                                                                                                                                   bash: helm: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138165
- command: helm repo list                                                                                                                                                                                              bash: helm: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138204
- command: curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash                                                                                                                               % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current                                                                                                                                                                                    Dload  Upload   Total   Spent    Left  Speed                                                                                                                                                     100 11913  100 11913    0     0   196k      0 --:--:-- --:--:-- --:--:--  197k                                                                                                                                                    Downloading https://get.helm.sh/helm-v3.17.3-linux-amd64.tar.gz                                                                                                                                                                   Verifying checksum... Done.                                                                                                                                                                                                       Preparing to install helm into /usr/local/bin                                                                                                                                                                                     helm installed into /usr/local/bin/helm
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138239
- command: helm version                                                                                                                                                                                                version.BuildInfo{Version:\"v3.17.3\", GitCommit:\"e4da49785aa6e6ee2b86efd5dd9e43400318262b\", GitTreeState:\"clean\", GoVersion:\"go1.23.7\"}
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138241
- command: helm repo add nextcloud https://nextcloud.github.io/helm/                                                                                                                                                   \"nextcloud\" has been added to your repositories
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138361
- command: helm repo update                                                                                                                                                                                            Hang tight while we grab the latest from your chart repositories...                                                                                                                                                               ...Successfully got an update from the \"nextcloud\" chart repository                                                                                                                                                               Update Complete. ⎈Happy Helming!⎈
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138366
- command: helm install my-release nextcloud/nextcloud                                                                                                                                                                 NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 12:12:53 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 1                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            #######################################################################################################                                                                                                                           ## WARNING: You did not provide an external database host in your 'helm install' call                ##                                                                                                                           ## Running Nextcloud with the integrated sqlite database is not recommended for production instances ##                                                                                                                           #######################################################################################################                                                                                                                                                                                                                                                                                                                                                             For better performance etc. you have to configure nextcloud with a resolvable database                                                                                                                                            host. To configure nextcloud to use and external database host:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1. Complete your nextcloud deployment by running:                                                                                                                                                                                                                                                                                                                                                                                                                     export APP_HOST=127.0.0.1                                                                                                                                                                                                         export APP_PASSWORD=$(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)                                                                                                                                                                                                                                                                                                                       ## PLEASE UPDATE THE EXTERNAL DATABASE CONNECTION PARAMETERS IN THE FOLLOWING COMMAND AS NEEDED ##                                                                                                                                                                                                                                                                                                                                                                  helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                                                       --set nextcloud.password=$APP_PASSWORD,nextcloud.host=$APP_HOST,service.type=ClusterIP,mariadb.enabled=false,externalDatabase.user=nextcloud,externalDatabase.database=nextcloud,externalDatabase.host=YOUR_EXTERNAL_DATABASE_HOST
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138373
- command: export APP_PASSWORD=$(kubectl get secret --namespace default my-release-nextcloud \\                                                                                                                         >   -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138513
- command: echo $APP_PASSWORD                                                                                                                                                                                          changeme
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138517
- command: aws rds describe-db-instances \\                                                                                                                                                                             >   --query \"DBInstances[?DBInstanceIdentifier=='nextcloud-db'].Endpoint.Address\" \\                                                                                                                                               >   --output text --region eu-central-1
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138532
- command: aws rds describe-db-instances   --query \"DBInstances[?DBInstanceIdentifier=='nextcloud-db'].Endpoint.Address\"   --output text --region eu-central-1
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138536
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >   --set nextcloud.password=\"changeme\" \\                                                                                                                                                                                         >   --set nextcloud.host=cloud.your-domain.tld \\                                                                                                                                                                                  >   --set mariadb.enabled=false \\                                                                                                                                                                                                 >   --set externalDatabase.user=ncadmin \\                                                                                                                                                                                         >   --set externalDatabase.password=REPLACE_WITH_YOUR_DB_PASS \\                                                                                                                                                                   >   --set externalDatabase.database=nextcloud \\                                                                                                                                                                                   >   --set externalDatabase.host=REPLACE_WITH_YOUR_DB_HOST \\                                                                                                                                                                       >   --set persistence.enabled=true \\                                                                                                                                                                                              >   --set persistence.storageClass=efs-sc \\                                                                                                                                                                                       >   --set persistence.accessMode=ReadWriteMany \\                                                                                                                                                                                  >   --set persistence.size=20Gi                                                                                                                                                                                                   Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 12:16:07 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 2                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                  export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                             echo http://127.0.0.1:8080/                                                                                                                                                                                                       kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                        2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                   echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138568
- command: kubectl delete pvc -l app.kubernetes.io/instance=my-release                                                                                                                                                 persistentvolumeclaim \"my-release-nextcloud-nextcloud\" deleted
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138618
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Pending   0          54s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138626
- command: kubectl logs -l app.kubernetes.io/instance=my-release
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138636
- command: kubectl logs -l app.kubernetes.io/instance=my-release
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138640
- command: kubectl get ingress                                                                                                                                                                                         No resources found in default namespace.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138655
- command: kubectl describe pod -l app.kubernetes.io/instance=my-release                                                                                                                                               Name:             my-release-nextcloud-85c678c484-tdlvq                                                                                                                                                                           Namespace:        default                                                                                                                                                                                                         Priority:         0                                                                                                                                                                                                               Service Account:  default                                                                                                                                                                                                         Node:             <none>                                                                                                                                                                                                          Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                   app.kubernetes.io/instance=my-release                                                                                                                                                                                             app.kubernetes.io/name=nextcloud                                                                                                                                                                                                  pod-template-hash=85c678c484                                                                                                                                                                                    Annotations:      hooks-hash: 9525c2748a6c7cd0e28ec740623d0b3fa5a75c83b51ccfd136bc89c76737b204                                                                                                                                                      nextcloud-config-hash: 8266a725d5474acb6adbf9f0609a3494dc3340a3ac306db90eac9ddb1b851960                                                                                                                                           php-config-hash: 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a                                                                                                                               Status:           Pending                                                                                                                                                                                                         IP:                                                                                                                                                                                                                               IPs:              <none>                                                                                                                                                                                                          Controlled By:    ReplicaSet/my-release-nextcloud-85c678c484                                                                                                                                                                      Containers:                                                                                                                                                                                                                         nextcloud:                                                                                                                                                                                                                          Image:      nextcloud:30.0.10-apache                                                                                                                                                                                              Port:       80/TCP                                                                                                                                                                                                                Host Port:  0/TCP                                                                                                                                                                                                                 Liveness:   http-get http://:80/status.php delay=10s timeout=5s period=10s #success=1 #failure=3                                                                                                                                  Readiness:  http-get http://:80/status.php delay=10s timeout=5s period=10s #success=1 #failure=3                                                                                                                                  Environment:                                                                                                                                                                                                                        SQLITE_DATABASE:            nextcloud                                                                                                                                                                                             NEXTCLOUD_ADMIN_USER:       <set to the key 'nextcloud-username' in secret 'my-release-nextcloud'>  Optional: false                                                                                                               NEXTCLOUD_ADMIN_PASSWORD:   <set to the key 'nextcloud-password' in secret 'my-release-nextcloud'>  Optional: false                                                                                                               NEXTCLOUD_TRUSTED_DOMAINS:  cloud.your-domain.tld                                                                                                                                                                                 NEXTCLOUD_DATA_DIR:         /var/www/html/data                                                                                                                                                                                  Mounts:                                                                                                                                                                                                                             /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-v27gx (ro)                                                                                                                                                     /var/www/ from nextcloud-main (rw,path=\"root\")                                                                                                                                                                                    /var/www/html from nextcloud-main (rw,path=\"html\")                                                                                                                                                                                /var/www/html/config from nextcloud-main (rw,path=\"config\")                                                                                                                                                                       /var/www/html/custom_apps from nextcloud-main (rw,path=\"custom_apps\")                                                                                                                                                             /var/www/html/data from nextcloud-main (rw,path=\"data\")                                                                                                                                                                           /var/www/html/themes from nextcloud-main (rw,path=\"themes\")                                                                                                                                                                       /var/www/tmp from nextcloud-main (rw,path=\"tmp\")                                                                                                                                                                            Conditions:                                                                                                                                                                                                                         Type           Status                                                                                                                                                                                                             PodScheduled   False                                                                                                                                                                                                            Volumes:                                                                                                                                                                                                                            nextcloud-main:                                                                                                                                                                                                                     Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)                                                                                                                                  ClaimName:  my-release-nextcloud-nextcloud                                                                                                                                                                                        ReadOnly:   false                                                                                                                                                                                                               kube-api-access-v27gx:                                                                                                                                                                                                              Type:                    Projected (a volume that contains injected data from multiple sources)                                                                                                                                   TokenExpirationSeconds:  3607                                                                                                                                                                                                     ConfigMapName:           kube-root-ca.crt                                                                                                                                                                                         ConfigMapOptional:       <nil>                                                                                                                                                                                                    DownwardAPI:             true                                                                                                                                                                                                 QoS Class:                   BestEffort                                                                                                                                                                                           Node-Selectors:              <none>                                                                                                                                                                                               Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s                                                                                                                                                                         node.kubernetes.io/unreachable:NoExecute op=Exists for 300s                                                                                                                                          Events:                                                                                                                                                                                                                             Type     Reason            Age    From               Message                                                                                                                                                                      ----     ------            ----   ----               -------                                                                                                                                                                      Warning  FailedScheduling  2m12s  default-scheduler  0/1 nodes are available: pod has unbound immediate PersistentVolumeClaims. preemption: 0/1 nodes are available: 1 Preemption is not helpful for scheduling.                  Warning  FailedScheduling  86s    default-scheduler  0/1 nodes are available: persistentvolumeclaim \"my-release-nextcloud-nextcloud\" is being deleted. preemption: 0/1 nodes are available: 1 Preemption is not helpful for scheduling.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138704
- command: aws efs describe-file-systems --region eu-central-1 \\                                                                                                                                                       >   --query 'FileSystems[].FileSystemId' --output text                                                                                                                                                                                                                                                                                                                                                                                                              Error when retrieving credentials from container-role: Error retrieving metadata: Received non 200 response 500 from container metadata: <?xml version=\"1.0\" encoding=\"iso-8859-1\"?>                                              <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"                                                                                                                                                                    \t       \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">                                                                                                                                                                <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">                                                                                                                                                                <head>                                                                                                                                                                                                                             <title>500 - Internal Server Error</title>                                                                                                                                                                                       </head>                                                                                                                                                                                                                           <body>                                                                                                                                                                                                                             <h1>500 - Internal Server Error</h1>                                                                                                                                                                                             </body>                                                                                                                                                                                                                          </html>
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138770
- command: aws efs describe-file-systems --region eu-central-1 \\                                                                                                                                                                         >   --query 'FileSystems[].FileSystemId' --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138796
- command: aws efs describe-file-systems --region eu-central-1   --query 'FileSystems[].FileSystemId' --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138808
- command: export EFS_ID=$(aws efs create-file-system \\                                                                                                                                                                >   --region eu-central-1 \\                                                                                                                                                                                                       >   --throughput-mode bursting \\                                                                                                                                                                                                  >   --performance-mode generalPurpose \\                                                                                                                                                                                           >   --tags Key=Name,Value=nextcloud-efs \\                                                                                                                                                                                         >   --query 'FileSystemId' --output text)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138848
- command: echo \"✅ Created EFS: $EFS_ID\"                                                                                                                                                                              ✅ Created EFS: fs-0304e459889806067
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138848
- command: aws ec2 describe-subnets --filters \"Name=tag:eksctl.cluster.k8s.io/v1alpha1/cluster-name,Values=nextcloud-cluster\" \\                                                                                        >   --query 'Subnets[?MapPublicIpOnLaunch==`false`].SubnetId' --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138871
- command: aws ec2 describe-subnets \\                                                                                                                                                                                  >   --filters \"Name=tag:eksctl.cluster.k8s.io/v1alpha1/cluster-name,Values=nextcloud-cluster\" \\                                                                                                                                   >   --query 'Subnets[*].{ID:SubnetId,CIDR:CidrBlock,AZ:AvailabilityZone,Public:MapPublicIpOnLaunch}' \\                                                                                                                            >   --output table
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138906
- command: aws ec2 describe-subnets   --filters \"Name=tag:eksctl.cluster.k8s.io/v1alpha1/cluster-name,Values=nextcloud-cluster\"   --query 'Subnets[*].{ID:SubnetId,CIDR:CidrBlock,AZ:AvailabilityZone,Public:MapPublicIpOnLaunch}'   --output table
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747138910
- command: for subnet in subnet-0eead685a78ca10e6 subnet-02ccac87e1a34983a subnet-0d4e34870770f1475; do                                                                                                                >   aws efs create-mount-target \\                                                                                                                                                                                                 >     --file-system-id $EFS_ID \\                                                                                                                                                                                                  >     --subnet-id $subnet \\                                                                                                                                                                                                       >     --security-groups $(aws ec2 describe-security-groups \\                                                                                                                                                                      >       --filters Name=group-name,Values=*EKSNodeSecurityGroup* \\                                                                                                                                                                 >       --query 'SecurityGroups[0].GroupId' --output text) \\                                                                                                                                                                      >     --region eu-central-1                                                                                                                                                                                                       > done                                                                                                                                                                                                                                                                                                                                                                                                                                                              Parameter validation failed:                                                                                                                                                                                                      Invalid length for parameter SecurityGroups[0], value: 4, valid min length: 11                                                                                                                                                                                                                                                                                                                                                                                      Parameter validation failed:                                                                                                                                                                                                      Invalid length for parameter SecurityGroups[0], value: 4, valid min length: 11                                                                                                                                                                                                                                                                                                                                                                                      Parameter validation failed:                                                                                                                                                                                                      Invalid length for parameter SecurityGroups[0], value: 4, valid min length: 11
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139046
- command: aws ec2 describe-security-groups \\                                                                                                                                                                          >   --filters \"Name=group-name,Values=*EKSNodeSecurityGroup*\" \\                                                                                                                                                                   >   --query \"SecurityGroups[*].GroupId\" \\                                                                                                                                                                                         >   --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139082
- command: aws ec2 describe-security-groups   --filters \"Name=group-name,Values=*EKSNodeSecurityGroup*\"   --query \"SecurityGroups[*].GroupId\"   --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139085
- command: aws ec2 describe-security-groups \\                                                                                                                                                                          >   --filters \"Name=vpc-id,Values=vpc-0ed80417b67b8cb00\" \\                                                                                                                                                                        >   --query \"SecurityGroups[?contains(GroupName, 'EKS')].GroupId\" \\                                                                                                                                                               >   --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139132
- command: aws ec2 describe-security-groups   --filters \"Name=vpc-id,Values=vpc-0ed80417b67b8cb00\"   --query \"SecurityGroups[?contains(GroupName, 'EKS')].GroupId\"   --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139134
- command: aws ec2 describe-security-groups \\                                                                                                                                                                          >   --filters \"Name=vpc-id,Values=vpc-0ed80417b67b8cb00\" \\                                                                                                                                                                        >   --query 'SecurityGroups[*].{ID:GroupId,Name:GroupName}' \\                                                                                                                                                                     >   --output table                                                                                                                                                                                                                ---------------------------------------------------------------------------------------------------------                                                                                                                         |                                        DescribeSecurityGroups                                         |                                                                                                                         +----------------------+--------------------------------------------------------------------------------+                                                                                                                         |          ID          |                                     Name                                       |                                                                                                                         +----------------------+--------------------------------------------------------------------------------+                                                                                                                         |  sg-01132210f51b97800|  eks-cluster-sg-nextcloudcluster-1798212456                                    |                                                                                                                         |  sg-001f4699bc9de60f3|  default                                                                       |                                                                                                                         |  sg-00dc4539bade2f575|  eksctl-nextcloudcluster-cluster-ControlPlaneSecurityGroup-XBufPsnAqBdl        |                                                                                                                         |  sg-02da3f942e7e388f0|  eksctl-nextcloudcluster-cluster-ClusterSharedNodeSecurityGroup-XLwWEsUWFnfW   |                                                                                                                         +----------------------+--------------------------------------------------------------------------------+
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139173
- command: export EKS_NODE_SG=sg-02da3f942e7e388f0
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139194
- command: for subnet in subnet-0eead685a78ca10e6 subnet-02ccac87e1a34983a subnet-0d4e34870770f1475; do                                                                                                                >   aws efs create-mount-target \\                                                                                                                                                                                                 >     --file-system-id $EFS_ID \\                                                                                                                                                                                                  >     --subnet-id $subnet \\                                                                                                                                                                                                       >     --security-groups $EKS_NODE_SG \\                                                                                                                                                                                            >     --region eu-central-1                                                                                                                                                                                                       > done                                                                                                                                                                                                                                                                                                                                                                                                                                                              {                                                                                                                                                                                                                                     \"OwnerId\": \"699475950702\",                                                                                                                                                                                                        \"MountTargetId\": \"fsmt-0b6af13ffe13f93ef\",                                                                                                                                                                                        \"FileSystemId\": \"fs-0304e459889806067\",                                                                                                                                                                                           \"SubnetId\": \"subnet-0eead685a78ca10e6\",                                                                                                                                                                                           \"LifeCycleState\": \"creating\",                                                                                                                                                                                                     \"IpAddress\": \"192.168.148.60\",                                                                                                                                                                                                    \"NetworkInterfaceId\": \"eni-072b348cba0b493f3\",                                                                                                                                                                                    \"AvailabilityZoneId\": \"euc1-az2\",                                                                                                                                                                                                 \"AvailabilityZoneName\": \"eu-central-1a\",                                                                                                                                                                                          \"VpcId\": \"vpc-0ed80417b67b8cb00\"                                                                                                                                                                                              }                                                                                                                                                                                                                                 {                                                                                                                                                                                                                                     \"OwnerId\": \"699475950702\",                                                                                                                                                                                                        \"MountTargetId\": \"fsmt-077e1993e0c4f3bca\",                                                                                                                                                                                        \"FileSystemId\": \"fs-0304e459889806067\",                                                                                                                                                                                           \"SubnetId\": \"subnet-02ccac87e1a34983a\",                                                                                                                                                                                           \"LifeCycleState\": \"creating\",                                                                                                                                                                                                     \"IpAddress\": \"192.168.96.214\",                                                                                                                                                                                                    \"NetworkInterfaceId\": \"eni-028e5b84c3757fb47\",                                                                                                                                                                                    \"AvailabilityZoneId\": \"euc1-az3\",                                                                                                                                                                                                 \"AvailabilityZoneName\": \"eu-central-1b\",                                                                                                                                                                                          \"VpcId\": \"vpc-0ed80417b67b8cb00\"                                                                                                                                                                                              }                                                                                                                                                                                                                                 {                                                                                                                                                                                                                                     \"OwnerId\": \"699475950702\",                                                                                                                                                                                                        \"MountTargetId\": \"fsmt-05e2c72221bb55590\",                                                                                                                                                                                        \"FileSystemId\": \"fs-0304e459889806067\",                                                                                                                                                                                           \"SubnetId\": \"subnet-0d4e34870770f1475\",                                                                                                                                                                                           \"LifeCycleState\": \"creating\",                                                                                                                                                                                                     \"IpAddress\": \"192.168.162.44\",                                                                                                                                                                                                    \"NetworkInterfaceId\": \"eni-07117ef5569965b18\",                                                                                                                                                                                    \"AvailabilityZoneId\": \"euc1-az1\",                                                                                                                                                                                                 \"AvailabilityZoneName\": \"eu-central-1c\",                                                                                                                                                                                          \"VpcId\": \"vpc-0ed80417b67b8cb00\"                                                                                                                                                                                              }
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139200
- command: aws efs describe-mount-targets \\                                                                                                                                                                            >   --file-system-id $EFS_ID \\                                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                                       >   --query 'MountTargets[*].{AZ:AvailabilityZoneName,State:LifeCycleState}' \\                                                                                                                                                    >   --output table                                                                                                                                                                                                                -------------------------------                                                                                                                                                                                                   |    DescribeMountTargets     |                                                                                                                                                                                                   +----------------+------------+                                                                                                                                                                                                   |       AZ       |   State    |                                                                                                                                                                                                   +----------------+------------+                                                                                                                                                                                                   |  eu-central-1a |  creating  |                                                                                                                                                                                                   |  eu-central-1b |  creating  |                                                                                                                                                                                                   |  eu-central-1c |  creating  |                                                                                                                                                                                                   +----------------+------------+
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139232
- command: aws efs describe-mount-targets   --file-system-id $EFS_ID   --region eu-central-1   --query 'MountTargets[*].{AZ:AvailabilityZoneName,State:LifeCycleState}'   --output table                               -------------------------------                                                                                                                                                                                                   |    DescribeMountTargets     |                                                                                                                                                                                                   +----------------+------------+                                                                                                                                                                                                   |       AZ       |   State    |                                                                                                                                                                                                   +----------------+------------+                                                                                                                                                                                                   |  eu-central-1a |  creating  |                                                                                                                                                                                                   |  eu-central-1b |  creating  |                                                                                                                                                                                                   |  eu-central-1c |  creating  |                                                                                                                                                                                                   +----------------+------------+
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139235
- command: aws efs describe-mount-targets   --file-system-id $EFS_ID   --region eu-central-1   --query 'MountTargets[*].{AZ:AvailabilityZoneName,State:LifeCycleState}'   --output table                               --------------------------------                                                                                                                                                                                                  |     DescribeMountTargets     |                                                                                                                                                                                                  +----------------+-------------+                                                                                                                                                                                                  |       AZ       |    State    |                                                                                                                                                                                                  +----------------+-------------+                                                                                                                                                                                                  |  eu-central-1a |  available  |                                                                                                                                                                                                  |  eu-central-1b |  available  |                                                                                                                                                                                                  |  eu-central-1c |  available  |                                                                                                                                                                                                  +----------------+-------------+
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139457
- command: export EFS_AP_ID=$(aws efs create-access-point \\                                                                                                                                                            >   --file-system-id $EFS_ID \\                                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                                       >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                                  >   --root-directory 'Path=/nextcloud,data={\"Type\":\"directory\",\"OwnerUid\":\"33\",\"OwnerGid\":\"33\",\"Permissions\":\"0770\"}' \\                                                                                                           >   --query 'AccessPointId' --output text)                                                                                                                                                                                                                                                                                                                                                                                                                          Error parsing parameter '--root-directory': Expected: '=', received: '\"' for input:                                                                                                                                                Path=/nextcloud,data={\"Type\":\"directory\",\"OwnerUid\":\"33\",\"OwnerGid\":\"33\",\"Permissions\":\"0770\"}                                                                                                                                                         ^
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139464
- command: echo \"✅ Created Access Point: $EFS_AP_ID\"                                                                                                                                                                  ✅ Created Access Point:
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139464
- command: export EFS_AP_ID=$(aws efs create-access-point \\                                                                                                                                                            >   --file-system-id $EFS_ID \\                                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                                       >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                                  >   --root-directory 'Path=/nextcloud,CreationInfo={OwnerUid=33,OwnerGid=33,Permissions=\"0770\"}' \\                                                                                                                                >   --query 'AccessPointId' --output text)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139510
- command: echo \"✅ Created Access Point: $EFS_AP_ID\"                                                                                                                                                                  ✅ Created Access Point: fsap-0e687ffc150b18eda
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139524
- command: cat <<EOF | kubectl apply -f -                                                                                                                                                                              > apiVersion: storage.k8s.io/v1                                                                                                                                                                                                   > kind: StorageClass                                                                                                                                                                                                              > metadata:                                                                                                                                                                                                                       >   name: efs-sc                                                                                                                                                                                                                  > provisioner: efs.csi.aws.com                                                                                                                                                                                                    > parameters:                                                                                                                                                                                                                     >   provisioningMode: efs-ap                                                                                                                                                                                                      >   fileSystemId: $EFS_ID                                                                                                                                                                                                         >   accessPointId: $EFS_AP_ID                                                                                                                                                                                                     >   directoryPerms: \"770\"                                                                                                                                                                                                         >   uid: \"33\"                                                                                                                                                                                                                     >   gid: \"33\"                                                                                                                                                                                                                     > reclaimPolicy: Retain                                                                                                                                                                                                           > volumeBindingMode: Immediate                                                                                                                                                                                                    > EOF                                                                                                                                                                                                                             storageclass.storage.k8s.io/efs-sc created
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139569
- command: kubectl get storageclass                                                                                                                                                                                    NAME            PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                         efs-sc          efs.csi.aws.com         Retain          Immediate              false                  9s                                                                                                                          gp2 (default)   kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  38m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139578
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >   --set nextcloud.password=\"changeme\" \\                                                                                                                                                                                         >   --set nextcloud.host=cloud.your-domain.tld \\                                                                                                                                                                                  >   --set mariadb.enabled=false \\                                                                                                                                                                                                 >   --set externalDatabase.user=ncadmin \\                                                                                                                                                                                         >   --set externalDatabase.password=REPLACE_WITH_YOUR_DB_PASS \\                                                                                                                                                                   >   --set externalDatabase.database=nextcloud \\                                                                                                                                                                                   >   --set externalDatabase.host=REPLACE_WITH_YOUR_DB_HOST \\                                                                                                                                                                       >   --set persistence.enabled=true \\                                                                                                                                                                                              >   --set persistence.storageClass=efs-sc \\                                                                                                                                                                                       >   --set persistence.accessMode=ReadWriteMany \\                                                                                                                                                                                  >   --set persistence.size=20Gi                                                                                                                                                                                                   Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 12:34:32 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 3                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                  export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                             echo http://127.0.0.1:8080/                                                                                                                                                                                                       kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                        2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                   echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139672
- command: aws rds describe-db-instances                                                                                                                                                                               {                                                                                                                                                                                                                                     \"DBInstances\": []                                                                                                                                                                                                             }
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139706
- command: export DB_PASS=$(openssl rand -base64 20)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139749
- command: echo \"🔐 RDS password is: $DB_PASS\"                                                                                                                                                                         🔐 RDS password is: dX9/ZyV4LrK0umQHGc33tqVCDaw=
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139749
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"$DB_PASS\" \\                                                                                                                                                                                           >   --multi-az \\                                                                                                                                                                                                                  >   --publicly-accessible false \\                                                                                                                                                                                                 >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                              usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                                       To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                                                        aws help                                                                                                                                                                                                                          aws <command> help                                                                                                                                                                                                                aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                                                   Unknown options: false
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139764
- command: aws rds create-db-instance   --db-instance-identifier nextcloud-db   --engine mariadb   --engine-version 10.11   --db-instance-class db.t3.medium   --allocated-storage 20   --master-username ncadmin   --master-user-password \"$DB_PASS\"   --multi-az   --publicly-accessible false   --backup-retention-period 7   --region eu-central-1   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                                       To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                                                        aws help                                                                                                                                                                                                                          aws <command> help                                                                                                                                                                                                                aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                                                   Unknown options: false
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139773
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"$DB_PASS\" \\                                                                                                                                                                                           >   --multi-az \\                                                                                                                                                                                                                  >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                An error occurred (InvalidParameterValue) when calling the CreateDBInstance operation: The parameter MasterUserPassword is not a valid password. Only printable ASCII characters besides '/', '@', '\"', ' ' may be used.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139816
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"$DB_PASS\" \\                                                                                                                                                                                           >   --multi-az \\                                                                                                                                                                                                                  >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                            ^[[A^[[A^[[A                                                                                                                                                                                                                      An error occurred (InvalidParameterValue) when calling the CreateDBInstance operation: The parameter MasterUserPassword is not a valid password. Only printable ASCII characters besides '/', '@', '\"', ' ' may be used.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139835
- command: aws rds create-db-instance   --db-instance-identifier nextcloud-db   --engine mariadb   --engine-version 10.11   --db-instance-class db.t3.medium   --allocated-storage 20   --master-username ncadmin   --master-user-password \"$DB_PASS\"publicly-accessible false   --   --multi-az   --backup-retention-period 7   --region eu-central-1   --tags Key=proje^C,Value=nextcloud
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139849
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139849
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"dX9/ZyV4LrK0umQHGc33tqVCDaw=\" \\                                                                                                                                                                       >   --multi-az \\                                                                                                                                                                                                                  >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                              An error occurred (InvalidParameterValue) when calling the CreateDBInstance operation: The parameter MasterUserPassword is not a valid password. Only printable ASCII characters besides '/', '@', '\"', ' ' may be used.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139853
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139938
- command: aws rds create-db-subnet-group \\                                                                                                                                                                            >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                               >   --db-subnet-group-description \"Subnets for Nextcloud DB\" \\                                                                                                                                                                    >   --subnet-ids subnet-0eead685a78ca10e6 subnet-02ccac87e1a34983a subnet-0d4e34870770f1475 \\                                                                                                                                     >   --region eu-central-1                                                                                                                                                                                                                                                                                                                                                                                                                                           {                                                                                                                                                                                                                                     \"DBSubnetGroup\": {                                                                                                                                                                                                                    \"DBSubnetGroupName\": \"nextcloud-subnet-group\",                                                                                                                                                                                    \"DBSubnetGroupDescription\": \"Subnets for Nextcloud DB\",                                                                                                                                                                           \"VpcId\": \"vpc-0ed80417b67b8cb00\",                                                                                                                                                                                                 \"SubnetGroupStatus\": \"Complete\",                                                                                                                                                                                                  \"Subnets\": [                                                                                                                                                                                                                          {                                                                                                                                                                                                                                     \"SubnetIdentifier\": \"subnet-0eead685a78ca10e6\",                                                                                                                                                                                   \"SubnetAvailabilityZone\": {                                                                                                                                                                                                           \"Name\": \"eu-central-1a\"                                                                                                                                                                                                       },                                                                                                                                                                                                                                \"SubnetOutpost\": {},                                                                                                                                                                                                              \"SubnetStatus\": \"Active\"                                                                                                                                                                                                      },                                                                                                                                                                                                                                {                                                                                                                                                                                                                                     \"SubnetIdentifier\": \"subnet-0d4e34870770f1475\",                                                                                                                                                                                   \"SubnetAvailabilityZone\": {                                                                                                                                                                                                           \"Name\": \"eu-central-1c\"                                                                                                                                                                                                       },                                                                                                                                                                                                                                \"SubnetOutpost\": {},                                                                                                                                                                                                              \"SubnetStatus\": \"Active\"                                                                                                                                                                                                      },                                                                                                                                                                                                                                {                                                                                                                                                                                                                                     \"SubnetIdentifier\": \"subnet-02ccac87e1a34983a\",                                                                                                                                                                                   \"SubnetAvailabilityZone\": {                                                                                                                                                                                                           \"Name\": \"eu-central-1b\"                                                                                                                                                                                                       },                                                                                                                                                                                                                                \"SubnetOutpost\": {},                                                                                                                                                                                                              \"SubnetStatus\": \"Active\"                                                                                                                                                                                                      }                                                                                                                                                                                                                             ],                                                                                                                                                                                                                                \"DBSubnetGroupArn\": \"arn:aws:rds:eu-central-1:699475950702:subgrp:nextcloud-subnet-group\",                                                                                                                                        \"SupportedNetworkTypes\": [                                                                                                                                                                                                            \"IPV4\"                                                                                                                                                                                                                        ]                                                                                                                                                                                                                             }                                                                                                                                                                                                                             }
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139960
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"$DB_PASS\" \\                                                                                                                                                                                           >   --multi-az \\                                                                                                                                                                                                                  >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                               >   --no-publicly-accessible \\                                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                              An error occurred (DBInstanceAlreadyExists) when calling the CreateDBInstance operation: DB instance already exists
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747139976
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140030
- command: aws rds delete-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --skip-final-snapshot \\                                                                                                                                                                                                       >   --region eu-central-1                                                                                                                                                                                                                                                                                                                                                                                                                                           An error occurred (InvalidDBInstanceState) when calling the DeleteDBInstance operation: Instance nextcloud-db is already being deleted.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140034
- command: aws rds describe-db-instances \\                                                                                                                                                                             >   --query \"DBInstances[?DBInstanceIdentifier=='nextcloud-db'].DBInstanceStatus\" \\                                                                                                                                               >   --region eu-central-1 --output text                                                                                                                                                                                           deleting
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140044
- command: aws rds describe-db-instances   --query \"DBInstances[?DBInstanceIdentifier=='nextcloud-db'].DBInstanceStatus\"   --region eu-central-1 --output text                                                         deleting
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140109
- command: aws rds describe-db-instances   --query \"DBInstances[?DBInstanceIdentifier=='nextcloud-db'].DBInstanceStatus\"   --region eu-central-1 --output text
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140276
- command: aws rds create-db-subnet-group \\                                                                                                                                                                            >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                               >   --db-subnet-group-description \"Subnets for Nextcloud DB\" \\                                                                                                                                                                    >   --subnet-ids subnet-0eead685a78ca10e6 subnet-02ccac87e1a34983a subnet-0d4e34870770f1475 \\                                                                                                                                     >   --region eu-central-1                                                                                                                                                                                                                                                                                                                                                                                                                                           An error occurred (DBSubnetGroupAlreadyExists) when calling the CreateDBSubnetGroup operation: The DB subnet group 'nextcloud-subnet-group' already exists.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140292
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"$DB_PASS\" \\                                                                                                                                                                                           >   --multi-az \\                                                                                                                                                                                                                  >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                               >   --no-publicly-accessible \\                                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                              An error occurred (InvalidParameterValue) when calling the CreateDBInstance operation: The parameter MasterUserPassword is not a valid password. Only printable ASCII characters besides '/', '@', '\"', ' ' may be used.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140302
- command: aws rds create-db-instance \\                                                                                                                                                                                >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --engine mariadb \\                                                                                                                                                                                                            >   --engine-version 10.11 \\                                                                                                                                                                                                      >   --db-instance-class db.t3.medium \\                                                                                                                                                                                            >   --allocated-storage 20 \\                                                                                                                                                                                                      >   --master-username ncadmin \\                                                                                                                                                                                                   >   --master-user-password \"mariaDBMasterUsePasswortNextCloudOnAwsEks?!\" \\                                                                                                                                                        >   --multi-az \\                                                                                                                                                                                                                  >   --backup-retention-period 7 \\                                                                                                                                                                                                 >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                               >   --no-publicly-accessible \\                                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                                       >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                              An error occurred (InvalidParameterValue) when calling the CreateDBInstance operation: The parameter MasterUserPassword is not a valid password because it is longer than 41 characters.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140365
- command: aws rds describe-db-instances \\                                                                                                                                                                             >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --query \"DBInstances[0].Endpoint.Address\" \\                                                                                                                                                                                   >   --region eu-central-1 \\                                                                                                                                                                                                       >   --output text                                                                                                                                                                                                                 None
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140424
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].Endpoint.Address\"   --region eu-central-1   --output text                                                   None
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140429
- command: aws rds describe-db-instances \\                                                                                                                                                                             >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --query \"DBInstances[0].DBInstanceStatus\" \\                                                                                                                                                                                   >   --region eu-central-1 \\                                                                                                                                                                                                       >   --output text                                                                                                                                                                                                                 creating
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140476
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --region eu-central-1   --output text                                                   creating
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140489
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --region eu-central-1   --output text                                                   modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140591
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --region eu-central-1   --output text                                                   modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140699
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --region eu-central-1   --output text                                                   modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140812
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --region eu-central-1   --output text                                                   modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747140860
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --region eu-central-1   --output text                                                                     available
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142293
- command: aws rds describe-db-instances \\                                                                                                                                                                             >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                                       >   --query \"DBInstances[0].Endpoint.Address\" \\                                                                                                                                                                                   >   --region eu-central-1 \\                                                                                                                                                                                                       >   --output text                                                                                                                                                                                                                 nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142304
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >   --set nextcloud.password=\"changeme\" \\                                                                                                                                                                                         >   --set nextcloud.host=cloud.your-domain.tld \\                                                                                                                                                                                  >   --set mariadb.enabled=false \\                                                                                                                                                                                                 >   --set externalDatabase.user=ncadmin \\                                                                                                                                                                                         >   --set externalDatabase.password=\"dfFasAfafGADF?!\" \\                                                                                                                                                                           >   --set externalDatabase.database=nextcloud \\                                                                                                                                                                                   >   --set externalDatabase.host=nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com \\                                                                                                                                        >   --set persistence.enabled=true \\                                                                                                                                                                                              >   --set persistence.storageClass=efs-sc \\                                                                                                                                                                                       >   --set persistence.accessMode=ReadWriteMany \\                                                                                                                                                                                  >   --set persistence.size=20Gi                                                                                                                                                                                                   Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 13:19:00 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 4                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                  export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                             echo http://127.0.0.1:8080/                                                                                                                                                                                                       kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                        2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                   echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142341
- command: kubectl get pods -w                                                                                                                                                                                                                                                                                                                                                                                                                           Error when retrieving credentials from container-role: Error retrieving metadata: Received non 200 response 500 from container metadata: <?xml version=\"1.0\" encoding=\"iso-8859-1\"?>                                              <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"                                                                                                                                                                    \t       \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">                                                                                                                                                                <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">                                                                                                                                                                <head>                                                                                                                                                                                                                             <title>500 - Internal Server Error</title>                                                                                                                                                                                       </head>                                                                                                                                                                                                                           <body>                                                                                                                                                                                                                             <h1>500 - Internal Server Error</h1>                                                                                                                                                                                             </body>                                                                                                                                                                                                                          </html>                                                                                                                                                                                                                           Unable to connect to the server: getting credentials: exec: executable aws failed with exit code 255
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142381
- command: kubectl get pods -w                                                                                                                                                                                                           NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Pending   0          64m                                                                                                                                                          echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)                                                                                                                                                                                                                                                                                                                            ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142456
- command: NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Pending   0          64m                                                                                                                                                          kubectl describe pod -l app.kubernetes.io/instance=my-release                                                                                                                                                                                                                                                                                                                                                                                                       ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142499
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142501
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142502
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142502
- command: kubectl describe pod -l app.kubernetes.io/instance=my-release                                                                                                                                               Name:             my-release-nextcloud-85c678c484-tdlvq                                                                                                                                                                           Namespace:        default                                                                                                                                                                                                         Priority:         0                                                                                                                                                                                                               Service Account:  default                                                                                                                                                                                                         Node:             <none>                                                                                                                                                                                                          Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                   app.kubernetes.io/instance=my-release                                                                                                                                                                                             app.kubernetes.io/name=nextcloud                                                                                                                                                                                                  pod-template-hash=85c678c484                                                                                                                                                                                    Annotations:      hooks-hash: 9525c2748a6c7cd0e28ec740623d0b3fa5a75c83b51ccfd136bc89c76737b204                                                                                                                                                      nextcloud-config-hash: 8266a725d5474acb6adbf9f0609a3494dc3340a3ac306db90eac9ddb1b851960                                                                                                                                           php-config-hash: 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a                                                                                                                               Status:           Pending                                                                                                                                                                                                         IP:                                                                                                                                                                                                                               IPs:              <none>                                                                                                                                                                                                          Controlled By:    ReplicaSet/my-release-nextcloud-85c678c484                                                                                                                                                                      Containers:                                                                                                                                                                                                                         nextcloud:                                                                                                                                                                                                                          Image:      nextcloud:30.0.10-apache                                                                                                                                                                                              Port:       80/TCP                                                                                                                                                                                                                Host Port:  0/TCP                                                                                                                                                                                                                 Liveness:   http-get http://:80/status.php delay=10s timeout=5s period=10s #success=1 #failure=3                                                                                                                                  Readiness:  http-get http://:80/status.php delay=10s timeout=5s period=10s #success=1 #failure=3                                                                                                                                  Environment:                                                                                                                                                                                                                        SQLITE_DATABASE:            nextcloud                                                                                                                                                                                             NEXTCLOUD_ADMIN_USER:       <set to the key 'nextcloud-username' in secret 'my-release-nextcloud'>  Optional: false                                                                                                               NEXTCLOUD_ADMIN_PASSWORD:   <set to the key 'nextcloud-password' in secret 'my-release-nextcloud'>  Optional: false                                                                                                               NEXTCLOUD_TRUSTED_DOMAINS:  cloud.your-domain.tld                                                                                                                                                                                 NEXTCLOUD_DATA_DIR:         /var/www/html/data                                                                                                                                                                                  Mounts:                                                                                                                                                                                                                             /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-v27gx (ro)                                                                                                                                                     /var/www/ from nextcloud-main (rw,path=\"root\")                                                                                                                                                                                    /var/www/html from nextcloud-main (rw,path=\"html\")                                                                                                                                                                                /var/www/html/config from nextcloud-main (rw,path=\"config\")                                                                                                                                                                       /var/www/html/custom_apps from nextcloud-main (rw,path=\"custom_apps\")                                                                                                                                                             /var/www/html/data from nextcloud-main (rw,path=\"data\")                                                                                                                                                                           /var/www/html/themes from nextcloud-main (rw,path=\"themes\")                                                                                                                                                                       /var/www/tmp from nextcloud-main (rw,path=\"tmp\")                                                                                                                                                                            Conditions:                                                                                                                                                                                                                         Type           Status                                                                                                                                                                                                             PodScheduled   False                                                                                                                                                                                                            Volumes:                                                                                                                                                                                                                            nextcloud-main:                                                                                                                                                                                                                     Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)                                                                                                                                  ClaimName:  my-release-nextcloud-nextcloud                                                                                                                                                                                        ReadOnly:   false                                                                                                                                                                                                               kube-api-access-v27gx:                                                                                                                                                                                                              Type:                    Projected (a volume that contains injected data from multiple sources)                                                                                                                                   TokenExpirationSeconds:  3607                                                                                                                                                                                                     ConfigMapName:           kube-root-ca.crt                                                                                                                                                                                         ConfigMapOptional:       <nil>                                                                                                                                                                                                    DownwardAPI:             true                                                                                                                                                                                                 QoS Class:                   BestEffort                                                                                                                                                                                           Node-Selectors:              <none>                                                                                                                                                                                               Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s                                                                                                                                                                         node.kubernetes.io/unreachable:NoExecute op=Exists for 300s                                                                                                                                          Events:                                                                                                                                                                                                                             Type     Reason            Age                  From               Message                                                                                                                                                        ----     ------            ----                 ----               -------                                                                                                                                                        Warning  FailedScheduling  49m (x3 over 59m)    default-scheduler  0/1 nodes are available: persistentvolumeclaim \"my-release-nextcloud-nextcloud\" not found. preemption: 0/1 nodes are available: 1 Preemption is not helpful for scheduling.                                                                                                                                                                                                                      Warning  FailedScheduling  100s (x12 over 65m)  default-scheduler  0/1 nodes are available: pod has unbound immediate PersistentVolumeClaims. preemption: 0/1 nodes are available: 1 Preemption is not helpful for scheduling.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142506
- command: kubectl get pvc                                                                                                                                                                                             NAME                             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                          my-release-nextcloud-nextcloud   Pending                                      efs-sc         <unset>                 48m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142556
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >   --set nextcloud.password=\"changeme\" \\                                                                                                                                                                                         >   --set nextcloud.host=cloud.your-domain.tld \\                                                                                                                                                                                  >   --set mariadb.enabled=false \\                                                                                                                                                                                                 >   --set externalDatabase.user=ncadmin \\                                                                                                                                                                                         >   --set externalDatabase.password=\"dfFasAfafGADF?!\" \\                                                                                                                                                                           >   --set externalDatabase.database=nextcloud \\                                                                                                                                                                                   >   --set externalDatabase.host=nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com \\                                                                                                                                        >   --set persistence.enabled=true \\                                                                                                                                                                                              >   --set persistence.storageClass=efs-sc \\                                                                                                                                                                                       >   --set persistence.accessMode=ReadWriteMany \\                                                                                                                                                                                  >   --set persistence.size=20Gi                                                                                                                                                                                                   Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 13:22:55 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 5                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                  export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                             echo http://127.0.0.1:8080/                                                                                                                                                                                                       kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                        2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                   echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142575
- command: kubectl get pvc                                                                                                                                                                                             NAME                             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                          my-release-nextcloud-nextcloud   Pending                                      efs-sc         <unset>                 48m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142608
- command: kubectl get pods -w                                                                                                                                                                                         NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Pending   0          67m                                                                                                                                                          ^[[A                                                                                                                                                                                                                              ^[[A^[[A^[[A^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142647
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142648
- command: kubectl get pods -w                                                                                                                                                                                         NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Pending   0          67m                                                                                                                                                          ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142652
- command: kubectl get pvc                                                                                                                                                                                           NAME                             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                          my-release-nextcloud-nextcloud   Pending                                      efs-sc         <unset>                 49m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142655
- command: kubectl get pods -n kube-system -l app=efs-csi-node                                                                                                                                                         No resources found in kube-system namespace.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142663
- command: eksctl create addon \\                                                                                                                                                                                       >   --name aws-efs-csi-driver \\                                                                                                                                                                                                   >   --cluster nextcloud-cluster \\                                                                                                                                                                                                 >   --region eu-central-1 \\                                                                                                                                                                                                       >   --service-account-role-arn $(aws iam list-roles \\                                                                                                                                                                             >     --query 'Roles[?contains(RoleName,`AmazonEKS_EFS_CSI_DriverRole`)].Arn' \\                                                                                                                                                   >     --output text)                                                                                                                                                                                                              Error: flag needs an argument: --service-account-role-arn
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142689
- command: eksctl create iamserviceaccount \\                                                                                                                                                                           >   --name efs-csi-controller-sa \\                                                                                                                                                                                                >   --namespace kube-system \\                                                                                                                                                                                                     >   --cluster nextcloud-cluster \\                                                                                                                                                                                                 >   --region eu-central-1 \\                                                                                                                                                                                                       >   --role-name AmazonEKS_EFS_CSI_DriverRole \\                                                                                                                                                                                    >   --attach-policy-arn arn:aws:iam::aws:policy/service-role/AmazonEFSCSIDriverPolicy \\                                                                                                                                           >   --approve                                                                                                                                                                                                                     Error: unable to describe cluster control plane: operation error EKS: DescribeCluster, https response error StatusCode: 404, RequestID: 5ae7918a-903b-47d0-b54a-8598b6dc79da, ResourceNotFoundException: No cluster found for name: nextcloud-cluster.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142729
- command: eksctl create iamserviceaccount \\                                                                                                                                                                           >   --name efs-csi-controller-sa \\                                                                                                                                                                                                >   --namespace kube-system \\                                                                                                                                                                                                     >   --cluster nextcloudcluster \\                                                                                                                                                                                                  >   --region eu-central-1 \\                                                                                                                                                                                                       >   --role-name AmazonEKS_EFS_CSI_DriverRole \\                                                                                                                                                                                    >   --attach-policy-arn arn:aws:iam::aws:policy/service-role/AmazonEFSCSIDriverPolicy \\                                                                                                                                           >   --approve                                                                                                                                                                                                                     2025-05-13 13:25:50 [ℹ]  1 iamserviceaccount (kube-system/efs-csi-controller-sa) was included (based on the include/exclude rules)                                                                                                2025-05-13 13:25:50 [!]  serviceaccounts that exist in Kubernetes will be excluded, use --override-existing-serviceaccounts to override                                                                                           2025-05-13 13:25:50 [ℹ]  1 task: {                                                                                                                                                                                                    2 sequential sub-tasks: {                                                                                                                                                                                                             create IAM role for serviceaccount \"kube-system/efs-csi-controller-sa\",                                                                                                                                                           create serviceaccount \"kube-system/efs-csi-controller-sa\",                                                                                                                                                                    } }2025-05-13 13:25:50 [ℹ]  building iamserviceaccount stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                              2025-05-13 13:25:50 [ℹ]  deploying stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                                                      2025-05-13 13:25:50 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                                     2025-05-13 13:26:20 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                                     2025-05-13 13:26:20 [ℹ]  created serviceaccount \"kube-system/efs-csi-controller-sa\"
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747142780
- command: eksctl create addon \\                                                                                                                                                                                       >   --name aws-efs-csi-driver \\                                                                                                                                                                                                   >   --cluster nextcloudcluster \\                                                                                                                                                                                                  >   --region eu-central-1 \\                                                                                                                                                                                                       >   --service-account-role-arn $(aws iam list-roles \\                                                                                                                                                                             >     --query 'Roles[?RoleName==`AmazonEKS_EFS_CSI_DriverRole`].Arn' \\                                                                                                                                                            >     --output text)                                                                                                                                                                                                              2025-05-13 13:31:11 [ℹ]  Kubernetes version \"1.29\" in use by cluster \"nextcloudcluster\"                                                                                                                                           2025-05-13 13:31:11 [ℹ]  IRSA is set for \"aws-efs-csi-driver\" addon; will use this to configure IAM permissions                                                                                                                   2025-05-13 13:31:11 [!]  the recommended way to provide IAM permissions for \"aws-efs-csi-driver\" addon is via pod identity associations; after addon creation is completed, run `eksctl utils migrate-to-pod-identity`            2025-05-13 13:31:11 [ℹ]  using provided ServiceAccountRoleARN \"arn:aws:iam::699475950702:role/AmazonEKS_EFS_CSI_DriverRole\"                                                                                                       2025-05-13 13:31:11 [ℹ]  creating addon: aws-efs-csi-driver
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143072
- command: kubectl get pods -n kube-system -l app=efs-csi-node                                                                                                                                                         NAME                 READY   STATUS    RESTARTS   AGE                                                                                                                                                                             efs-csi-node-5l7kg   3/3     Running   0          22s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143102
- command: kubectl get pvc                                                                                                                                                                                             NAME                             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                         my-release-nextcloud-nextcloud   Bound    pvc-b7783403-bed3-4a0b-ae26-259a58f2b525   20Gi       RWX            efs-sc         <unset>                 57m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143116
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Running   0          76m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143140
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS   AGE                                                                                                                                                          my-release-nextcloud-85c678c484-tdlvq   0/1     Running   0          76m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143154
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-tdlvq   0/1     Running   3 (16s ago)   78m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143296
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-tdlvq   0/1     Running   3 (31s ago)   78m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143311
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-tdlvq   0/1     Running   3 (38s ago)   79m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143318
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS     AGE                                                                                                                                                        my-release-nextcloud-85c678c484-tdlvq   0/1     Running   4 (2s ago)   79m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143342
- command: kubectl logs my-release-nextcloud-85c678c484-tdlvq                                                                                                                                                          Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143376
- command: kubectl logs my-release-nextcloud-85c678c484-tdlvq                                                                                                                                                          Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143385
- command: kubectl logs my-release-nextcloud-85c678c484-tdlvq --previous                                                                                                                                               Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143395
- command: NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-tdlvq   0/1     Running   5 (17s ago)   80m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143417
- command: kubectl exec -it my-release-nextcloud-85c678c484-tdlvq -- /bin/bash                                                                                                                                         error: unable to upgrade connection: container not found (\"nextcloud\")
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143460
- command: apt update && apt install -y mariadb-client                                                                                                                                                                 bash: apt: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143477
- command: mysql -h nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com -u ncadmin -p                                                                                                                             Enter password:                                                                                                                                                                                                                   ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143551
- command: mysql -h nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com -u ncadmin -p                                                                                                                             Enter password:                                                                                                                                                                                                                   dfFasAfafGADF?!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143642
- command: getent hosts nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com                                                                                                                                       192.168.149.42  nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143644
- command: kubectl exec -it my-release-nextcloud-85c678c484-tdlvq -- /bin/bash                                                                                                                                         error: unable to upgrade connection: container not found (\"nextcloud\")
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143675
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >   --set nextcloud.debug=true                                                                                                                                                                                                    Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 13:43:29 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 6                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            #######################################################################################################                                                                                                                           ## WARNING: You did not provide an external database host in your 'helm install' call                ##                                                                                                                           ## Running Nextcloud with the integrated sqlite database is not recommended for production instances ##                                                                                                                           #######################################################################################################                                                                                                                                                                                                                                                                                                                                                             For better performance etc. you have to configure nextcloud with a resolvable database                                                                                                                                            host. To configure nextcloud to use and external database host:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1. Complete your nextcloud deployment by running:                                                                                                                                                                                                                                                                                                                                                                                                                     export APP_HOST=127.0.0.1                                                                                                                                                                                                         export APP_PASSWORD=$(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)                                                                                                                                                                                                                                                                                                                       ## PLEASE UPDATE THE EXTERNAL DATABASE CONNECTION PARAMETERS IN THE FOLLOWING COMMAND AS NEEDED ##                                                                                                                                                                                                                                                                                                                                                                  helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                                                       --set nextcloud.password=$APP_PASSWORD,nextcloud.host=$APP_HOST,service.type=ClusterIP,mariadb.enabled=false,externalDatabase.user=nextcloud,externalDatabase.database=nextcloud,externalDatabase.host=YOUR_EXTERNAL_DATABASE_HOST
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143810
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >   --set nextcloud.password=\"changeme\" \\                                                                                                                                                                                         >   --set nextcloud.host=cloud.your-domain.tld \\                                                                                                                                                                                  >   --set nextcloud.debug=true \\                                                                                                                                                                                                  >   --set mariadb.enabled=false \\                                                                                                                                                                                                 >   --set externalDatabase.user=ncadmin \\                                                                                                                                                                                         >   --set externalDatabase.password=\"dfFasAfafGADF?!\" \\                                                                                                                                                                           >   --set externalDatabase.database=nextcloud \\                                                                                                                                                                                   >   --set externalDatabase.host=nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com \\                                                                                                                                        >   --set persistence.enabled=true \\                                                                                                                                                                                              >   --set persistence.storageClass=efs-sc \\                                                                                                                                                                                       >   --set persistence.accessMode=ReadWriteMany \\                                                                                                                                                                                  >   --set persistence.size=20Gi                                                                                                                                                                                                                                                                                                                                                                                                                                     Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 13:44:31 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 7                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                  export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                             echo http://127.0.0.1:8080/                                                                                                                                                                                                       kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                        2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                   echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143872
- command: kubectl logs -l app.kubernetes.io/instance=my-release --previous                                                                                                                                            Error from server (BadRequest): previous terminated container \"nextcloud\" in pod \"my-release-nextcloud-85c678c484-5p56d\" not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143881
- command: kubectl logs -l app.kubernetes.io/instance=my-release --previous                                                                                                                                            Error from server (BadRequest): previous terminated container \"nextcloud\" in pod \"my-release-nextcloud-85c678c484-5p56d\" not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143895
- command: export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143914
- command: echo http://127.0.0.1:8080/                                                                                                                                                                               http://127.0.0.1:8080/
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143914
- command: kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                Forwarding from 127.0.0.1:8080 -> 80                                                                                                                                                                                              Forwarding from [::1]:8080 -> 80                                                                                                                                                                                                  ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747143994
- command: my-release-nextcloud-85c678c484-tdlvq                                                                                                                                                                    Error from server (NotFound): pods \"my-release-nextcloud-85c678c484-tdlvq\" not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144002
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS     AGE                                                                                                                                                        my-release-nextcloud-85c678c484-5p56d   0/1     Running   2 (4s ago)   2m15s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144011
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-5p56d   0/1     Running   2 (10s ago)   2m21s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144017
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-5p56d   0/1     Running   2 (16s ago)   2m27s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144023
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-5p56d   0/1     Running   2 (19s ago)   2m30s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144026
- command: kubectl get pods                                                                                                                                                                                            NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                                                       my-release-nextcloud-85c678c484-5p56d   0/1     Running   2 (23s ago)   2m34s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144030
- command: kubectl logs -l app.kubernetes.io/instance=my-release                                                                                                                                                       Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144075
- command: kubectl logs -l app.kubernetes.io/instance=my-release                                                                                                                                                       Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144083
- command: kubectl logs -l app.kubernetes.io/instance=my-release                                                                                                                                                       Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144095
- command: kubectl logs -l app.kubernetes.io/instance=my-release                                                                                                                                                       Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144099
- command: kubectl get events --sort-by=.lastTimestamp                                                                                                                                                                 LAST SEEN   TYPE      REASON                  OBJECT                                                 MESSAGE                                                                                                                      20m         Normal    ExternalProvisioning    persistentvolumeclaim/my-release-nextcloud-nextcloud   Waiting for a volume to be created either by the external provisioner 'efs.csi.aws.com' or manually by the system administrator. If volume creation is delayed, please verify that the provisioner is running and correctly registered.                                                                                                                        18m         Warning   FailedScheduling        pod/my-release-nextcloud-85c678c484-tdlvq              0/1 nodes are available: pod has unbound immediate PersistentVolumeClaims. preemption: 0/1 nodes are available: 1 Preemption is not helpful for scheduling.                                                                                                                                                                                                    18m         Normal    Provisioning            persistentvolumeclaim/my-release-nextcloud-nextcloud   External provisioner is provisioning volume for claim \"default/my-release-nextcloud-nextcloud\"                               18m         Normal    ProvisioningSucceeded   persistentvolumeclaim/my-release-nextcloud-nextcloud   Successfully provisioned volume pvc-b7783403-bed3-4a0b-ae26-259a58f2b525                                                     18m         Normal    Scheduled               pod/my-release-nextcloud-85c678c484-tdlvq              Successfully assigned default/my-release-nextcloud-85c678c484-tdlvq to ip-192-168-88-181.eu-central-1.compute.internal       16m         Normal    Created                 pod/my-release-nextcloud-85c678c484-tdlvq              Created container: nextcloud                                                                                                 16m         Normal    Pulled                  pod/my-release-nextcloud-85c678c484-tdlvq              Container image \"nextcloud:30.0.10-apache\" already present on machine                                                        16m         Normal    Killing                 pod/my-release-nextcloud-85c678c484-tdlvq              Container nextcloud failed liveness probe, will be restarted                                                                 16m         Warning   Unhealthy               pod/my-release-nextcloud-85c678c484-tdlvq              Liveness probe failed: Get \"http://192.168.81.201:80/status.php\": dial tcp 192.168.81.201:80: connect: connection refused    16m         Warning   Unhealthy               pod/my-release-nextcloud-85c678c484-tdlvq              Readiness probe failed: Get \"http://192.168.81.201:80/status.php\": dial tcp 192.168.81.201:80: connect: connection refused   12m         Normal    Started                 pod/my-release-nextcloud-85c678c484-tdlvq              Started container nextcloud                                                                                                  7m45s       Warning   BackOff                 pod/my-release-nextcloud-85c678c484-tdlvq              Back-off restarting failed container nextcloud in pod my-release-nextcloud-85c678c484-tdlvq_default(2bf4d360-0cb0-4d5e-8ea1-1375f3339907)                                                                                                                                                                                                                      6m8s        Normal    ScalingReplicaSet       deployment/my-release-nextcloud                        Scaled down replica set my-release-nextcloud-85c678c484 to 0 from 1                                                          6m7s        Normal    SuccessfulDelete        replicaset/my-release-nextcloud-85c678c484             Deleted pod: my-release-nextcloud-85c678c484-tdlvq                                                                           5m37s       Normal    SuccessfulCreate        replicaset/my-release-nextcloud-6fd86c494              Created pod: my-release-nextcloud-6fd86c494-4qd25                                                                            5m37s       Normal    ScalingReplicaSet       deployment/my-release-nextcloud                        Scaled up replica set my-release-nextcloud-6fd86c494 to 1 from 0                                                             5m37s       Normal    Scheduled               pod/my-release-nextcloud-6fd86c494-4qd25               Successfully assigned default/my-release-nextcloud-6fd86c494-4qd25 to ip-192-168-88-181.eu-central-1.compute.internal        5m36s       Normal    Pulled                  pod/my-release-nextcloud-6fd86c494-4qd25               Container image \"nextcloud:30.0.10-apache\" already present on machine                                                        5m36s       Normal    Created                 pod/my-release-nextcloud-6fd86c494-4qd25               Created container: nextcloud                                                                                                 5m36s       Normal    Started                 pod/my-release-nextcloud-6fd86c494-4qd25               Started container nextcloud                                                                                                  5m16s       Warning   Unhealthy               pod/my-release-nextcloud-6fd86c494-4qd25               Readiness probe failed: Get \"http://192.168.72.206:80/status.php\": dial tcp 192.168.72.206:80: connect: connection refused   5m16s       Warning   Unhealthy               pod/my-release-nextcloud-6fd86c494-4qd25               Liveness probe failed: Get \"http://192.168.72.206:80/status.php\": dial tcp 192.168.72.206:80: connect: connection refused    5m5s        Normal    ScalingReplicaSet       deployment/my-release-nextcloud                        Scaled down replica set my-release-nextcloud-6fd86c494 to 0 from 1                                                           5m5s        Normal    SuccessfulDelete        replicaset/my-release-nextcloud-6fd86c494              Deleted pod: my-release-nextcloud-6fd86c494-4qd25                                                                            5m5s        Normal    Killing                 pod/my-release-nextcloud-6fd86c494-4qd25               Stopping container nextcloud                                                                                                 5m1s        Normal    Scheduled               pod/my-release-nextcloud-85c678c484-5p56d              Successfully assigned default/my-release-nextcloud-85c678c484-5p56d to ip-192-168-88-181.eu-central-1.compute.internal       5m1s        Normal    SuccessfulCreate        replicaset/my-release-nextcloud-85c678c484             Created pod: my-release-nextcloud-85c678c484-5p56d                                                                           5m1s        Normal    ScalingReplicaSet       deployment/my-release-nextcloud                        Scaled up replica set my-release-nextcloud-85c678c484 to 1 from 0                                                            3m50s       Normal    Started                 pod/my-release-nextcloud-85c678c484-5p56d              Started container nextcloud                                                                                                  3m50s       Normal    Pulled                  pod/my-release-nextcloud-85c678c484-5p56d              Container image \"nextcloud:30.0.10-apache\" already present on machine                                                        3m50s       Normal    Created                 pod/my-release-nextcloud-85c678c484-5p56d              Created container: nextcloud                                                                                                 3m20s       Normal    Killing                 pod/my-release-nextcloud-85c678c484-5p56d              Container nextcloud failed liveness probe, will be restarted                                                                 3m20s       Warning   Unhealthy               pod/my-release-nextcloud-85c678c484-5p56d              Readiness probe failed: Get \"http://192.168.81.201:80/status.php\": dial tcp 192.168.81.201:80: connect: connection refused   3m20s       Warning   Unhealthy               pod/my-release-nextcloud-85c678c484-5p56d              Liveness probe failed: Get \"http://192.168.81.201:80/status.php\": dial tcp 192.168.81.201:80: connect: connection refused
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144177
- command: kubectl logs -l app.kubernetes.io/instance=my-release                                                                                                                                                       Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144256
- command: helm repo update                                                                                                                                                                                            Hang tight while we grab the latest from your chart repositories...                                                                                                                                                               ...Successfully got an update from the \"nextcloud\" chart repository                                                                                                                                                               Update Complete. ⎈Happy Helming!⎈
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144351
- command: helm install my-release nextcloud/nextcloud                                                                                                                                                                 Error: INSTALLATION FAILED: cannot re-use a name that is still in use
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144361
- command: helm repo add nextcloud-aio https://nextcloud.github.io/all-in-one/                                                                                                                                        \"nextcloud-aio\" has been added to your repositories
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144434
- command: ls
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144434
- command: nextcloud-aio-helm-chart                                                                                                                                                                                    bash: nextcloud-aio-helm-chart: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144441
- command: ls
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144448
- command: helm repo update                                                                                                                                                                                            Hang tight while we grab the latest from your chart repositories...                                                                                                                                                               ...Successfully got an update from the \"nextcloud-aio\" chart repository                                                                                                                                                           ...Successfully got an update from the \"nextcloud\" chart repository                                                                                                                                                               Update Complete. ⎈Happy Helming!⎈
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144459
- command: helm search repo nextcloud-aio                                                                                                                                                                              NAME                                  \t CHART VERSION\t  APP VERSION\t    DESCRIPTION                                                                                                                                               nextcloud-aio/nextcloud-aio-helm-chart\t 10.14.0      \t             \t    A generated Helm Chart for Nextcloud AIO from S...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144470
- command: helm pull nextcloud-aio/nextcloud-aio --untar                                                                                                                                                               Error: chart \"nextcloud-aio\" matching  not found in nextcloud-aio index. (try 'helm repo update'): no chart name found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144478
- command: ls
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144487
- command: cd
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144517
- command: cd ..
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home
  time: 1747144518
- command: d                                                                                                                                                                                                    bash: d: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home
  time: 1747144522
- command: ls                                                                                                                                                                                                   cloudshell-user
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home
  time: 1747144527
- command: cd cloudshell-user
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144533
- command: ls
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144535
- command: mkdir test
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144541
- command: ls                                                                                                                                                                                                          test
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144542
- command: helm pull nextcloud-aio/nextcloud-aio --untar                                                                                                                                                               Error: chart \"nextcloud-aio\" matching  not found in nextcloud-aio index. (try 'helm repo update'): no chart name found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144548
- command: nextcloud-aio-helm-chart                                                                                                                                                                                    bash: nextcloud-aio-helm-chart: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144556
- command: helm repo add nextcloud-aio https://nextcloud.github.io/all-in-one/                                                                                                                                         \"nextcloud-aio\" already exists with the same configuration, skipping
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144571
- command: helm repo add nextcloud-aio https://nextcloud.github.io/all-in-one/                                                                                                                                         \"nextcloud-aio\" already exists with the same configuration, skipping
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144643
- command: helm uninstall my-release                                                                                                                                                                                   These resources were kept due to the resource policy:                                                                                                                                                                             [PersistentVolumeClaim] my-release-nextcloud-nextcloud                                                                                                                                                                                                                                                                                                                                                                                                              release \"my-release\" uninstalled
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144646
- command: kubectl delete pvc -l app.kubernetes.io/instance=my-release                                                                                                                                                 persistentvolumeclaim \"my-release-nextcloud-nextcloud\" deleted
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144654
- command: kubectl delete sc efs-sc                                                                                                                                                                                    storageclass.storage.k8s.io \"efs-sc\" deleted
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144655
- command: aws efs describe-access-points --file-system-id <your-efs-id> --region eu-central-1                                                                                                                         bash: your-efs-id: No such file or directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144662
- command: aws efs describe-access-points --file-system-id <your-efs-id> --region eu-central-1                                                                                                                         bash: your-efs-id: No such file or directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144665
- command: aws efs delete-access-point --access-point-id <ap-id> --region eu-central-1                                                                                                                                 bash: ap-id: No such file or directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144668
- command: aws efs delete-file-system --file-system-id <your-efs-id> --region eu-central-1                                                                                                                             bash: your-efs-id: No such file or directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144671
- command: helm uninstall my-release                                                                                                                                                                                   Error: uninstall: Release not loaded: my-release: release: not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144689
- command: kubectl get all                                                                                                                                                                                             NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE                                                                                                                                                         service/kubernetes   ClusterIP   10.100.0.1   <none>        443/TCP   124m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747144693
- command: kubectl get ns                                                                                                                                                                                              NAME              STATUS   AGE                                                                                                                                                                                                    default           Active   129m                                                                                                                                                                                                   kube-node-lease   Active   129m                                                                                                                                                                                                   kube-public       Active   129m                                                                                                                                                                                                   kube-system       Active   129m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145026
- command: kubectl get all -n nginx-ingress                                                                                                                                                                            No resources found in nginx-ingress namespace.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145043
- command: helm repo add nextcloud https://nextcloud.github.io/helm/                                                                                                                                                   \"nextcloud\" already exists with the same configuration, skipping
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145077
- command: helm repo update                                                                                                                                                                                            Hang tight while we grab the latest from your chart repositories...                                                                                                                                                               ...Successfully got an update from the \"nextcloud-aio\" chart repository                                                                                                                                                           ...Successfully got an update from the \"nextcloud\" chart repository                                                                                                                                                               Update Complete. ⎈Happy Helming!⎈
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145082
- command: helm install my-release nextcloud/nextcloud                                                                                                                                                                 NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 14:04:47 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 1                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            #######################################################################################################                                                                                                                           ## WARNING: You did not provide an external database host in your 'helm install' call                ##                                                                                                                           ## Running Nextcloud with the integrated sqlite database is not recommended for production instances ##                                                                                                                           #######################################################################################################                                                                                                                                                                                                                                                                                                                                                             For better performance etc. you have to configure nextcloud with a resolvable database                                                                                                                                            host. To configure nextcloud to use and external database host:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1. Complete your nextcloud deployment by running:                                                                                                                                                                                                                                                                                                                                                                                                                     export APP_HOST=127.0.0.1                                                                                                                                                                                                         export APP_PASSWORD=$(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)                                                                                                                                                                                                                                                                                                                       ## PLEASE UPDATE THE EXTERNAL DATABASE CONNECTION PARAMETERS IN THE FOLLOWING COMMAND AS NEEDED ##                                                                                                                                                                                                                                                                                                                                                                  helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                                                       --set nextcloud.password=$APP_PASSWORD,nextcloud.host=$APP_HOST,service.type=ClusterIP,mariadb.enabled=false,externalDatabase.user=nextcloud,externalDatabase.database=nextcloud,externalDatabase.host=YOUR_EXTERNAL_DATABASE_HOST
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145087
- command: export APP_HOST=127.0.0.1
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145123
- command: export APP_PASSWORD=$(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145129
- command: helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                               >     --set nextcloud.password=$APP_PASSWORD,nextcloud.host=$APP_HOST,service.type=ClusterIP,mariadb.enabled=false,externalDatabase.user=nextcloud,externalDatabase.database=nextcloud,externalDatabase.host=YOUR_EXTERNAL_DATABASE_HOST                                                                                                                                                                                                                            Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                            NAME: my-release                                                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 14:05:47 2025                                                                                                                                                                                           NAMESPACE: default                                                                                                                                                                                                                STATUS: deployed                                                                                                                                                                                                                  REVISION: 2                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                  export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                             echo http://127.0.0.1:8080/                                                                                                                                                                                                       kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                        2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                   echo User:     admin                                                                                                                                                                                                              echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145147
- command: export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145158
- command: export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145163
- command: echo http://127.0.0.1:8080/                                                                                                                                                                                 http://127.0.0.1:8080/
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145166
- command: kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                  Forwarding from 127.0.0.1:8080 -> 80                                                                                                                                                                                              Forwarding from [::1]:8080 -> 80                                                                                                                                                                                                  helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx                                                                                                                                                            ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145389
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145389
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145389
- command: kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                  ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145392
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145392
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145392
- command: helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx                                                                                                                                      \"ingress-nginx\" has been added to your repositories
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145396
- command: helm repo update                                                                                                                                                                                            Hang tight while we grab the latest from your chart repositories...                                                                                                                                                               ...Successfully got an update from the \"nextcloud-aio\" chart repository                                                                                                                                                           ...Successfully got an update from the \"ingress-nginx\" chart repository                                                                                                                                                           ...Successfully got an update from the \"nextcloud\" chart repository                                                                                                                                                               Update Complete. ⎈Happy Helming!⎈
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145402
- command: helm install nginx-ingress ingress-nginx/ingress-nginx \\                                                                                                                                                    >   --set controller.publishService.enabled=true \\                                                                                                                                                                                >   --create-namespace \\                                                                                                                                                                                                          >   --namespace ingress-nginx                                                                                                                                                                                                     NAME: nginx-ingress                                                                                                                                                                                                               LAST DEPLOYED: Tue May 13 14:10:15 2025                                                                                                                                                                                           NAMESPACE: ingress-nginx                                                                                                                                                                                                          STATUS: deployed                                                                                                                                                                                                                  REVISION: 1                                                                                                                                                                                                                       TEST SUITE: None                                                                                                                                                                                                                  NOTES:                                                                                                                                                                                                                            The ingress-nginx controller has been installed.                                                                                                                                                                                  It may take a few minutes for the load balancer IP to be available.                                                                                                                                                               You can watch the status by running 'kubectl get service --namespace ingress-nginx nginx-ingress-ingress-nginx-controller --output wide --watch'                                                                                                                                                                                                                                                                                                                    An example Ingress that makes use of the controller:                                                                                                                                                                                apiVersion: networking.k8s.io/v1                                                                                                                                                                                                  kind: Ingress                                                                                                                                                                                                                     metadata:                                                                                                                                                                                                                           name: example                                                                                                                                                                                                                     namespace: foo                                                                                                                                                                                                                  spec:                                                                                                                                                                                                                               ingressClassName: nginx                                                                                                                                                                                                           rules:                                                                                                                                                                                                                              - host: www.example.com                                                                                                                                                                                                             http:                                                                                                                                                                                                                               paths:                                                                                                                                                                                                                              - pathType: Prefix                                                                                                                                                                                                                  backend:                                                                                                                                                                                                                            service:                                                                                                                                                                                                                            name: exampleService                                                                                                                                                                                                              port:                                                                                                                                                                                                                               number: 80                                                                                                                                                                                                                  path: /                                                                                                                                                                                                                 # This section is only required if TLS is to be enabled for the Ingress                                                                                                                                                           tls:                                                                                                                                                                                                                                - hosts:                                                                                                                                                                                                                            - www.example.com                                                                                                                                                                                                                 secretName: example-tls                                                                                                                                                                                                                                                                                                                                                                                                                                     If TLS is enabled for the Ingress, a Secret containing the certificate and key must also be provided:                                                                                                                                                                                                                                                                                                                                                                 apiVersion: v1                                                                                                                                                                                                                    kind: Secret                                                                                                                                                                                                                      metadata:                                                                                                                                                                                                                           name: example-tls                                                                                                                                                                                                                 namespace: foo                                                                                                                                                                                                                  data:                                                                                                                                                                                                                               tls.crt: <base64 encoded cert>                                                                                                                                                                                                    tls.key: <base64 encoded key>                                                                                                                                                                                                   type: kubernetes.io/tls
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145427
- command: kubectl get all -n nginx-ingress                                                                                                                                                              No resources found in nginx-ingress namespace.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145463
- command: ingress-nginx                                                                                                                                                              NAME                                                          READY   STATUS    RESTARTS   AGE                                                                                                    pod/nginx-ingress-ingress-nginx-controller-847b785fb7-mmv7j   1/1     Running   0          62s                                                                                                                                                                                                                                                                                                      NAME                                                       TYPE           CLUSTER-IP       EXTERNAL-IP                                                                  PORT(S)                      AGE                                                                                                                                                                                            service/nginx-ingress-ingress-nginx-controller             LoadBalancer   10.100.227.178   af0eedb1f499944d5ab0913591c1ecfd-1229851997.eu-central-1.elb.amazonaws.com   80:30198/TCP,443:31489/TCP   62s                                                                                                                                                                                            service/nginx-ingress-ingress-nginx-controller-admission   ClusterIP      10.100.47.175    <none>                                                                       443/TCP                      62s                                                                                                                                                                                                                                                                                                                                                                                              NAME                                                     READY   UP-TO-DATE   AVAILABLE   AGE                                                                                                     deployment.apps/nginx-ingress-ingress-nginx-controller   1/1     1            1           62s                                                                                                                                                                                                                                                                                                       NAME                                                                DESIRED   CURRENT   READY   AGE                                                                                               replicaset.apps/nginx-ingress-ingress-nginx-controller-847b785fb7   1         1         1       62s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145484
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145496
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145496
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145496
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145496
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145496
- command: kubectl get all -n ingress-nginx                                                                                                                                            NAME                                                          READY   STATUS    RESTARTS   AGE                                                                                                    pod/nginx-ingress-ingress-nginx-controller-847b785fb7-mmv7j   1/1     Running   0          76s                                                                                                                                                                                                                                                                                                      NAME                                                       TYPE           CLUSTER-IP       EXTERNAL-IP                                                                  PORT(S)                      AGE                                                                                                                                                                                            service/nginx-ingress-ingress-nginx-controller             LoadBalancer   10.100.227.178   af0eedb1f499944d5ab0913591c1ecfd-1229851997.eu-central-1.elb.amazonaws.com   80:30198/TCP,443:31489/TCP   76s                                                                                                                                                                                            service/nginx-ingress-ingress-nginx-controller-admission   ClusterIP      10.100.47.175    <none>                                                                       443/TCP                      76s                                                                                                                                                                                                                                                                                                                                                                                              NAME                                                     READY   UP-TO-DATE   AVAILABLE   AGE                                                                                                     deployment.apps/nginx-ingress-ingress-nginx-controller   1/1     1            1           77s                                                                                                                                                                                                                                                                                                       NAME                                                                DESIRED   CURRENT   READY   AGE                                                                                               replicaset.apps/nginx-ingress-ingress-nginx-controller-847b785fb7   1         1         1       77s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145499
- command: helm list                                                                                                                                                                   NAME      \t     NAMESPACE\t      REVISION\t       UPDATED                                \tSTATUS  \t       CHART           \t       APP VERSION                                                       my-release\t     default  \t      2       \t       2025-05-13 14:05:47.292308234 +0000 UTC\tdeployed\t       nextcloud-6.6.10\t       30.0.10
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145519
- command: helm search nextcloud                                                                                                                                                                                                                                                                                                                                                         Search provides the ability to search for Helm charts in the various places                                                                                                                       they can be stored including the Artifact Hub and repositories you have added.                                                                                                                    Use search subcommands to search different locations for charts.                                                                                                                                                                                                                                                                                                                                    Usage:                                                                                                                                                                                              helm search [command]                                                                                                                                                                                                                                                                                                                                                                             Available Commands:                                                                                                                                                                                 hub         search for charts in the Artifact Hub or your own hub instance                                                                                                                        repo        search repositories for a keyword in charts                                                                                                                                                                                                                                                                                                                                           Flags:                                                                                                                                                                                              -h, --help   help for search                                                                                                                                                                                                                                                                                                                                                                      Global Flags:                                                                                                                                                                                           --burst-limit int                 client-side default throttling limit (default 100)                                                                                                              --debug                           enable verbose output                                                                                                                                           --kube-apiserver string           the address and the port for the Kubernetes API server                                                                                                          --kube-as-group stringArray       group to impersonate for the operation, this flag can be repeated to specify multiple groups.                                                                   --kube-as-user string             username to impersonate for the operation                                                                                                                       --kube-ca-file string             the certificate authority file for the Kubernetes API server connection                                                                                         --kube-context string             name of the kubeconfig context to use                                                                                                                           --kube-insecure-skip-tls-verify   if true, the Kubernetes API server's certificate will not be checked for validity. This will make your HTTPS connections insecure                               --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used                     --kube-token string               bearer token used for authentication                                                                                                                            --kubeconfig string               path to the kubeconfig file                                                                                                                                 -n, --namespace string                namespace scope for this request                                                                                                                                --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting                                                                      --registry-config string          path to the registry config file (default \"/home/cloudshell-user/.config/helm/registry/config.json\")                                                            --repository-cache string         path to the directory containing cached repository indexes (default \"/home/cloudshell-user/.cache/helm/repository\")                                             --repository-config string        path to the file containing repository names and URLs (default \"/home/cloudshell-user/.config/helm/repositories.yaml\")                                                                                                                                                                                                                                      Use \"helm search [command] --help\" for more information about a command.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145532
- command: oud                                                                                                                                                                                                                                                                                                                                                                           Search provides the ability to search for Helm charts in the various places                                                                                                                       they can be stored including the Artifact Hub and repositories you have added.                                                                                                                    Use search subcommands to search different locations for charts.                                                                                                                                                                                                                                                                                                                                    Usage:                                                                                                                                                                                              helm search [command]                                                                                                                                                                                                                                                                                                                                                                             Available Commands:                                                                                                                                                                                 hub         search for charts in the Artifact Hub or your own hub instance                                                                                                                        repo        search repositories for a keyword in charts                                                                                                                                                                                                                                                                                                                                           Flags:                                                                                                                                                                                              -h, --help   help for search                                                                                                                                                                                                                                                                                                                                                                      Global Flags:                                                                                                                                                                                           --burst-limit int                 client-side default throttling limit (default 100)                                                                                                              --debug                           enable verbose output                                                                                                                                           --kube-apiserver string           the address and the port for the Kubernetes API server                                                                                                          --kube-as-group stringArray       group to impersonate for the operation, this flag can be repeated to specify multiple groups.                                                                   --kube-as-user string             username to impersonate for the operation                                                                                                                       --kube-ca-file string             the certificate authority file for the Kubernetes API server connection                                                                                         --kube-context string             name of the kubeconfig context to use                                                                                                                           --kube-insecure-skip-tls-verify   if true, the Kubernetes API server's certificate will not be checked for validity. This will make your HTTPS connections insecure                               --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used                     --kube-token string               bearer token used for authentication                                                                                                                            --kubeconfig string               path to the kubeconfig file                                                                                                                                 -n, --namespace string                namespace scope for this request                                                                                                                                --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting                                                                      --registry-config string          path to the registry config file (default \"/home/cloudshell-user/.config/helm/registry/config.json\")                                                            --repository-cache string         path to the directory containing cached repository indexes (default \"/home/cloudshell-user/.cache/helm/repository\")                                             --repository-config string        path to the file containing repository names and URLs (default \"/home/cloudshell-user/.config/helm/repositories.yaml\")                                                                                                                                                                                                                                      Use \"helm search [command] --help\" for more information about a command.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145566
- command: nextcloud                                                                                                                                                                   bash: nextcloud: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145574
- command: helm inspect values nextcloud                                                                                                                                               Error: non-absolute URLs should be in form of repo_name/path_to_chart, got: nextcloud
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145592
- command: helm search                                                                                                                                                                                                                                                                                                                                                                   Search provides the ability to search for Helm charts in the various places                                                                                                                       they can be stored including the Artifact Hub and repositories you have added.                                                                                                                    Use search subcommands to search different locations for charts.                                                                                                                                                                                                                                                                                                                                    Usage:                                                                                                                                                                                              helm search [command]                                                                                                                                                                                                                                                                                                                                                                             Available Commands:                                                                                                                                                                                 hub         search for charts in the Artifact Hub or your own hub instance                                                                                                                        repo        search repositories for a keyword in charts                                                                                                                                                                                                                                                                                                                                           Flags:                                                                                                                                                                                              -h, --help   help for search                                                                                                                                                                                                                                                                                                                                                                      Global Flags:                                                                                                                                                                                           --burst-limit int                 client-side default throttling limit (default 100)                                                                                                              --debug                           enable verbose output                                                                                                                                           --kube-apiserver string           the address and the port for the Kubernetes API server                                                                                                          --kube-as-group stringArray       group to impersonate for the operation, this flag can be repeated to specify multiple groups.                                                                   --kube-as-user string             username to impersonate for the operation                                                                                                                       --kube-ca-file string             the certificate authority file for the Kubernetes API server connection                                                                                         --kube-context string             name of the kubeconfig context to use                                                                                                                           --kube-insecure-skip-tls-verify   if true, the Kubernetes API server's certificate will not be checked for validity. This will make your HTTPS connections insecure                               --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used                     --kube-token string               bearer token used for authentication                                                                                                                            --kubeconfig string               path to the kubeconfig file                                                                                                                                 -n, --namespace string                namespace scope for this request                                                                                                                                --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting                                                                      --registry-config string          path to the registry config file (default \"/home/cloudshell-user/.config/helm/registry/config.json\")                                                            --repository-cache string         path to the directory containing cached repository indexes (default \"/home/cloudshell-user/.cache/helm/repository\")                                             --repository-config string        path to the file containing repository names and URLs (default \"/home/cloudshell-user/.config/helm/repositories.yaml\")                                                                                                                                                                                                                                      Use \"helm search [command] --help\" for more information about a command.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145642
- command: helm search hub nextcloud                                                                                                                                                   URL                                               \t     CHART VERSION\t  APP VERSION  \t  DESCRIPTION                                                                                               https://artifacthub.io/packages/helm/nextcloud/...\t     6.6.10       \t  30.0.10      \t  A file sharing server that puts the control and...                                                        https://artifacthub.io/packages/helm/rock8s/nex...\t     6.6.10       \t  31.0.4       \t  agile project management platform                                                                         https://artifacthub.io/packages/helm/cloudve/ne...\t     1.13.0       \t  17.0.0       \t  A file sharing server that puts the control and...                                                        https://artifacthub.io/packages/helm/th-charts/...\t     0.3.4        \t  31.0.0       \t  Nextcloud server, a safe home for all your data                                                           https://artifacthub.io/packages/helm/linogics/n...\t     22.0.0-v7    \t  22.0.0       \t  Nextcloud Helm Chart by linogics.io                                                                       https://artifacthub.io/packages/helm/qjoly/next...\t     3.5.13       \t  26.0.2       \t  A file sharing server that puts the control and...                                                        https://artifacthub.io/packages/helm/groundhog2...\t     0.19.3       \t  31.0.4-apache\t  A Helm chart for Nextcloud on Kubernetes                                                                  https://artifacthub.io/packages/helm/si-gitops/...\t     3.6.5        \t  28.0.14      \t  A file sharing server that puts the control and...                                                        https://artifacthub.io/packages/helm/homeenterp...\t     0.6.0        \t  22.0.0-apache\t  file server                                                                                               https://artifacthub.io/packages/helm/aws-nextcl...\t     4.6.7        \t  28.0.2       \t  Fork from nextcloud community for aws-eks nlb c...                                                        https://artifacthub.io/packages/helm/schichtel/...\t     0.3.0        \t  1.1.0        \t  A Helm chart for nextcloud's push_notify server                                                           https://artifacthub.io/packages/helm/collabora-...\t     1.1.38       \t  24.04.13.3.1 \t  Collabora Online helm chart                                                                               https://artifacthub.io/packages/helm/glasskube/...\t     0.12.2       \t  0.12.2       \t  The Glasskube Operator is an open source Kubern...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145661
- command: helm search hub nextcloud                                                                                                                                                                                                                                                        URL                                               \t     CHART VERSION\t  APP VERSION  \t  DESCRIPTION                                                                                                                                                                                  https://artifacthub.io/packages/helm/nextcloud/...\t     6.6.10       \t  30.0.10      \t  A file sharing server that puts the control and...                                                                                                                                           https://artifacthub.io/packages/helm/rock8s/nex...\t     6.6.10       \t  31.0.4       \t  agile project management platform                                                                                                                                                            https://artifacthub.io/packages/helm/cloudve/ne...\t     1.13.0       \t  17.0.0       \t  A file sharing server that puts the control and...                                                                                                                                           https://artifacthub.io/packages/helm/th-charts/...\t     0.3.4        \t  31.0.0       \t  Nextcloud server, a safe home for all your data                                                                                                                                              https://artifacthub.io/packages/helm/linogics/n...\t     22.0.0-v7    \t  22.0.0       \t  Nextcloud Helm Chart by linogics.io                                                                                                                                                          https://artifacthub.io/packages/helm/qjoly/next...\t     3.5.13       \t  26.0.2       \t  A file sharing server that puts the control and...                                                                                                                                           https://artifacthub.io/packages/helm/groundhog2...\t     0.19.3       \t  31.0.4-apache\t  A Helm chart for Nextcloud on Kubernetes                                                                                                                                                     https://artifacthub.io/packages/helm/si-gitops/...\t     3.6.5        \t  28.0.14      \t  A file sharing server that puts the control and...                                                                                                                                           https://artifacthub.io/packages/helm/homeenterp...\t     0.6.0        \t  22.0.0-apache\t  file server                                                                                                                                                                                  https://artifacthub.io/packages/helm/aws-nextcl...\t     4.6.7        \t  28.0.2       \t  Fork from nextcloud community for aws-eks nlb c...                                                                                                                                           https://artifacthub.io/packages/helm/schichtel/...\t     0.3.0        \t  1.1.0        \t  A Helm chart for nextcloud's push_notify server                                                                                                                                              https://artifacthub.io/packages/helm/collabora-...\t     1.1.38       \t  24.04.13.3.1 \t  Collabora Online helm chart                                                                                                                                                                  https://artifacthub.io/packages/helm/glasskube/...\t     0.12.2       \t  0.12.2       \t  The Glasskube Operator is an open source Kubern...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145674
- command: helm add repo https://github.com/nextcloud/helm                                                                                                                                              Error: unknown command \"add\" for \"helm\"                                                                                                                                                          Run 'helm --help' for usage.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145754
- command: helm repo add https://github.com/nextcloud/helm                                                                                                                            Error: \"helm repo add\" requires 2 arguments                                                                                                                                                                                                                                                                                                                                                       Usage:  helm repo add [NAME] [URL] [flags]
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145764
- command: helm repo add nextcloud https://nextcloud.github.io/helm/                                                                                                                  \"nextcloud\" already exists with the same configuration, skipping
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145781
- command: ls                                                                                                                                                                         test
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747145783
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747146352
- command: ls                                                                                                                                                                         test  values.yaml
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747146360
- command: helm upgrade --install --namespace nextcloud -f values.yaml nextcloud nextcloud/nextcloud                                                                                  Release \"nextcloud\" does not exist. Installing it now.                                                                                                                                           Error: create: failed to create: namespaces \"nextcloud\" not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747146394
- command: kubectl get ns                                                                                                                                                             NAME              STATUS   AGE                                                                                                                                                                   default           Active   153m                                                                                                                                                                  ingress-nginx     Active   16m                                                                                                                                                                   kube-node-lease   Active   153m                                                                                                                                                                  kube-public       Active   153m                                                                                                                                                                  kube-system       Active   153m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747146431
- command: tall --namespace default -f values.yaml nextcloud nextcloud/nextcloud                                                                                                      Release \"nextcloud\" does not exist. Installing it now.                                                                                                                                           NAME: nextcloud                                                                                                                                                                                  LAST DEPLOYED: Tue May 13 14:27:24 2025                                                                                                                                                          NAMESPACE: default                                                                                                                                                                               STATUS: deployed                                                                                                                                                                                 REVISION: 1                                                                                                                                                                                      TEST SUITE: None                                                                                                                                                                                 NOTES:                                                                                                                                                                                           #######################################################################################################                                                                                          ## WARNING: You did not provide an external database host in your 'helm install' call                ##                                                                                          ## Running Nextcloud with the integrated sqlite database is not recommended for production instances ##                                                                                          #######################################################################################################                                                                                                                                                                                                                                                                                           For better performance etc. you have to configure nextcloud with a resolvable database                                                                                                           host. To configure nextcloud to use and external database host:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    1. Complete your nextcloud deployment by running:                                                                                                                                                                                                                                                                                                                                                   export APP_HOST=127.0.0.1                                                                                                                                                                        export APP_PASSWORD=$(kubectl get secret --namespace default nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)                                                                                                                                                                                                                                                                ## PLEASE UPDATE THE EXTERNAL DATABASE CONNECTION PARAMETERS IN THE FOLLOWING COMMAND AS NEEDED ##                                                                                                                                                                                                                                                                                                helm upgrade nextcloud nextcloud/nextcloud \\                                                                                                                                                       --set nextcloud.password=$APP_PASSWORD,nextcloud.host=$APP_HOST,service.type=ClusterIP,mariadb.enabled=false,externalDatabase.user=nextcloud,externalDatabase.database=nextcloud,externalDatabase.host=YOUR_EXTERNAL_DATABASE_HOST
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747146444
- command: eksctl delete cluster --name nextcloudcluster --region eu-central-1                                                                                                                                             2025-05-13 14:34:50 [ℹ]  deleting EKS cluster \"nextcloudcluster\"                                                                                                                                                    2025-05-13 14:34:50 [ℹ]  will drain 0 unmanaged nodegroup(s) in cluster \"nextcloudcluster\"                                                                                                                          2025-05-13 14:34:50 [ℹ]  starting parallel draining, max in-flight of 1                                                                                                                                             2025-05-13 14:34:51 [ℹ]  deleted 0 Fargate profile(s)                                                                                                                                                               2025-05-13 14:34:51 [✔]  kubeconfig has been updated                                                                                                                                                                2025-05-13 14:34:51 [ℹ]  cleaning up AWS load balancers created by Kubernetes objects of Kind Service or Ingress                                                                                                    2025-05-13 14:35:17 [ℹ]                                                                                                                                                                                             4 sequential tasks: { delete nodegroup \"nextcloudnodes\",                                                                                                                                                                2 sequential sub-tasks: {                                                                                                                                                                                               2 sequential sub-tasks: {                                                                                                                                                                                               delete IAM role for serviceaccount \"kube-system/efs-csi-controller-sa\",                                                                                                                                             delete serviceaccount \"kube-system/efs-csi-controller-sa\",                                                                                                                                                      },                                                                                                                                                                                                                  delete IAM OIDC provider,                                                                                                                                                                                       }, delete addon IAM \"eksctl-nextcloudcluster-addon-vpc-cni\", delete cluster control plane \"nextcloudcluster\" [async]                                                                                            }                                                                                                                                                                                                                   2025-05-13 14:35:17 [ℹ]  will delete stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                                       2025-05-13 14:35:17 [ℹ]  waiting for stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\" to get deleted                                                                                                        2025-05-13 14:35:18 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:35:48 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:36:44 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:37:49 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:38:20 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:39:28 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:41:13 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:41:43 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:43:05 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:44:01 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-nodegroup-nextcloudnodes\"                                                                                                        2025-05-13 14:44:01 [ℹ]  will delete stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                                      2025-05-13 14:44:01 [ℹ]  waiting for stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\" to get deleted                                                                       2025-05-13 14:44:02 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                       2025-05-13 14:44:32 [ℹ]  waiting for CloudFormation stack \"eksctl-nextcloudcluster-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                       2025-05-13 14:44:32 [ℹ]  deleted serviceaccount \"kube-system/efs-csi-controller-sa\"                                                                                                                                 2025-05-13 14:44:32 [ℹ]  will delete stack \"eksctl-nextcloudcluster-addon-vpc-cni\"                                                                                                                                  2025-05-13 14:44:32 [ℹ]  will delete stack \"eksctl-nextcloudcluster-cluster\"                                                                                                                                        2025-05-13 14:44:33 [✔]  all cluster resources were deleted
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747147473
- command: export CLUSTER=nextcloud-eks
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747147626
- command: export REGION=eu-central-1
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747147626
- command: export K8S_VERSION=\"1.30\"
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747147627
- command: eksctl create cluster \\                                                                                                                                                                       >   --name $CLUSTER \\                                                                                                                                                                                               >   --version $K8S_VERSION \\                                                                                                                                                                                        >   --region  $REGION \\                                                                                                                                                                                             >   --with-oidc \\                                                                                                                                                                                                   >   --managed \\                                                                                                                                                                                                     >   --nodes 3 \\                                                                                                                                                                                                     >   --node-type t3a.medium \\                                                                                                                                                                                        >   --alb-ingress-access \\                                                                                                                                                                                          >   --enable-efs                                                                                                                                                                                                    Error: unknown flag: --enable-efs
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747147630
- command: eksctl create cluster \\                                                                                                                                                                       >   --name nextcloudcluster \\                                                                                                                                                                                       >   --region eu-central-1 \\                                                                                                                                                                                         >   --nodes 2 \\                                                                                                                                                                                                     >   --node-type t3.medium \\                                                                                                                                                                                         >   --with-oidc \\                                                                                                                                                                                                   >   --managed                                                                                                                                                                                                       2025-05-13 14:47:57 [ℹ]  eksctl version 0.208.0                                                                                                                                                                     2025-05-13 14:47:57 [ℹ]  using region eu-central-1                                                                                                                                                                  2025-05-13 14:47:57 [!]  Amazon EKS will no longer publish EKS-optimized Amazon Linux 2 (AL2) AMIs after November 26th, 2025. Additionally, Kubernetes version 1.32 is the last version for which Amazon EKS will release AL2 AMIs. From version 1.33 onwards, Amazon EKS will continue to release AL2023 and Bottlerocket based AMIs. The default AMI family when creating clusters and nodegroups in Eksctl will be changed to AL2023 in the future.                                                                                                                                                                                                      2025-05-13 14:47:57 [ℹ]  setting availability zones to [eu-central-1c eu-central-1b eu-central-1a]                                                                                                                  2025-05-13 14:47:57 [ℹ]  subnets for eu-central-1c - public:192.168.0.0/19 private:192.168.96.0/19                                                                                                                  2025-05-13 14:47:57 [ℹ]  subnets for eu-central-1b - public:192.168.32.0/19 private:192.168.128.0/19                                                                                                                2025-05-13 14:47:57 [ℹ]  subnets for eu-central-1a - public:192.168.64.0/19 private:192.168.160.0/19                                                                                                                2025-05-13 14:47:57 [ℹ]  nodegroup \"ng-cf085b63\" will use \"\" [AmazonLinux2/1.32]                                                                                                                                    2025-05-13 14:47:57 [ℹ]  using Kubernetes version 1.32                                                                                                                                                              2025-05-13 14:47:57 [ℹ]  creating EKS cluster \"nextcloudcluster\" in \"eu-central-1\" region with managed nodes                                                                                                        2025-05-13 14:47:57 [ℹ]  will create 2 separate CloudFormation stacks for cluster itself and the initial managed nodegroup                                                                                          2025-05-13 14:47:57 [ℹ]  if you encounter any issues, check CloudFormation console or try 'eksctl utils describe-stacks --region=eu-central-1 --cluster=nextcloudcluster'                                           2025-05-13 14:47:57 [ℹ]  Kubernetes API endpoint access will use default of {publicAccess=true, privateAccess=false} for cluster \"nextcloudcluster\" in \"eu-central-1\"                                               2025-05-13 14:47:57 [ℹ]  CloudWatch logging will not be enabled for cluster \"nextcloudcluster\" in \"eu-central-1\"                                                                                                    2025-05-13 14:47:57 [ℹ]  you can enable it with 'eksctl utils update-cluster-logging --enable-types={SPECIFY-YOUR-LOG-TYPES-HERE (e.g. all)} --region=eu-central-1 --cluster=nextcloudcluster'                      2025-05-13 14:47:57 [ℹ]  default addons vpc-cni, kube-proxy, coredns, metrics-server were not specified, will install them as EKS addons                                                                            2025-05-13 14:47:57 [ℹ]                                                                                                                                                                                             2 sequential tasks: { create cluster control plane \"nextcloudcluster\",                                                                                                                                                  2 sequential sub-tasks: {                                                                                                                                                                                               5 sequential sub-tasks: {                                                                                                                                                                                               1 task: { create addons },                                                                                                                                                                                          wait for control plane to become ready,                                                                                                                                                                             associate IAM OIDC provider,                                                                                                                                                                                        no tasks,                                                                                                                                                                                                           update VPC CNI to use IRSA if required,                                                                                                                                                                         },                                                                                                                                                                                                                  create managed nodegroup \"ng-cf085b63\",                                                                                                                                                                         }                                                                                                                                                                                                               }                                                                                                                                                                                                                   2025-05-13 14:47:57 [ℹ]  building cluster stack \"eksctl-nextcloudcluster-cluster\"                                                                                                                                   2025-05-13 14:47:57 [!]  1 error(s) occurred and cluster hasn't been created properly, you may wish to check CloudFormation console                                                                                 2025-05-13 14:47:57 [ℹ]  to cleanup resources, run 'eksctl delete cluster --region=eu-central-1 --name=nextcloudcluster'                                                                                            2025-05-13 14:47:57 [✖]  creating CloudFormation stack \"eksctl-nextcloudcluster-cluster\": operation error CloudFormation: CreateStack, https response error StatusCode: 400, RequestID: a4b466ff-3592-4042-9229-c0bbd32fcfc9, AlreadyExistsException: Stack [eksctl-nextcloudcluster-cluster] already exists                                                                                                                            Error: failed to create cluster \"nextcloudcluster\"
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747147677
- command: eksctl utils associate-iam-oidc-provider \\                                                                                                                                                    >   --cluster clusternextcloud \\                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                         >   --approve                                                                                                                                                                                                       2025-05-13 15:02:14 [ℹ]  IAM Open ID Connect provider is already associated with cluster \"clusternextcloud\" in \"eu-central-1\"
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148534
- command: ~ $ eksctl utils associate-iam-oidc-provider \\                                                                                                                                                > >   --cluster clusternextcloud \\                                                                                                                                                                                  > >   --region eu-central-1 \\                                                                                                                                                                                       > >   --approve                                                                                                                                                                                                     bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148567
- command: 2025-05-13 15:02:14 [ℹ]  IAM Open ID Connect provider is already associated with cluster \"clusternextcloud\" in \"eu-central-1\"                                                                 bash: 2025-05-13: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148569
- command: eksctl update addon \\                                                                                                                                                                         >   --name vpc-cni \\                                                                                                                                                                                                >   --cluster clusternextcloud \\                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                         >   --force                                                                                                                                                                                                         2025-05-13 15:02:56 [ℹ]  Kubernetes version \"1.32\" in use by cluster \"clusternextcloud\"                                                                                                                             2025-05-13 15:02:56 [ℹ]  no new version provided, preserving existing version: v1.19.2-eksbuild.1                                                                                                                   2025-05-13 15:02:56 [ℹ]  updating addon                                                                                                                                                                             2025-05-13 15:03:07 [ℹ]  addon \"vpc-cni\" active
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148587
- command: eksctl utils migrate-to-pod-identity \\                                                                                                                                                        >   --cluster clusternextcloud \\                                                                                                                                                                                    >   --region eu-central-1                                                                                                                                                                                                                                                                                                                                                                                                               2025-05-13 15:03:12 [ℹ]  found IAM role for service account aws-node associated with EKS addon vpc-cni                                                                                                              2025-05-13 15:03:12 [ℹ]  will migrate addon vpc-cni with serviceAccountRoleARN \"arn:aws:iam::699475950702:role/eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\" to pod identity; OIDC provider trust relationship will also be removed                                                                                                                                                                                         2025-05-13 15:03:13 [ℹ]  (plan) would migrate 0 iamserviceaccount(s) and 1 addon(s) to pod identity by executing the following tasks                                                                                2025-05-13 15:03:13 [ℹ]  (plan)                                                                                                                                                                                     2 sequential tasks: { install eks-pod-identity-agent addon,                                                                                                                                                             2 sequential sub-tasks: {                                                                                                                                                                                               update trust policy for owned role \"eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\",                                                                                                                      migrate addon vpc-cni to pod identity,                                                                                                                                                                          }                                                                                                                                                                                                               }                                                                                                                                                                                                                   2025-05-13 15:03:13 [ℹ]  all tasks were skipped                                                                                                                                                                     2025-05-13 15:03:13 [!]  no changes were applied, run again with '--approve' to apply the changes
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148593
- command: eksctl create addon --name aws-efs-csi-driver --cluster $CLUSTER --service-account-role-arn \\                                                                                                 >   $(aws iam list-roles --query 'Roles[?contains(RoleName,`AmazonEKS_EFS_CSI_DriverRole`)].Arn' --output text)                                                                                                     Error: flag needs an argument: --service-account-role-arn
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148622
- command: eksctl create iamserviceaccount \\                                                                                                                                                             >   --name efs-csi-controller-sa \\                                                                                                                                                                                  >   --namespace kube-system \\                                                                                                                                                                                       >   --cluster clusternextcloud \\                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                         >   --role-name AmazonEKS_EFS_CSI_DriverRole \\                                                                                                                                                                      >   --attach-policy-arn arn:aws:iam::aws:policy/service-role/AmazonEFSCSIDriverPolicy \\                                                                                                                             >   --approve                                                                                                                                                                                                       2025-05-13 15:05:08 [ℹ]  1 iamserviceaccount (kube-system/efs-csi-controller-sa) was included (based on the include/exclude rules)                                                                                  2025-05-13 15:05:08 [!]  serviceaccounts that exist in Kubernetes will be excluded, use --override-existing-serviceaccounts to override                                                                             2025-05-13 15:05:08 [ℹ]  1 task: {                                                                                                                                                                                      2 sequential sub-tasks: {                                                                                                                                                                                               create IAM role for serviceaccount \"kube-system/efs-csi-controller-sa\",                                                                                                                                             create serviceaccount \"kube-system/efs-csi-controller-sa\",                                                                                                                                                      } }2025-05-13 15:05:08 [ℹ]  building iamserviceaccount stack \"eksctl-clusternextcloud-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                2025-05-13 15:05:08 [ℹ]  deploying stack \"eksctl-clusternextcloud-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                                        2025-05-13 15:05:08 [ℹ]  waiting for CloudFormation stack \"eksctl-clusternextcloud-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                       2025-05-13 15:05:38 [ℹ]  waiting for CloudFormation stack \"eksctl-clusternextcloud-addon-iamserviceaccount-kube-system-efs-csi-controller-sa\"                                                                       2025-05-13 15:05:38 [ℹ]  created serviceaccount \"kube-system/efs-csi-controller-sa\"
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148738
- command: eksctl create addon --name aws-efs-csi-driver --cluster $CLUSTER --service-account-role-arn \\                                                                                                 >   $(aws iam list-roles --query 'Roles[?contains(RoleName,`AmazonEKS_EFS_CSI_DriverRole`)].Arn' --output text)                                                                                                     Error: unable to describe cluster control plane: operation error EKS: DescribeCluster, https response error StatusCode: 404, RequestID: fcb37bce-64fe-4736-ac09-7be36c8253fb, ResourceNotFoundException: No cluster found for name: nextcloud-eks.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148764
- command: eksctl create addon --name aws-efs-csi-driver --cluster clusternextcloud --service-account-role-arn \\                                                                                         >   $(aws iam list-roles --query 'Roles[?contains(RoleName,`AmazonEKS_EFS_CSI_DriverRole`)].Arn' --output text)                                                                                                     2025-05-13 15:06:52 [ℹ]  Kubernetes version \"1.32\" in use by cluster \"clusternextcloud\"                                                                                                                             2025-05-13 15:06:53 [ℹ]  IRSA is set for \"aws-efs-csi-driver\" addon; will use this to configure IAM permissions                                                                                                     2025-05-13 15:06:53 [!]  the recommended way to provide IAM permissions for \"aws-efs-csi-driver\" addon is via pod identity associations; after addon creation is completed, run `eksctl utils migrate-to-pod-identity`                                                                                                                                                                                                                  2025-05-13 15:06:53 [ℹ]  using provided ServiceAccountRoleARN \"arn:aws:iam::699475950702:role/AmazonEKS_EFS_CSI_DriverRole\"                                                                                         2025-05-13 15:06:53 [ℹ]  creating addon: aws-efs-csi-driver
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148813
- command: eksctl utils migrate-to-pod-identity                                                                                                                                                          Error: --cluster must be set
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148829
- command: eksctl utils migrate-to-pod-identity \\                                                                                                                                                        >   --cluster clusternextcloud \\                                                                                                                                                                                    >   --region eu-central-1                                                                                                                                                                                           2025-05-13 15:07:49 [ℹ]  found IAM role for service account aws-node associated with EKS addon vpc-cni                                                                                                              2025-05-13 15:07:49 [ℹ]  found IAM role for service account efs-csi-controller-sa associated with EKS addon aws-efs-csi-driver                                                                                      2025-05-13 15:07:49 [ℹ]  found IAM role for service account efs-csi-node-sa associated with EKS addon aws-efs-csi-driver                                                                                            2025-05-13 15:07:50 [ℹ]  will migrate addon aws-efs-csi-driver with serviceAccountRoleARN \"arn:aws:iam::699475950702:role/AmazonEKS_EFS_CSI_DriverRole\" to pod identity; OIDC provider trust relationship will also be removed                                                                                                                                                                                                          2025-05-13 15:07:50 [ℹ]  will migrate addon vpc-cni with serviceAccountRoleARN \"arn:aws:iam::699475950702:role/eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\" to pod identity; OIDC provider trust relationship will also be removed                                                                                                                                                                                         2025-05-13 15:07:50 [ℹ]  (plan) would migrate 0 iamserviceaccount(s) and 2 addon(s) to pod identity by executing the following tasks                                                                                2025-05-13 15:07:50 [ℹ]  (plan)                                                                                                                                                                                     2 sequential tasks: { install eks-pod-identity-agent addon,                                                                                                                                                             2 parallel sub-tasks: {                                                                                                                                                                                                 2 sequential sub-tasks: {                                                                                                                                                                                               update trust policy for unowned role \"AmazonEKS_EFS_CSI_DriverRole\",                                                                                                                                                migrate addon aws-efs-csi-driver to pod identity,                                                                                                                                                               },                                                                                                                                                                                                                  2 sequential sub-tasks: {                                                                                                                                                                                               update trust policy for owned role \"eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\",                                                                                                                      migrate addon vpc-cni to pod identity,                                                                                                                                                                          },                                                                                                                                                                                                              }                                                                                                                                                                                                               }                                                                                                                                                                                                                   2025-05-13 15:07:50 [ℹ]  all tasks were skipped                                                                                                                                                                     2025-05-13 15:07:50 [!]  no changes were applied, run again with '--approve' to apply the changes
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747148870
- command: eksctl utils migrate-to-pod-identity \\                                                                                                                                                        >   --cluster clusternextcloud \\                                                                                                                                                                                    >   --region eu-central-1 \\                                                                                                                                                                                         >   --approve                                                                                                                                                                                                       2025-05-13 15:08:16 [ℹ]  found IAM role for service account aws-node associated with EKS addon vpc-cni                                                                                                              2025-05-13 15:08:16 [ℹ]  found IAM role for service account efs-csi-controller-sa associated with EKS addon aws-efs-csi-driver                                                                                      2025-05-13 15:08:16 [ℹ]  found IAM role for service account efs-csi-node-sa associated with EKS addon aws-efs-csi-driver                                                                                            2025-05-13 15:08:17 [ℹ]  will migrate addon aws-efs-csi-driver with serviceAccountRoleARN \"arn:aws:iam::699475950702:role/AmazonEKS_EFS_CSI_DriverRole\" to pod identity; OIDC provider trust relationship will also be removed                                                                                                                                                                                                          2025-05-13 15:08:17 [ℹ]  will migrate addon vpc-cni with serviceAccountRoleARN \"arn:aws:iam::699475950702:role/eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\" to pod identity; OIDC provider trust relationship will also be removed                                                                                                                                                                                         2025-05-13 15:08:17 [ℹ]  will migrate 0 iamserviceaccount(s) and 2 addon(s) to pod identity by executing the following tasks                                                                                        2025-05-13 15:08:17 [ℹ]                                                                                                                                                                                             2 sequential tasks: { install eks-pod-identity-agent addon,                                                                                                                                                             2 parallel sub-tasks: {                                                                                                                                                                                                 2 sequential sub-tasks: {                                                                                                                                                                                               update trust policy for unowned role \"AmazonEKS_EFS_CSI_DriverRole\",                                                                                                                                                migrate addon aws-efs-csi-driver to pod identity,                                                                                                                                                               },                                                                                                                                                                                                                  2 sequential sub-tasks: {                                                                                                                                                                                               update trust policy for owned role \"eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\",                                                                                                                      migrate addon vpc-cni to pod identity,                                                                                                                                                                          },                                                                                                                                                                                                              }                                                                                                                                                                                                               }                                                                                                                                                                                                                   2025-05-13 15:08:17 [ℹ]  creating addon: eks-pod-identity-agent                                                                                                                                                     2025-05-13 15:09:01 [ℹ]  addon \"eks-pod-identity-agent\" active                                                                                                                                                      2025-05-13 15:09:01 [ℹ]  updating IAM resources stack \"eksctl-clusternextcloud-addon-vpc-cni\" for role \"eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\"                                                   2025-05-13 15:09:01 [ℹ]  updated trust policy for role AmazonEKS_EFS_CSI_DriverRole                                                                                                                                 2025-05-13 15:09:01 [ℹ]  creating a pod identity for addon aws-efs-csi-driver with service account efs-csi-controller-sa                                                                                            2025-05-13 15:09:02 [ℹ]  waiting for CloudFormation changeset \"eksctl-eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph-update-1747148941\" for stack \"eksctl-clusternextcloud-addon-vpc-cni\"                 2025-05-13 15:09:32 [ℹ]  waiting for CloudFormation changeset \"eksctl-eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph-update-1747148941\" for stack \"eksctl-clusternextcloud-addon-vpc-cni\"                 2025-05-13 15:09:32 [ℹ]  waiting for CloudFormation stack \"eksctl-clusternextcloud-addon-vpc-cni\"                                                                                                                   2025-05-13 15:10:02 [ℹ]  waiting for CloudFormation stack \"eksctl-clusternextcloud-addon-vpc-cni\"                                                                                                                   2025-05-13 15:10:02 [ℹ]  updated IAM resources stack \"eksctl-clusternextcloud-addon-vpc-cni\" for role \"eksctl-clusternextcloud-addon-vpc-cni-Role1-JUZOyyMi71Ph\"                                                    2025-05-13 15:10:02 [ℹ]  creating a pod identity for addon vpc-cni with service account aws-node                                                                                                                    2025-05-13 15:10:06 [ℹ]  all tasks were completed successfully
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149006
- command: export CLUSTER=clusternextcloud
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149054
- command: eksctl create addon --name aws-efs-csi-driver --cluster $CLUSTER --service-account-role-arn \\                                                                                                 >   $(aws iam list-roles --query 'Roles[?contains(RoleName,`AmazonEKS_EFS_CSI_DriverRole`)].Arn' --output text)                                                                                                                                                                                                                                                                                                                         2025-05-13 15:11:07 [ℹ]  Kubernetes version \"1.32\" in use by cluster \"clusternextcloud\"                                                                                                                             2025-05-13 15:11:07 [ℹ]  \"aws-efs-csi-driver\" addon is already present on the cluster, as an EKS managed addon, skipping creation
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149067
- command: EFS_ID=$(aws efs create-file-system \\                                                                                                                                                         >   --throughput-mode bursting \\                                                                                                                                                                                    >   --performance-mode generalPurpose \\                                                                                                                                                                             >   --query 'FileSystemId' --output text)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149084
- command: aws efs create-mount-target --file-system-id $EFS_ID \\                                                                                                                                        >   --subnet-id $(aws ec2 describe-subnets --filters \"Name=tag:aws:cloudformation:stack-name,Values=eksctl-$CLUSTER-cluster/SubPrivate*\" \\                                                                          >   --query 'Subnets[0].SubnetId' --output text) \\                                                                                                                                                                  >   --security-groups $(aws ec2 describe-security-groups --filters Name=group-name,Values=*EKSNodeSecurityGroup \\                                                                                                   >   --query 'SecurityGroups[0].GroupId' --output text)                                                                                                                                                                                                                                                                                                                                                                                  Parameter validation failed:                                                                                                                                                                                        Invalid length for parameter SubnetId, value: 4, valid min length: 15                                                                                                                                               Invalid length for parameter SecurityGroups[0], value: 4, valid min length: 11
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149094
- command: ~ $ aws efs create-mount-target --file-system-id $EFS_ID \\                                                                                                                                    > >   --subnet-id $(aws ec2 describe-subnets --filters \"Name=tag:aws:cloudformation:stack-name,Values=eksctl-$CLUSTER-cluster/SubPrivate*\" \\                                                                        > >   --query 'Subnets[0].SubnetId' --output text) \\                                                                                                                                                                > >   --security-groups $(aws ec2 describe-security-groups --filters Name=group-name,Values=*EKSNodeSecurityGroup \\                                                                                                 > >   --query 'SecurityGroups[0].GroupId' --output text)                                                                                                                                                                                                                                                                                                                                                                                Error parsing parameter '--filters': Expected: '=', received: '[' for input:                                                                                                                                         Subnets[0].SubnetId                                                                                                                                                                                                       ^                                                                                                                                                                                                                                                                                                                                                                                                                                Error parsing parameter '--filters': Expected: '=', received: '[' for input:                                                                                                                                         SecurityGroups[0].GroupId                                                                                                                                                                                                        ^                                                                                                                                                                                                     bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149150
- command: Parameter validation failed:                                                                                                                                                                  bash: Parameter: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149150
- command: Invalid length for parameter SubnetId, value: 4, valid min length: 15                                                                                                                         bash: Invalid: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149150
- command: Invalid length for parameter SecurityGroups[0], value: 4, valid min length: 11^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149155
- command: eksctl get cluster                                                                                                                                                                            NAME\t   \t       \t       REGION\t \t       EKSCTL CREATED                                                                                                                                                              clusternextcloud\t       eu-central-1\t   True
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149156
- command: aws ec2 describe-subnets \\                                                                                                                                                                    >   --filters \"Name=tag:eksctl.cluster.k8s.io/v1alpha1/cluster-name,Values=clusternextcloud\" \\                                                                                                                      >            \"Name=tag:aws:cloudformation:logical-id,Values=*Private*\" \\                                                                                                                                            >   --query \"Subnets[].SubnetId\" \\                                                                                                                                                                                  >   --output text                                                                                                                                                                                                   subnet-0dd51e5442b0d1677        subnet-01e75f94eb78720c3        subnet-0216e10fe9beea7fa
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149171
- command: subnet-0dd51e5442b0d1677        subnet-01e75f94eb78720c3        subnet-0216e10fe9beea7fa^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149237
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149237
- command: eksctl get cluster --region eu-central-1                                                                                                                                                      NAME\t   \t       \t       REGION\t \t       EKSCTL CREATED                                                                                                                                                              clusternextcloud\t       eu-central-1\t   True
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149239
- command: vpc-09fdd7346616aec48^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149295
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149295
- command: aws ec2 describe-security-groups \\                                                                                                                                                            >   --filters \"Name=vpc-id,Values=vpc-09fdd7346616aec48\" \\                                                                                                                                                          >   --query \"SecurityGroups[?contains(GroupName, 'eks')].{Name:GroupName,ID:GroupId}\" \\                                                                                                                             >   --output table                                                                                                                                                                                                  ---------------------------------------------------------------------------------------------------------                                                                                                           |                                        DescribeSecurityGroups                                         |                                                                                                           +----------------------+--------------------------------------------------------------------------------+                                                                                                           |          ID          |                                     Name                                       |                                                                                                           +----------------------+--------------------------------------------------------------------------------+                                                                                                           |  sg-0a3f9c5422c7e2a60|  eksctl-clusternextcloud-cluster-ControlPlaneSecurityGroup-ZcrtDg2nvPqG        |                                                                                                           |  sg-052fd37205d5b6e22|  eksctl-clusternextcloud-cluster-ClusterSharedNodeSecurityGroup-qQBocbCDYkpP   |                                                                                                           |  sg-017f0979188e4ab1f|  eks-cluster-sg-clusternextcloud-815613336                                     |                                                                                                           +----------------------+--------------------------------------------------------------------------------+
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149298
- command: AP_ID=$(aws efs create-access-point --file-system-id $EFS_ID \\                                                                                                                                >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                    >   --root-directory 'Path=/nextcloud' \\                                                                                                                                                                            >   --query 'AccessPointId' --output text)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149389
- command: AP_ID=$(aws efs create-access-point \\                                                                                                                                                         >   --file-system-id $EFS_ID \\                                                                                                                                                                                      >   --region eu-central-1 \\                                                                                                                                                                                         >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                    >   --root-directory 'Path=/nextcloud,CreationInfo={OwnerUid=33,OwnerGid=33,Permissions=\"0770\"}' \\                                                                                                                  >   --query 'AccessPointId' --output text)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149424
- command: AP_ID=$(aws efs create-access-point \\                                                                                                                                                           --file-system-id $EFS_ID \\                                                                                                                                                                                          --region eu-central-1 \\                                                                                                                                                                                             --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                        --root-directory 'Path=/nextcloud,CreationInfo={OwnerUid=33,OwnerGid=33,Permissions=\"0770\"}' \\                                                                                                                      --query 'AccessPointId' --output text)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149428
- command: }                                                                                                                                                                                             bash: syntax error near unexpected token `}'
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149456
- command: ~ $ AP_ID=$(aws efs create-access-point --file-system-id $EFS_ID \\                                                                                                                            > >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                  > >   --root-directory 'Path=/nextcloud' \\                                                                                                                                                                          > >   --query 'AccessPointId' --output text)                                                                                                                                                                                                                                                                                                                                                                                            usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                         To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                            aws help                                                                                                                                                                                                            aws <command> help                                                                                                                                                                                                  aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                       Unknown options: Path=/nextcloud, AccessPointId, Uid=33,Gid=33                                                                                                                                                                                                                                                                                                                                                                          bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149457
- command: ~ $ AP_ID=$(aws efs create-access-point \\                                                                                                                                                     > >   --file-system-id $EFS_ID \\                                                                                                                                                                                    > >   --region eu-central-1 \\                                                                                                                                                                                       > >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                  > >   --root-directory 'Path=/nextcloud,CreationInfo={OwnerUid=33,OwnerGid=33,Permissions=\"0770\"}' \\                                                                                                                > >   --query 'AccessPointId' --output text)                                                                                                                                                                                                                                                                                                                                                                                            usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                         To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                            aws help                                                                                                                                                                                                            aws <command> help                                                                                                                                                                                                  aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                       aws: error: the following arguments are required: --file-system-id                                                                                                                                                                                                                                                                                                                                                                      bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149457
- command: ~ $ AP_ID=$(aws efs create-access-point \\                                                                                                                                                     >   --file-system-id $EFS_ID \\                                                                                                                                                                                      >   --region eu-central-1 \\                                                                                                                                                                                         >   --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                    >   --root-directory 'Path=/nextcloud,CreationInfo={OwnerUid=33,OwnerGid=33,Permissions=\"0770\"}' \\                                                                                                                  >   --query 'AccessPointId' --output text)                                                                                                                                                                          bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149458
- command: ~ $ AP_ID=$(aws efs create-access-point \\                                                                                                                                                                         --file-system-id $EFS_ID \\                                                                                                                                                                                          --region eu-central-1 \\                                                                                                                                                                                             --posix-user Uid=33,Gid=33 \\                                                                                                                                                                                        --root-directory 'Path=/nextcloud,CreationInfo={OwnerUid=33,OwnerGid=33,Permissions=\"0770\"}' \\                                                                                                                      --query 'AccessPointId' --output text)                                                                                                                                                                            bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149470
- command: aws efs describe-access-points \\                                                                                                                                                              >   --file-system-id $EFS_ID \\                                                                                                                                                                                      >   --region eu-central-1 \\                                                                                                                                                                                         >   --query \"AccessPoints[*].{ID:AccessPointId,Path:RootDirectory.Path}\" \\                                                                                                                                          >   --output table                                                                                                                                                                                                  ------------------------------------------                                                                                                                                                                          |          DescribeAccessPoints          |                                                                                                                                                                          +-------------------------+--------------+                                                                                                                                                                          |           ID            |    Path      |                                                                                                                                                                          +-------------------------+--------------+                                                                                                                                                                          |  fsap-0608ebb8b36f9b5ed |  /nextcloud  |                                                                                                                                                                          |  fsap-01a655c7336f541c0 |  /nextcloud  |                                                                                                                                                                          |  fsap-0c50d1486cfcc3cc3 |  /nextcloud  |                                                                                                                                                                          |  fsap-0fc09a4179a42120d |  /nextcloud  |                                                                                                                                                                          |  fsap-066960257e8b8f3e4 |  /nextcloud  |                                                                                                                                                                          +-------------------------+--------------+
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149480
- command: cat <<EOF | kubectl apply -f -                                                                                                                                                                > apiVersion: storage.k8s.io/v1                                                                                                                                                                                     > kind: StorageClass                                                                                                                                                                                                > metadata:                                                                                                                                                                                                         >   name: efs-sc                                                                                                                                                                                                    > provisioner: efs.csi.aws.com                                                                                                                                                                                      > parameters:                                                                                                                                                                                                       >   provisioningMode: efs-ap                                                                                                                                                                                        >   fileSystemId: $EFS_ID                                                                                                                                                                                           >   accessPointId: $EFS_AP_ID                                                                                                                                                                                       >   directoryPerms: \"770\"                                                                                                                                                                                           >   uid: \"33\"                                                                                                                                                                                                       >   gid: \"33\"                                                                                                                                                                                                       > reclaimPolicy: Retain                                                                                                                                                                                             > volumeBindingMode: Immediate                                                                                                                                                                                      > EOF                                                                                                                                                                                                               storageclass.storage.k8s.io/efs-sc created
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149544
- command: kubectl get storageclass                                                                                                                                                                      NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                  efs-sc   efs.csi.aws.com         Retain          Immediate              false                  5s                                                                                                                   gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  25m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149549
- command: kubectl get storageclass                                                                                                                                                                      NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                  efs-sc   efs.csi.aws.com         Retain          Immediate              false                  13s                                                                                                                  gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  25m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149557
- command: aws rds create-db-instance \\                                                                                                                                                                  >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                         >   --engine mariadb \\                                                                                                                                                                                              >   --engine-version 10.11 \\                                                                                                                                                                                        >   --db-instance-class db.t3.medium \\                                                                                                                                                                              >   --allocated-storage 20 \\                                                                                                                                                                                        >   --master-username ncadmin \\                                                                                                                                                                                     >   --master-user-password 'AppleTr33S!' \\                                                                                                                                                                          >   --multi-az \\                                                                                                                                                                                                    >   --vpc-security-group-ids sg-052fd37205d5b6e22 \\                                                                                                                                                                 >   --db-subnet-group-name default \\                                                                                                                                                                                >   --backup-retention-period 7 \\                                                                                                                                                                                   >   --region eu-central-1 \\                                                                                                                                                                                         >   --publicly-accessible false \\                                                                                                                                                                                   >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                  usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                         To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                            aws help                                                                                                                                                                                                            aws <command> help                                                                                                                                                                                                  aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                       Unknown options: false
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149688
- command: aws rds create-db-instance   --db-instance-identifier nextcloud-db   --engine mariadb   --engine-version 10.11   --db-instance-class db.t3.medium   --allocated-storage 20   --master-username ncadmin   --master-user-password 'AppleTr33S!'   --multi-az   --vpc-security-group-ids sg-052fd37205d5b6e22   --db-subnet-group-name default   --backup-retention-period 7   --region eu-central-1   --publicly-accessible false   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                      usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                         To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                            aws help                                                                                                                                                                                                            aws <command> help                                                                                                                                                                                                  aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                       Unknown options: false
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149695
- command: aws rds create-db-instance \\                                                                                                                                                                  >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                         >   --engine mariadb \\                                                                                                                                                                                              >   --engine-version 10.11 \\                                                                                                                                                                                        >   --db-instance-class db.t3.medium \\                                                                                                                                                                              >   --allocated-storage 20 \\                                                                                                                                                                                        >   --master-username ncadmin \\                                                                                                                                                                                     >   --master-user-password 'AppleTr33S!' \\                                                                                                                                                                          >   --multi-az \\                                                                                                                                                                                                    >   --vpc-security-group-ids sg-052fd37205d5b6e22 \\                                                                                                                                                                 >   --db-subnet-group-name default \\                                                                                                                                                                                >   --backup-retention-period 7 \\                                                                                                                                                                                   >   --region eu-central-1 \\                                                                                                                                                                                         >   --no-publicly-accessible \\                                                                                                                                                                                      >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                  An error occurred (InvalidParameterCombination) when calling the CreateDBInstance operation: The DB instance and EC2 security group are in different VPCs. The DB instance is in vpc-0cf5b6aecdc5fadcf and the EC2 security group is in vpc-09fdd7346616aec48
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149756
- command: aws rds create-db-subnet-group \\                                                                                                                                                              >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                 >   --db-subnet-group-description \"Private subnets for Nextcloud DB\" \\                                                                                                                                              >   --subnet-ids subnet-0dd51e5442b0d1677 subnet-01e75f94eb78720c3 subnet-0216e10fe9beea7fa \\                                                                                                                       >   --region eu-central-1                                                                                                                                                                                                                                                                                                                                                                                                               An error occurred (DBSubnetGroupAlreadyExists) when calling the CreateDBSubnetGroup operation: The DB subnet group 'nextcloud-subnet-group' already exists.
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149815
- command: aws rds create-db-instance \\                                                                                                                                                                  >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                         >   --engine mariadb \\                                                                                                                                                                                              >   --engine-version 10.11 \\                                                                                                                                                                                        >   --db-instance-class db.t3.medium \\                                                                                                                                                                              >   --allocated-storage 20 \\                                                                                                                                                                                        >   --master-username ncadmin \\                                                                                                                                                                                     >   --master-user-password 'AppleTr33S!' \\                                                                                                                                                                          >   --multi-az \\                                                                                                                                                                                                    >   --vpc-security-group-ids sg-052fd37205d5b6e22 \\                                                                                                                                                                 >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                 >   --backup-retention-period 7 \\                                                                                                                                                                                   >   --region eu-central-1 \\                                                                                                                                                                                         >   --no-publicly-accessible \\                                                                                                                                                                                      >   --tags Key=project,Value=nextcloud                                                                                                                                                                                                                                                                                                                                                                                                  An error occurred (InvalidParameterCombination) when calling the CreateDBInstance operation: The DB instance and EC2 security group are in different VPCs. The DB instance is in vpc-0ed80417b67b8cb00 and the EC2 security group is in vpc-09fdd7346616aec48
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149837
- command: ~ $ aws rds create-db-subnet-group \\                                                                                                                                                          > >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                               > >   --db-subnet-group-description \"Private subnets for Nextcloud DB\" \\                                                                                                                                            > >   --subnet-ids subnet-0dd51e5442b0d1677 subnet-01e75f94eb78720c3 subnet-0216e10fe9beea7fa \\                                                                                                                     > >   --region eu-central-1                                                                                                                                                                                         bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149927
- command: An error occurred (DBSubnetGroupAlreadyExists) when calling the CreateDBSubnetGroup operation: The DB subnet group 'nextcloud-subnet-group' already exists.                                   bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149927
- command: ~ $ aws rds create-db-instance \\                                                                                                                                                              > >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                       > >   --engine mariadb \\                                                                                                                                                                                            > >   --engine-version 10.11 \\                                                                                                                                                                                      > >   --db-instance-class db.t3.medium \\                                                                                                                                                                            > >   --allocated-storage 20 \\                                                                                                                                                                                      > >   --master-username ncadmin \\                                                                                                                                                                                   > >   --master-user-password 'AppleTr33S!' \\                                                                                                                                                                        > >   --multi-az \\                                                                                                                                                                                                  > >   --vpc-security-group-ids sg-052fd37205d5b6e22 \\                                                                                                                                                               > >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                               > >   --backup-retention-period 7 \\                                                                                                                                                                                 > >   --region eu-central-1 \\                                                                                                                                                                                       > >   --no-publicly-accessible \\                                                                                                                                                                                    > >   --tags Key=project,Value=nextcloud                                                                                                                                                                            bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149927
- command: An error occurred (InvalidParameterCombination) when calling the CreateDBInstance operation: The DB instance and EC2 security group are in different VPCs. The DB instance is in vpc-0ed80417b67b8cb00 and the EC2 security group is in vpc-09fdd7346616aec48                                                                                                                                                     bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149927
- command: ~ $ aws rds delete-db-subnet-group \\                                                                                                                                                          >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                 >   --region eu-central-1                                                                                                                                                                                           bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149930
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149932
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149933
- command: aws rds delete-db-subnet-group \\                                                                                                                                                              >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                 >   --region eu-central-1
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149937
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149943
- command: aws rds create-db-subnet-group \\                                                                                                                                                              >   --db-subnet-group-name nextcloud-subnet-group \\                                                                                                                                                                 >   --db-subnet-group-description \"Nextcloud DB subnet group in EKS VPC\" \\                                                                                                                                          >   --subnet-ids subnet-0dd51e5442b0d1677 subnet-01e75f94eb78720c3 subnet-0216e10fe9beea7fa \\                                                                                                                       >   --region eu-central-1                                                                                                                                                                                           {                                                                                                                                                                                                                       \"DBSubnetGroup\": {                                                                                                                                                                                                      \"DBSubnetGroupName\": \"nextcloud-subnet-group\",                                                                                                                                                                      \"DBSubnetGroupDescription\": \"Nextcloud DB subnet group in EKS VPC\",                                                                                                                                                 \"VpcId\": \"vpc-09fdd7346616aec48\",                                                                                                                                                                                   \"SubnetGroupStatus\": \"Complete\",                                                                                                                                                                                    \"Subnets\": [                                                                                                                                                                                                            {                                                                                                                                                                                                                       \"SubnetIdentifier\": \"subnet-01e75f94eb78720c3\",                                                                                                                                                                     \"SubnetAvailabilityZone\": {                                                                                                                                                                                             \"Name\": \"eu-central-1a\"                                                                                                                                                                                         },                                                                                                                                                                                                                  \"SubnetOutpost\": {},                                                                                                                                                                                                \"SubnetStatus\": \"Active\"                                                                                                                                                                                        },                                                                                                                                                                                                                  {                                                                                                                                                                                                                       \"SubnetIdentifier\": \"subnet-0dd51e5442b0d1677\",                                                                                                                                                                     \"SubnetAvailabilityZone\": {                                                                                                                                                                                             \"Name\": \"eu-central-1c\"                                                                                                                                                                                         },                                                                                                                                                                                                                  \"SubnetOutpost\": {},                                                                                                                                                                                                \"SubnetStatus\": \"Active\"                                                                                                                                                                                        },                                                                                                                                                                                                                  {                                                                                                                                                                                                                       \"SubnetIdentifier\": \"subnet-0216e10fe9beea7fa\",                                                                                                                                                                     \"SubnetAvailabilityZone\": {                                                                                                                                                                                             \"Name\": \"eu-central-1b\"                                                                                                                                                                                         },                                                                                                                                                                                                                  \"SubnetOutpost\": {},                                                                                                                                                                                                \"SubnetStatus\": \"Active\"                                                                                                                                                                                        }                                                                                                                                                                                                               ],                                                                                                                                                                                                                  \"DBSubnetGroupArn\": \"arn:aws:rds:eu-central-1:699475950702:subgrp:nextcloud-subnet-group\",                                                                                                                          \"SupportedNetworkTypes\": [                                                                                                                                                                                              \"IPV4\"                                                                                                                                                                                                          ]                                                                                                                                                                                                               }                                                                                                                                                                                                               }
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149948
- command: sg-052fd37205d5b6e22 → in VPC vpc-09fdd7346616aec48 ✅                                                                                                                                        bash: sg-052fd37205d5b6e22: command not found
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149958
- command: aws rds describe-db-instances \\                                                                                                                                                               >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                         >   --query \"DBInstances[0].Endpoint.Address\" \\                                                                                                                                                                     >   --output text                                                                                                                                                                                                   None
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747149983
- command: aws rds describe-db-instances \\                                                                                                                                                               >   --db-instance-identifier nextcloud-db \\                                                                                                                                                                         >   --query \"DBInstances[0].DBInstanceStatus\" \\                                                                                                                                                                     >   --output text                                                                                                                                                                                                   creating
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150011
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                             modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150174
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                             modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150250
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                             modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150279
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                             modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150384
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                             modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150410
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                                                                                                                                                                                                                                                 Error when retrieving credentials from container-role: Error retrieving metadata: Received non 200 response 500 from container metadata: <?xml version=\"1.0\" encoding=\"iso-8859-1\"?>                                <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"                                                                                                                                                      \t       \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">                                                                                                                                                  <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">                                                                                                                                                  <head>                                                                                                                                                                                                               <title>500 - Internal Server Error</title>                                                                                                                                                                         </head>                                                                                                                                                                                                             <body>                                                                                                                                                                                                               <h1>500 - Internal Server Error</h1>                                                                                                                                                                               </body>                                                                                                                                                                                                            </html>
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150511
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                                          modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150588
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        modifying
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150617
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150624
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150633
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150639
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150645
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150658
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150662
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150673
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150690
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150692
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150709
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150714
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        backing-up
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150791
- command: aws rds describe-db-instances   --db-instance-identifier nextcloud-db   --query \"DBInstances[0].DBInstanceStatus\"   --output text                                        available
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150890
- command: aws rds describe-db-instances \\                                                                                                                                          >   --db-instance-identifier nextcloud-db \\                                                                                                                                                    >   --query \"DBInstances[0].Endpoint.Address\" \\                                                                                                                                                >   --output text                                                                                                                                                                              nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150902
- command: nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150962
- command: ^C
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150963
- command: aws ec2 describe-security-groups \\                                                                                                                                       >   --group-ids sg-052fd37205d5b6e22 \\                                                                                                                                                         >   --query \"SecurityGroups[0].IpPermissions\"                                                                                                                                                  [                                                                                                                                                                                                  {                                                                                                                                                                                                  \"IpProtocol\": \"-1\",                                                                                                                                                                            \"UserIdGroupPairs\": [                                                                                                                                                                              {                                                                                                                                                                                                  \"Description\": \"Allow nodes to communicate with each other (all ports)\",                                                                                                                       \"UserId\": \"699475950702\",                                                                                                                                                                      \"GroupId\": \"sg-052fd37205d5b6e22\"                                                                                                                                                          },                                                                                                                                                                                             {                                                                                                                                                                                                  \"Description\": \"Allow managed and unmanaged nodes to communicate with each other (all ports)\",                                                                                                 \"UserId\": \"699475950702\",                                                                                                                                                                      \"GroupId\": \"sg-017f0979188e4ab1f\"                                                                                                                                                          }                                                                                                                                                                                          ],                                                                                                                                                                                             \"IpRanges\": [],                                                                                                                                                                                \"Ipv6Ranges\": [],                                                                                                                                                                              \"PrefixListIds\": []                                                                                                                                                                        }                                                                                                                                                                                          ]
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150966
- command: kubectl get storageclass efs-sc                                                                                                                                          NAME     PROVISIONER       RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE                                                                                                      efs-sc   efs.csi.aws.com   Retain          Immediate           false                  24m
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747150995
- command: helm repo add nextcloud https://nextcloud.github.io/helm/                                                                                                                \"nextcloud\" already exists with the same configuration, skipping
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151040
- command: helm repo update                                                                                                                                                         Hang tight while we grab the latest from your chart repositories...                                                                                                                            ...Successfully got an update from the \"ingress-nginx\" chart repository                                                                                                                        ...Successfully got an update from the \"nextcloud\" chart repository                                                                                                                            ...Successfully got an update from the \"nextcloud-aio\" chart repository                                                                                                                        Update Complete. ⎈Happy Helming!⎈
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151048
- command: helm upgrade --install my-release nextcloud/nextcloud \\                                                                                                                  >   --set nextcloud.password=\"changeme\" \\                                                                                                                                                      >   --set nextcloud.host=cloud.your-domain.tld \\                                                                                                                                               >   --set mariadb.enabled=false \\                                                                                                                                                              >   --set externalDatabase.user=ncadmin \\                                                                                                                                                      >   --set externalDatabase.password='AppleTr33S!' \\                                                                                                                                            >   --set externalDatabase.database=nextcloud \\                                                                                                                                                >   --set externalDatabase.host=nextcloud-db.c1ca28swy7jc.eu-central-1.rds.amazonaws.com \\                                                                                                     >   --set persistence.enabled=true \\                                                                                                                                                           >   --set persistence.storageClass=efs-sc \\                                                                                                                                                    >   --set persistence.accessMode=ReadWriteMany \\                                                                                                                                               >   --set persistence.size=20Gi                                                                                                                                                                Release \"my-release\" does not exist. Installing it now.                                                                                                                                        NAME: my-release                                                                                                                                                                               LAST DEPLOYED: Tue May 13 15:44:20 2025                                                                                                                                                        NAMESPACE: default                                                                                                                                                                             STATUS: deployed                                                                                                                                                                               REVISION: 1                                                                                                                                                                                    TEST SUITE: None                                                                                                                                                                               NOTES:                                                                                                                                                                                         1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                            export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                          echo http://127.0.0.1:8080/                                                                                                                                                                    kubectl port-forward --namespace default $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                  2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                             echo User:     admin                                                                                                                                                                           echo Password: $(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151060
- command: kubectl get pods                                                                                                                                                         NAME                                    READY   STATUS    RESTARTS     AGE                                                                                                                     my-release-nextcloud-655cdc86d6-cshgn   0/1     Running   1 (6s ago)   104s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151164
- command: kubectl logs -l app.kubernetes.io/instance=my-release --follow                                                                                                                                                                                                                                                                                                          Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151229
- command: NAME                                    READY   STATUS    RESTARTS      AGE                                                                                                                    my-release-nextcloud-655cdc86d6-cshgn   0/1     Running   2 (38s ago)   3m26s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151266
- command: kubectl logs -l app.kubernetes.io/instance=my-release --follow                                                                                                           Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151299
- command: NAME                                    READY   STATUS             RESTARTS      AGE                                                                                                           my-release-nextcloud-655cdc86d6-cshgn   0/1     CrashLoopBackOff   5 (17s ago)   7m45s
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151525
- command: kubectl logs -l app.kubernetes.io/instance=my-release --follow                                                                                                           Initializing nextcloud 30.0.10.1 ...
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151528
- command: ls                                                                                                                                                                       --allocated-storage        --db-instance-class            --engine           --master-user-password    --query            --subnet-id   values.yaml                                            --approve                  --db-instance-identifier       --engine-version   --multi-az                --region           --subnet-ids  --vpc-security-group-ids                               --backup-retention-period  --db-subnet-group-description  --file-system-id   --no-publicly-accessible  --root-directory   --tags                                                               --cluster                  --db-subnet-group-name         --master-username  --posix-user              --security-groups  test
  exit_code: 0
  shell: bash
  session_id: 2f094f460e7b4ebcbc19890523a3a365
  cwd: /home/cloudshell-user
  time: 1747151682
- command: kubectl get nodes -o wide                                                                                                                                                                                                                                                                                                                                   NAME                                              STATUS   ROLES    AGE   VERSION               INTERNAL-IP      EXTERNAL-IP     OS-IMAGE         KERNEL-VERSION                  CONTAINER-RUNTIME                                                                                                                                                             ip-192-168-11-198.eu-central-1.compute.internal   Ready    <none>   15h   v1.32.3-eks-473151a   192.168.11.198   63.177.74.65    Amazon Linux 2   5.10.236-227.928.amzn2.x86_64   containerd://1.7.27                                                                                                                                                           ip-192-168-35-177.eu-central-1.compute.internal   Ready    <none>   15h   v1.32.3-eks-473151a   192.168.35.177   18.193.130.61   Amazon Linux 2   5.10.236-227.928.amzn2.x86_64   containerd://1.7.27
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204115
- command: eksctl version                                                                                                                                                                                         bash: eksctl: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204456
- command: eksctl version                                                                                                                                                                                         bash: eksctl: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204457
- command: aws ssm get-parameter \\                                                                                                                                                                                >   --name /aws/service/canonical/ubuntu/eks/22.04/amd64/latest/ami-id \\                                                                                                                                                     >   --region <your-region>                                                                                                                                                                                                   bash: syntax error near unexpected token `newline'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204509
- command: aws ssm get-parameter \\                                                                                                                                                                                >   --name /aws/service/canonical/ubuntu/eks/22.04/amd64/latest/ami-id \\                                                                                                                                                     >   --region eu-central-a                                                                                                                                                                                                                                                                                                                                                                                                                                 Could not connect to the endpoint URL: \"https://ssm.eu-central-a.amazonaws.com/\"
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204529
- command: aws ssm get-parameter   --name /aws/service/canonical/ubuntu/eks/22.04/amd64/latest/ami-id   --region eu-central-1                                                                                                                                                                                                                                                                                                                  An error occurred (ParameterNotFound) when calling the GetParameter operation:
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204538
- command: aws eks describe-cluster                                                                                                                                                                                                                                                                                                                                                                                                            usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                                  To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                                              aws help                                                                                                                                                                                                                     aws <command> help                                                                                                                                                                                                           aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                                         aws: error: the following arguments are required: --name
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204628
- command: aws eks describe-cluster -- nextcloudcluster                                                                                                                                                                                                                                                                                                                                                                                        usage: aws [options] <command> <subcommand> [<subcommand> ...] [parameters]                                                                                                                                                  To see help text, you can run:                                                                                                                                                                                                                                                                                                                                                                                                                              aws help                                                                                                                                                                                                                     aws <command> help                                                                                                                                                                                                           aws <command> <subcommand> help                                                                                                                                                                                                                                                                                                                                                                                                                         aws: error: the following arguments are required: --name
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204642
- command: aws eks describe-cluster --name nextcloudcluster                                                                                                                                                                                                                                                                                                                                                                                    An error occurred (ResourceNotFoundException) when calling the DescribeCluster operation: No cluster found for name: nextcloudcluster.
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204649
- command: aws ssm get-parameter   --name /aws/service/canonical/ubuntu/eks/22.04/amd64/latest/ami-id   --region eu-central-1                                                                                                                                                                                                                                                                                                                                      An error occurred (ParameterNotFound) when calling the GetParameter operation:
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204695
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204819
- command: aws ec2 create-key-pair \\                                                                                                                                                                                                                                                           >   --key-name my-eks-key \\                                                                                                                                                                                                                                                             >   --query 'KeyMaterial' \\                                                                                                                                                                                                                                                             >   --output text > my-eks-key.pem
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204821
- command: chmod 400 my-eks-key.pem
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204826
- command: eksctl create nodegroup \\                                                                                                                                                                                                                                         >   --cluster nextcloudcluster \\                                                                                                                                                                                                                                                        >   --region eu-central-1 \\                                                                                                                                                                                                                                                             >   --name ubuntu-22-nodegroup \\                                                                                                                                                                                                                                                        >   --node-type t3.medium \\                                                                                                                                                                                                                                                             >   --nodes 2 \\                                                                                                                                                                                                                                                                         >   --nodes-min 1 \\                                                                                                                                                                                                                                                                     >   --nodes-max 4 \\                                                                                                                                                                                                                                                                     >   --ssh-access \\                                                                                                                                                                                                                                                                      >   --ssh-public-key managedUbuntuEKSNodes \\                                                                                                                                                                                                                                            >   --node-ami ami-0300aff79d2f55b60 \\                                                                                                                                                                                                                                                  >   --node-labels os=ubuntu \\                                                                                                                                                                                                                                                           >   --kubelet-extra-args \"--node-labels=os=ubuntu\" \\                                                                                                                                                                                                                                    >   --node-volume-size 20 \\                                                                                                                                                                                                                                                             >   --managed                                                                                                                                                                                                                                                                           bash: eksctl: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204929
- command: curl --silent --location \"https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_Linux_amd64.tar.gz\" | tar xz -C /tmp
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204970
- command: udo mv /tmp/eksctl /usr/local/bin                                                                                                                                                                                                                                 bash: udo: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204972
- command: sudo mv /tmp/eksctl /usr/local/bin
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204977
- command: eksctl version                                                                                                                                                                                                                                                    0.208.0
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204981
- command: curl --silent --location \"https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_Linux_amd64.tar.gz\" | tar xz -C /tmp
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204989
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204996
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204996
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204996
- command: eksctl create nodegroup \\                                                                                                                                                                                                                                         >   --cluster nextcloudcluster \\                                                                                                                                                                                                                                                        >   --region eu-central-1 \\                                                                                                                                                                                                                                                             >   --name ubuntu-22-nodegroup \\                                                                                                                                                                                                                                                        >   --node-type t3.medium \\                                                                                                                                                                                                                                                             >   --nodes 2 \\                                                                                                                                                                                                                                                                         >   --nodes-min 1 \\                                                                                                                                                                                                                                                                     >   --nodes-max 4 \\                                                                                                                                                                                                                                                                     >   --ssh-access \\                                                                                                                                                                                                                                                                      >   --ssh-public-key managedUbuntuEKSNodes \\                                                                                                                                                                                                                                            >   --node-ami ami-0300aff79d2f55b60 \\                                                                                                                                                                                                                                                  >   --node-labels os=ubuntu \\                                                                                                                                                                                                                                                           >   --kubelet-extra-args \"--node-labels=os=ubuntu\" \\                                                                                                                                                                                                                                    >   --node-volume-size 20 \\                                                                                                                                                                                                                                                             >   --managed                                                                                                                                                                                                                                                                           Error: unknown flag: --kubelet-extra-args
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747204997
- command: eksctl create nodegroup \\                                                                                                                                                                                                                                         >   --cluster nextcloudcluster \\                                                                                                                                                                                                                                                        >   --region eu-central-1 \\                                                                                                                                                                                                                                                             >   --name ubuntu-22-nodegroup \\                                                                                                                                                                                                                                                        >   --node-type t3.medium \\                                                                                                                                                                                                                                                             >   --nodes 2 \\                                                                                                                                                                                                                                                                         >   --nodes-min 1 \\                                                                                                                                                                                                                                                                     >   --nodes-max 4 \\                                                                                                                                                                                                                                                                     >   --ssh-access \\                                                                                                                                                                                                                                                                      >   --ssh-public-key managedUbuntuEKSNodes \\                                                                                                                                                                                                                                            >   --node-ami ami-0300aff79d2f55b60 \\                                                                                                                                                                                                                                                  >   --node-labels os=ubuntu \\                                                                                                                                                                                                                                                           >   --kubelet-extra-args \"--node-labels=os=ubuntu\" \\                                                                                                                                                                                                                                    >   --node-volume-size 20 \\                                                                                                                                                                                                                                                             >   --managed                                                                                                                                                                                                                                                                           Error: unknown flag: --kubelet-extra-args
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205008
- command: eksctl create nodegroup \\                                                                                                                                                                                                                                         >   --cluster nextcloudcluster \\                                                                                                                                                                                                                                                        >   --region eu-central-1 \\                                                                                                                                                                                                                                                             >   --name ubuntu-22-nodegroup \\                                                                                                                                                                                                                                                        >   --node-type t3.medium \\                                                                                                                                                                                                                                                             >   --nodes 2 \\                                                                                                                                                                                                                                                                         >   --nodes-min 1 \\                                                                                                                                                                                                                                                                     >   --nodes-max 4 \\                                                                                                                                                                                                                                                                     >   --ssh-access \\                                                                                                                                                                                                                                                                      >   --ssh-public-key managedUbuntuEKSNodes \\                                                                                                                                                                                                                                            >   --node-ami ami-0300aff79d2f55b60 \\                                                                                                                                                                                                                                                  >   --node-labels os=ubuntu \\                                                                                                                                                                                                                                                           >   --node-volume-size 20 \\                                                                                                                                                                                                                                                             >   --managed                                                                                                                                                                                                                                                                           2025-05-14 06:44:03 [!]  Amazon EKS will no longer publish EKS-optimized Amazon Linux 2 (AL2) AMIs after November 26th, 2025. Additionally, Kubernetes version 1.32 is the last version for which Amazon EKS will release AL2 AMIs. From version 1.33 onwards, Amazon EKS will continue to release AL2023 and Bottlerocket based AMIs. The default AMI family when creating clusters and nodegroups in Eksctl will be changed to AL2023 in the future.                                                                                                                          Error: could not create cluster provider from options: unable to describe cluster control plane: operation error EKS: DescribeCluster, https response error StatusCode: 404, RequestID: c4d314f0-c913-4633-a58c-d7ec302775c2, ResourceNotFoundException: No cluster found for name: nextcloudcluster.
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205043
- command: eksctl create nodegroup \\                                                                                                                                                                                                                                         >   --cluster clusternextcloud \\                                                                                                                                                                                                                                                        >   --region eu-central-1 \\                                                                                                                                                                                                                                                             >   --name ubuntu-22-nodegroup \\                                                                                                                                                                                                                                                        >   --node-type t3.medium \\                                                                                                                                                                                                                                                             >   --nodes 2 \\                                                                                                                                                                                                                                                                         >   --nodes-min 1 \\                                                                                                                                                                                                                                                                     >   --nodes-max 4 \\                                                                                                                                                                                                                                                                     >   --ssh-access \\                                                                                                                                                                                                                                                                      >   --ssh-public-key managedUbuntuEKSNodes \\                                                                                                                                                                                                                                            >   --node-ami ami-0300aff79d2f55b60 \\                                                                                                                                                                                                                                                  >   --node-labels os=ubuntu \\                                                                                                                                                                                                                                                           >   --node-volume-size 20 \\                                                                                                                                                                                                                                                             >   --managed                                                                                                                                                                                                                                                                           2025-05-14 06:44:47 [!]  Amazon EKS will no longer publish EKS-optimized Amazon Linux 2 (AL2) AMIs after November 26th, 2025. Additionally, Kubernetes version 1.32 is the last version for which Amazon EKS will release AL2 AMIs. From version 1.33 onwards, Amazon EKS will continue to release AL2023 and Bottlerocket based AMIs. The default AMI family when creating clusters and nodegroups in Eksctl will be changed to AL2023 in the future.                                                                                                                          2025-05-14 06:44:47 [ℹ]  will use version 1.32 for new nodegroup(s) based on control plane version                                                                                                                                                                                      Error: could not create cluster provider from options: managedNodeGroups[0].overrideBootstrapCommand is required when using a custom AMI based on AmazonLinux2 (managedNodeGroups[0].ami)
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205087
- command: nano values.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205335
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205336
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205336
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205337
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205337
- command: helm upgrade my-release nextcloud/nextcloud -f values.yaml                                                                                                                                                                                                        bash: helm: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205537
- command: curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash                                                                                                                                                                                     % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current                                                                                                                                                                                                                                          Dload  Upload   Total   Spent    Left  Speed                                                                                                                                                                                                           100 11913  100 11913    0     0   394k      0 --:--:-- --:--:-- --:--:--  401k                                                                                                                                                                                                          Downloading https://get.helm.sh/helm-v3.17.3-linux-amd64.tar.gz                                                                                                                                                                                                                         Verifying checksum... Done.                                                                                                                                                                                                                                                             Preparing to install helm into /usr/local/bin                                                                                                                                                                                                                                           helm installed into /usr/local/bin/helm
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205577
- command: curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash                                                                                                                                                                                     % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current                                                                                                                                                                                                                                          Dload  Upload   Total   Spent    Left  Speed                                                                                                                                                                                                           100 11913  100 11913    0     0   424k      0 --:--:-- --:--:-- --:--:--  430k                                                                                                                                                                                                          Helm v3.17.3 is already latest
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205581
- command: helm upgrade my-release nextcloud/nextcloud -f values.yaml                                                                                                                                                                                                        Error: failed to parse values.yaml: error converting YAML to JSON: yaml: line 650: did not find expected key
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205589
- command: lease nextcloud/nextcloud -fll-user@:~~ $ nano values.yaml                                                                                                                                                                                                        Error: UPGRADE FAILED: cannot patch \"my-release-nextcloud\" with kind Deployment: Deployment.apps \"my-release-nextcloud\" is invalid: spec.template.spec.containers[0].resources.requests: Invalid value: \"2500m\": must be less than or equal to cpu limit of 500m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205737
- command: lease nextcloud/nextcloud -fll-user@:~~ $ nano values.yaml                                                                                                                                                                                                        Release \"my-release\" has been upgraded. Happy Helming!                                                                                                                                                                                                                                  NAME: my-release                                                                                                                                                                                                                                                                        LAST DEPLOYED: Wed May 14 06:56:39 2025                                                                                                                                                                                                                                                 NAMESPACE: default                                                                                                                                                                                                                                                                      STATUS: deployed                                                                                                                                                                                                                                                                        REVISION: 3                                                                                                                                                                                                                                                                             TEST SUITE: None                                                                                                                                                                                                                                                                        NOTES:                                                                                                                                                                                                                                                                                  #######################################################################################################                                                                                                                                                                                 ## WARNING: You did not provide an external database host in your 'helm install' call                ##                                                                                                                                                                                 ## Running Nextcloud with the integrated sqlite database is not recommended for production instances ##                                                                                                                                                                                 #######################################################################################################                                                                                                                                                                                                                                                                                                                                                                                                                                                                         For better performance etc. you have to configure nextcloud with a resolvable database                                                                                                                                                                                                  host. To configure nextcloud to use and external database host:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         1. Complete your nextcloud deployment by running:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 export APP_HOST=127.0.0.1                                                                                                                                                                                                                                                               export APP_PASSWORD=$(kubectl get secret --namespace default my-release-nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)                                                                                                                                                                                                                                                                                                                                                                                                                                   ## PLEASE UPDATE THE EXTERNAL DATABASE CONNECTION PARAMETERS IN THE FOLLOWING COMMAND AS NEEDED ##                                                                                                                                                                                                                                                                                                                                                                                                                                                                              helm upgrade my-release nextcloud/nextcloud \\                                                                                                                                                                                                                                             --set nextcloud.password=$APP_PASSWORD,nextcloud.host=$APP_HOST,service.type=ClusterIP,mariadb.enabled=false,externalDatabase.user=nextcloud,externalDatabase.database=nextcloud,externalDatabase.host=YOUR_EXTERNAL_DATABASE_HOST
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747205799
- command: for module in ctype curl dom fileinfo filter gd hash json libxml mbstring openssl posix session simplexml xmlreader xmlwriter zip zlib; do                                                                                                                        >   if php -m | grep -qi \"$module\"; then                                                                                                                                                                                                                                                >     echo \"✅ $module found\"                                                                                                                                                                                                                                                           >   else                                                                                                                                                                                                                                                                                >     echo \"❌ $module missing\"                                                                                                                                                                                                                                                         >   fi                                                                                                                                                                                                                                                                                  > done                                                                                                                                                                                                                                                                                  bash: php: command not found                                                                                                                                                                                                                                                            ❌ ctype missing                                                                                                                                                                                                                                                                        bash: php: command not found                                                                                                                                                                                                                                                            ❌ curl missing                                                                                                                                                                                                                                                                         bash: php: command not found                                                                                                                                                                                                                                                            ❌ dom missing                                                                                                                                                                                                                                                                          bash: php: command not found                                                                                                                                                                                                                                                            ❌ fileinfo missing                                                                                                                                                                                                                                                                     bash: php: command not found                                                                                                                                                                                                                                                            ❌ filter missing                                                                                                                                                                                                                                                                       bash: php: command not found                                                                                                                                                                                                                                                            ❌ gd missing                                                                                                                                                                                                                                                                           bash: php: command not found                                                                                                                                                                                                                                                            ❌ hash missing                                                                                                                                                                                                                                                                         bash: php: command not found                                                                                                                                                                                                                                                            ❌ json missing                                                                                                                                                                                                                                                                         bash: php: command not found                                                                                                                                                                                                                                                            ❌ libxml missing                                                                                                                                                                                                                                                                       bash: php: command not found                                                                                                                                                                                                                                                            ❌ mbstring missing                                                                                                                                                                                                                                                                     bash: php: command not found                                                                                                                                                                                                                                                            ❌ openssl missing                                                                                                                                                                                                                                                                      bash: php: command not found                                                                                                                                                                                                                                                            ❌ posix missing                                                                                                                                                                                                                                                                        bash: php: command not found                                                                                                                                                                                                                                                            ❌ session missing                                                                                                                                                                                                                                                                      bash: php: command not found                                                                                                                                                                                                                                                            ❌ simplexml missing                                                                                                                                                                                                                                                                    bash: php: command not found                                                                                                                                                                                                                                                            ❌ xmlreader missing                                                                                                                                                                                                                                                                    bash: php: command not found                                                                                                                                                                                                                                                            ❌ xmlwriter missing                                                                                                                                                                                                                                                                    bash: php: command not found                                                                                                                                                                                                                                                            ❌ zip missing                                                                                                                                                                                                                                                                          bash: php: command not found                                                                                                                                                                                                                                                            ❌ zlib missing
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206205
- command: sudo apt install php-kubectl get pods -l app.kubernetes.io/name=nextcloud                                                                                                                                                                                         sudo: apt: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206323
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206324
- command: kubectl get pods -l app.kubernetes.io/name=nextcloud                                                                                                                                                                                                              NAME                                    READY   STATUS                       RESTARTS      AGE                                                                                                                                                                                          my-release-nextcloud-55cf8b56fc-hqwpt   0/2     CreateContainerConfigError   7 (45s ago)   8m45s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206326
- command: kubectl exec -it my-release-nextcloud-55cf8b56fc-hqwpt -- /bin/bash                                                                                                                                                                                               Defaulted container \"nextcloud\" out of: nextcloud, nextcloud-nginx                                                                                                                                                                                                                      error: Internal error occurred: unable to upgrade connection: container not found (\"nextcloud\")
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206375
- command: kubectl exec -it my-release-nextcloud-55cf8b56fc-hqwpt -- /bin/bash                                                                                                                                                                                               Defaulted container \"nextcloud\" out of: nextcloud, nextcloud-nginx                                                                                                                                                                                                                      error: Internal error occurred: unable to upgrade connection: container not found (\"nextcloud\")
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206405
- command: helm repo add nextcloud https://nextcloud.github.io/helm/                                                                                                                                                                                                         \"nextcloud\" already exists with the same configuration, skipping
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206840
- command: helm install nextcloud nextcloud/nextcloud \\                                                                                                                                                                                                                      >   --namespace nextcloud \\                                                                                                                                                                                                                                                             >   --create-namespace \\                                                                                                                                                                                                                                                                >   --set nextcloud.host=nextcloud.yourdomain.com \\                                                                                                                                                                                                                                     >   --set nextcloud.username=admin \\                                                                                                                                                                                                                                                    >   --set nextcloud.password=your-secure-password \\                                                                                                                                                                                                                                     >   --set mariadb.enabled=true \\                                                                                                                                                                                                                                                        >   --set ingress.enabled=true \\                                                                                                                                                                                                                                                        >   --set ingress.className=nginx \\                                                                                                                                                                                                                                                     >   --set ingress.tls[0].hosts[0]=nextcloud.yourdomain.com \\                                                                                                                                                                                                                            >   --set ingress.tls[0].secretName=nextcloud-tls                                                                                                                                                                                                                                       NAME: nextcloud                                                                                                                                                                                                                                                                         LAST DEPLOYED: Wed May 14 07:14:11 2025                                                                                                                                                                                                                                                 NAMESPACE: nextcloud                                                                                                                                                                                                                                                                    STATUS: deployed                                                                                                                                                                                                                                                                        REVISION: 1                                                                                                                                                                                                                                                                             TEST SUITE: None                                                                                                                                                                                                                                                                        NOTES:                                                                                                                                                                                                                                                                                  1. Get the nextcloud URL by running:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              export POD_NAME=$(kubectl get pods --namespace nextcloud -l \"app.kubernetes.io/name=nextcloud\" -o jsonpath=\"{.items[0].metadata.name}\")                                                                                                                                                 echo http://127.0.0.1:8080/                                                                                                                                                                                                                                                             kubectl port-forward --namespace nextcloud $POD_NAME 8080:80                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  2. Get your nextcloud login credentials by running:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               echo User:     admin                                                                                                                                                                                                                                                                    echo Password: $(kubectl get secret --namespace nextcloud nextcloud -o jsonpath=\"{.data.nextcloud-password}\" | base64 --decode)
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206852
- command: nano nextcloud-cert.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206888
- command: kubectl apply -f nextcloud-cert.yaml                                                                                                                                                                                                                              error: resource mapping not found for name: \"nextcloud-cert\" namespace: \"nextcloud\" from \"nextcloud-cert.yaml\": no matches for kind \"Certificate\" in version \"cert-manager.io/v1\"                                                                                                       ensure CRDs are installed first
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206893
- command: nano namespace.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206953
- command: kubectl apply -f namespace.yaml                                                                                                                                                                                                                                   Warning: resource namespaces/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                       namespace/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206957
- command: ls                                                                                                                                                                                                                                                                 --allocated-storage         --cluster                  --db-subnet-group-description   --engine           --master-username        my-eks-key.pem        --no-publicly-accessible   --region            --subnet-id    test                                                             --approve                   --db-instance-class        --db-subnet-group-name          --engine-version   --master-user-password   namespace.yaml        --posix-user               --root-directory    --subnet-ids   values.yaml                                                      --backup-retention-period   --db-instance-identifier  'ec2 create-key-pair \\'          --file-system-id   --multi-az               nextcloud-cert.yaml   --query                    --security-groups   --tags         --vpc-security-group-ids
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747206975
- command: ls | grep -E '^--|^\\'ec2 create-key-pair|\\.yaml$|^test$|^values.yaml$'                                                                                                                                                                                            >                                                                                                                                                                                                                                                                                       > ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207022
- command: rm -v -- --* 'ec2 create-key-pair \\' values.yaml test                                                                                                                                                                                                             removed '--allocated-storage'                                                                                                                                                                                                                                                           removed '--approve'                                                                                                                                                                                                                                                                     removed '--backup-retention-period'                                                                                                                                                                                                                                                     removed '--cluster'                                                                                                                                                                                                                                                                     removed '--db-instance-class'                                                                                                                                                                                                                                                           removed '--db-instance-identifier'                                                                                                                                                                                                                                                      removed '--db-subnet-group-description'                                                                                                                                                                                                                                                 removed '--db-subnet-group-name'                                                                                                                                                                                                                                                        removed '--engine'                                                                                                                                                                                                                                                                      removed '--engine-version'                                                                                                                                                                                                                                                              removed '--file-system-id'                                                                                                                                                                                                                                                              removed '--master-username'                                                                                                                                                                                                                                                             removed '--master-user-password'                                                                                                                                                                                                                                                        removed '--multi-az'                                                                                                                                                                                                                                                                    removed '--no-publicly-accessible'                                                                                                                                                                                                                                                      removed '--posix-user'                                                                                                                                                                                                                                                                  removed '--query'                                                                                                                                                                                                                                                                       removed '--region'                                                                                                                                                                                                                                                                      removed '--root-directory'                                                                                                                                                                                                                                                              removed '--security-groups'                                                                                                                                                                                                                                                             removed '--subnet-id'                                                                                                                                                                                                                                                                   removed '--subnet-ids'                                                                                                                                                                                                                                                                  removed '--tags'                                                                                                                                                                                                                                                                        removed '--vpc-security-group-ids'                                                                                                                                                                                                                                                      removed 'ec2 create-key-pair \\'                                                                                                                                                                                                                                                         removed 'values.yaml'                                                                                                                                                                                                                                                                   rm: cannot remove 'test': Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207023
- command: ls -l                                                                                                                                                                                                                                                             total 16                                                                                                                                                                                                                                                                                -r--------. 1 cloudshell-user cloudshell-user 1679 May 14 06:40 my-eks-key.pem                                                                                                                                                                                                          -rw-r--r--. 1 cloudshell-user cloudshell-user   60 May 14 07:15 namespace.yaml                                                                                                                                                                                                          -rw-r--r--. 1 cloudshell-user cloudshell-user  308 May 14 07:14 nextcloud-cert.yaml                                                                                                                                                                                                     drwxr-xr-x. 2 cloudshell-user cloudshell-user 4096 May 13 13:55 test
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207030
- command: rm test                                                                                                                                                                                                                                                           rm: cannot remove 'test': Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207037
- command: rmdir test
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207044
- command: ls                                                                                                                                                                                                                                                                my-eks-key.pem  namespace.yaml  nextcloud-cert.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207046
- command: rm my-eks-key.pem                                                                                                                                                                                                                                                 rm: remove write-protected regular file 'my-eks-key.pem'? y
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207076
- command: ls                                                                                                                                                                                                                                                                namespace.yaml  nextcloud-cert.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207078
- command: rm nextcloud-cert.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207091
- command: ls                                                                                                                                                                                                                                                                namespace.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207093
- command: nano namespace.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207102
- command: kubectl apply -f namespace.yaml                                                                                                                                                                                                                                   namespace/nextcloud unchanged
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207105
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207177
- command: kubectl apply pvc.yaml                                                                                                                                                                                                                                            error: Unexpected args: [pvc.yaml]                                                                                                                                                                                                                                                      See 'kubectl apply -h' for help and examples
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207184
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                         persistentvolumeclaim/nextcloud-data created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207194
- command: deployment.yaml                                                                                                                                                                                                                                                   bash: deployment.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207204
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207214
- command: kubectl apply -f deployment.yaml                                                                                                                                                                                                                                  Warning: resource deployments/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                      The Deployment \"nextcloud\" is invalid: spec.selector: Invalid value: v1.LabelSelector{MatchLabels:map[string]string{\"app\":\"nextcloud\", \"app.kubernetes.io/component\":\"app\", \"app.kubernetes.io/instance\":\"nextcloud\", \"app.kubernetes.io/name\":\"nextcloud\"}, MatchExpressions:[]v1.LabelSelectorRequirement(nil)}: field is immutable
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207231
- command: kubectl delete deployment nextcloud -n nextcloud                                                                                                                                                                                                                  deployment.apps \"nextcloud\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207300
- command: kubectl apply -f deployment.yaml                                                                                                                                                                                                                                  deployment.apps/nextcloud created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207301
- command: nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207331
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207500
- command: kubectl apply -f ingress.yaml                                                                                                                                                                                                                                     Warning: resource ingresses/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                        ingress.networking.k8s.io/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207507
- command: kubectl get ingress -n nextcloud                                                                                                                                                                                                                                  NAME        CLASS   HOSTS                ADDRESS   PORTS     AGE                                                                                                                                                                                                                        nextcloud   nginx   ewe-netz-backup.de             80, 443   11m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207544
- command: kubectl get pods -A | grep ingress
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207584
- command: kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.10.1/deploy/static/provider/aws/deploy.yaml                                                                                                                             namespace/ingress-nginx created                                                                                                                                                                                                                                                         serviceaccount/ingress-nginx created                                                                                                                                                                                                                                                    serviceaccount/ingress-nginx-admission created                                                                                                                                                                                                                                          role.rbac.authorization.k8s.io/ingress-nginx created                                                                                                                                                                                                                                    role.rbac.authorization.k8s.io/ingress-nginx-admission created                                                                                                                                                                                                                          clusterrole.rbac.authorization.k8s.io/ingress-nginx created                                                                                                                                                                                                                             clusterrole.rbac.authorization.k8s.io/ingress-nginx-admission created                                                                                                                                                                                                                   rolebinding.rbac.authorization.k8s.io/ingress-nginx created                                                                                                                                                                                                                             rolebinding.rbac.authorization.k8s.io/ingress-nginx-admission created                                                                                                                                                                                                                   clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx created                                                                                                                                                                                                                      clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx-admission created                                                                                                                                                                                                            configmap/ingress-nginx-controller created                                                                                                                                                                                                                                              service/ingress-nginx-controller created                                                                                                                                                                                                                                                service/ingress-nginx-controller-admission created                                                                                                                                                                                                                                      deployment.apps/ingress-nginx-controller created                                                                                                                                                                                                                                        job.batch/ingress-nginx-admission-create created                                                                                                                                                                                                                                        job.batch/ingress-nginx-admission-patch created                                                                                                                                                                                                                                         ingressclass.networking.k8s.io/nginx created                                                                                                                                                                                                                                            validatingwebhookconfiguration.admissionregistration.k8s.io/ingress-nginx-admission created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207599
- command: A | grep ingress                                                                                                                                                                                                                                                  ingress-nginx   ingress-nginx-admission-create-f7mfm        0/1     Completed                    0                4s                                                                                                                                                                    ingress-nginx   ingress-nginx-admission-patch-xzfvl         0/1     Error                        0                4s                                                                                                                                                                    ingress-nginx   ingress-nginx-controller-7bd4bbb674-t6h66   0/1     ContainerCreating            0                4s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207603
- command: kubectl get pods -A | grep ingress                                                                                                                                                                                                                                ingress-nginx   ingress-nginx-admission-create-f7mfm        0/1     Completed                    0                9s                                                                                                                                                                    ingress-nginx   ingress-nginx-admission-patch-xzfvl         0/1     Completed                    1                9s                                                                                                                                                                    ingress-nginx   ingress-nginx-controller-7bd4bbb674-t6h66   0/1     Running                      0                9s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207608
- command: kubectl get pods -A | grep ingress                                                                                                                                                                                                                                ingress-nginx   ingress-nginx-admission-create-f7mfm        0/1     Completed                    0                15s                                                                                                                                                                   ingress-nginx   ingress-nginx-admission-patch-xzfvl         0/1     Completed                    1                15s                                                                                                                                                                   ingress-nginx   ingress-nginx-controller-7bd4bbb674-t6h66   0/1     Running                      0                15s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207614
- command: kubectl get pods -A | grep ingress                                                                                                                                                                                                                                ingress-nginx   ingress-nginx-admission-create-f7mfm        0/1     Completed                    0                22s                                                                                                                                                                   ingress-nginx   ingress-nginx-admission-patch-xzfvl         0/1     Completed                    1                22s                                                                                                                                                                   ingress-nginx   ingress-nginx-controller-7bd4bbb674-t6h66   1/1     Running                      0                22s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207621
- command: kubectl get pods -A | grep ingress                                                                                                                                                                                                                                ingress-nginx   ingress-nginx-admission-create-f7mfm        0/1     Completed                    0                29s                                                                                                                                                                   ingress-nginx   ingress-nginx-admission-patch-xzfvl         0/1     Completed                    1                29s                                                                                                                                                                   ingress-nginx   ingress-nginx-controller-7bd4bbb674-t6h66   1/1     Running                      0                29s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207628
- command: kubectl get pods -A | grep ingress                                                                                                                                                                                                                                ingress-nginx   ingress-nginx-admission-create-f7mfm        0/1     Completed                    0                54s                                                                                                                                                                   ingress-nginx   ingress-nginx-admission-patch-xzfvl         0/1     Completed                    1                54s                                                                                                                                                                   ingress-nginx   ingress-nginx-controller-7bd4bbb674-t6h66   1/1     Running                      0                54s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207653
- command: kubectl get svc -n ingress-nginx                                                                                                                                                                                                                                  NAME                                 TYPE           CLUSTER-IP       EXTERNAL-IP                                                                        PORT(S)                      AGE                                                                                                ingress-nginx-controller             LoadBalancer   10.100.168.193   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80:30165/TCP,443:32547/TCP   64s                                                                                                ingress-nginx-controller-admission   ClusterIP      10.100.107.11    <none>                                                                             443/TCP                      64s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207663
- command: D^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207702
- command: ~ $ kubectl get pods -A | grep ingress                                                                                                                                                                                                                            bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207706
- command: ~ $ kubectl get pods -A | grep ingress                                                                                                                                                                                                                            bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207716
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207886
- command: kubectl apply -f ingress.yaml                                                                                                                                                                                                                                     ingress.networking.k8s.io/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207904
- command: dig +short nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                           bash: dig: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207912
- command: kubectl get certificate -n nextcloud                                                                                                                                                                                                                              error: the server doesn't have a resource type \"certificate\"
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207932
- command: cluster-issuer.yaml                                                                                                                                                                                                                                               bash: cluster-issuer.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207973
- command: nano cluster-issuer.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747207992
- command: kubectl apply -f cluster-issuer.yaml                                                                                                                                                                                                                              error: resource mapping not found for name: \"letsencrypt-prod\" namespace: \"\" from \"cluster-issuer.yaml\": no matches for kind \"ClusterIssuer\" in version \"cert-manager.io/v1\"                                                                                                            ensure CRDs are installed first
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208000
- command: kubectl apply -f https://github.com/cert-manager/cert-manager/releases/latest/download/cert-manager.yaml                                                                                                                                                          namespace/cert-manager created                                                                                                                                                                                                                                                          customresourcedefinition.apiextensions.k8s.io/certificaterequests.cert-manager.io created                                                                                                                                                                                               customresourcedefinition.apiextensions.k8s.io/certificates.cert-manager.io created                                                                                                                                                                                                      customresourcedefinition.apiextensions.k8s.io/challenges.acme.cert-manager.io created                                                                                                                                                                                                   customresourcedefinition.apiextensions.k8s.io/clusterissuers.cert-manager.io created                                                                                                                                                                                                    customresourcedefinition.apiextensions.k8s.io/issuers.cert-manager.io created                                                                                                                                                                                                           customresourcedefinition.apiextensions.k8s.io/orders.acme.cert-manager.io created                                                                                                                                                                                                       serviceaccount/cert-manager-cainjector created                                                                                                                                                                                                                                          serviceaccount/cert-manager created                                                                                                                                                                                                                                                     serviceaccount/cert-manager-webhook created                                                                                                                                                                                                                                             clusterrole.rbac.authorization.k8s.io/cert-manager-cainjector created                                                                                                                                                                                                                   clusterrole.rbac.authorization.k8s.io/cert-manager-controller-issuers created                                                                                                                                                                                                           clusterrole.rbac.authorization.k8s.io/cert-manager-controller-clusterissuers created                                                                                                                                                                                                    clusterrole.rbac.authorization.k8s.io/cert-manager-controller-certificates created                                                                                                                                                                                                      clusterrole.rbac.authorization.k8s.io/cert-manager-controller-orders created                                                                                                                                                                                                            clusterrole.rbac.authorization.k8s.io/cert-manager-controller-challenges created                                                                                                                                                                                                        clusterrole.rbac.authorization.k8s.io/cert-manager-controller-ingress-shim created                                                                                                                                                                                                      clusterrole.rbac.authorization.k8s.io/cert-manager-cluster-view created                                                                                                                                                                                                                 clusterrole.rbac.authorization.k8s.io/cert-manager-view created                                                                                                                                                                                                                         clusterrole.rbac.authorization.k8s.io/cert-manager-edit created                                                                                                                                                                                                                         clusterrole.rbac.authorization.k8s.io/cert-manager-controller-approve:cert-manager-io created                                                                                                                                                                                           clusterrole.rbac.authorization.k8s.io/cert-manager-controller-certificatesigningrequests created                                                                                                                                                                                        clusterrole.rbac.authorization.k8s.io/cert-manager-webhook:subjectaccessreviews created                                                                                                                                                                                                 clusterrolebinding.rbac.authorization.k8s.io/cert-manager-cainjector created                                                                                                                                                                                                            clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-issuers created                                                                                                                                                                                                    clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-clusterissuers created                                                                                                                                                                                             clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-certificates created                                                                                                                                                                                               clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-orders created                                                                                                                                                                                                     clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-challenges created                                                                                                                                                                                                 clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-ingress-shim created                                                                                                                                                                                               clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-approve:cert-manager-io created                                                                                                                                                                                    clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-certificatesigningrequests created                                                                                                                                                                                 clusterrolebinding.rbac.authorization.k8s.io/cert-manager-webhook:subjectaccessreviews created                                                                                                                                                                                          role.rbac.authorization.k8s.io/cert-manager-cainjector:leaderelection created                                                                                                                                                                                                           role.rbac.authorization.k8s.io/cert-manager:leaderelection created                                                                                                                                                                                                                      role.rbac.authorization.k8s.io/cert-manager-tokenrequest created                                                                                                                                                                                                                        role.rbac.authorization.k8s.io/cert-manager-webhook:dynamic-serving created                                                                                                                                                                                                             rolebinding.rbac.authorization.k8s.io/cert-manager-cainjector:leaderelection created                                                                                                                                                                                                    rolebinding.rbac.authorization.k8s.io/cert-manager:leaderelection created                                                                                                                                                                                                               rolebinding.rbac.authorization.k8s.io/cert-manager-cert-manager-tokenrequest created                                                                                                                                                                                                    rolebinding.rbac.authorization.k8s.io/cert-manager-webhook:dynamic-serving created                                                                                                                                                                                                      service/cert-manager-cainjector created                                                                                                                                                                                                                                                 service/cert-manager created                                                                                                                                                                                                                                                            service/cert-manager-webhook created                                                                                                                                                                                                                                                    deployment.apps/cert-manager-cainjector created                                                                                                                                                                                                                                         deployment.apps/cert-manager created                                                                                                                                                                                                                                                    deployment.apps/cert-manager-webhook created                                                                                                                                                                                                                                            mutatingwebhookconfiguration.admissionregistration.k8s.io/cert-manager-webhook created                                                                                                                                                                                                  validatingwebhookconfiguration.admissionregistration.k8s.io/cert-manager-webhook created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208045
- command: kubectl get pods -n cert-manager                                                                                                                                                                                                                                  NAME                                      READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                              cert-manager-6468fc8f56-xthmv             1/1     Running   0          10s                                                                                                                                                                                                              cert-manager-cainjector-7fd85dcc7-vsrcj   1/1     Running   0          10s                                                                                                                                                                                                              cert-manager-webhook-57df45f686-6g8g8     0/1     Running   0          10s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208055
- command: kubectl get pods -n cert-manager                                                                                                                                                                                                                                  NAME                                      READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                              cert-manager-6468fc8f56-xthmv             1/1     Running   0          13s                                                                                                                                                                                                              cert-manager-cainjector-7fd85dcc7-vsrcj   1/1     Running   0          13s                                                                                                                                                                                                              cert-manager-webhook-57df45f686-6g8g8     1/1     Running   0          13s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208058
- command: kubectl apply -f cluster-issuer.yaml                                                                                                                                                                                                                              clusterissuer.cert-manager.io/letsencrypt-prod created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208066
- command: kubectl get clusterissuer                                                                                                                                                                                                                                         NAME               READY   AGE                                                                                                                                                                                                                                                          letsencrypt-prod   True    10s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208077
- command: kubectl describe certificate -n nextcloud                                                                                                                                                                                                                         Name:         nextcloud-tls                                                                                                                                                                                                                                                             Namespace:    nextcloud                                                                                                                                                                                                                                                                 Labels:       app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                            Annotations:  <none>                                                                                                                                                                                                                                                                    API Version:  cert-manager.io/v1                                                                                                                                                                                                                                                        Kind:         Certificate                                                                                                                                                                                                                                                               Metadata:                                                                                                                                                                                                                                                                                 Creation Timestamp:  2025-05-14T07:34:25Z                                                                                                                                                                                                                                               Generation:          1                                                                                                                                                                                                                                                                  Owner References:                                                                                                                                                                                                                                                                         API Version:           networking.k8s.io/v1                                                                                                                                                                                                                                             Block Owner Deletion:  true                                                                                                                                                                                                                                                             Controller:            true                                                                                                                                                                                                                                                             Kind:                  Ingress                                                                                                                                                                                                                                                          Name:                  nextcloud                                                                                                                                                                                                                                                        UID:                   bacef672-f508-412e-bf11-9c0610987172                                                                                                                                                                                                                           Resource Version:        179069                                                                                                                                                                                                                                                         UID:                     456c3a10-6ce8-45b5-b882-468e63841d1a                                                                                                                                                                                                                         Spec:                                                                                                                                                                                                                                                                                     Dns Names:                                                                                                                                                                                                                                                                                nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                          Issuer Ref:                                                                                                                                                                                                                                                                               Group:      cert-manager.io                                                                                                                                                                                                                                                             Kind:       ClusterIssuer                                                                                                                                                                                                                                                               Name:       letsencrypt-prod                                                                                                                                                                                                                                                          Secret Name:  nextcloud-tls                                                                                                                                                                                                                                                             Usages:                                                                                                                                                                                                                                                                                   digital signature                                                                                                                                                                                                                                                                       key encipherment                                                                                                                                                                                                                                                                    Status:                                                                                                                                                                                                                                                                                   Conditions:                                                                                                                                                                                                                                                                               Last Transition Time:  2025-05-14T07:35:00Z                                                                                                                                                                                                                                             Message:               Certificate is up to date and has not expired                                                                                                                                                                                                                    Observed Generation:   1                                                                                                                                                                                                                                                                Reason:                Ready                                                                                                                                                                                                                                                            Status:                True                                                                                                                                                                                                                                                             Type:                  Ready                                                                                                                                                                                                                                                          Not After:               2025-08-12T06:36:25Z                                                                                                                                                                                                                                           Not Before:              2025-05-14T06:36:26Z                                                                                                                                                                                                                                           Renewal Time:            2025-07-13T06:36:25Z                                                                                                                                                                                                                                           Revision:                1                                                                                                                                                                                                                                                            Events:                                                                                                                                                                                                                                                                                   Type    Reason     Age   From                                       Message                                                                                                                                                                                                             ----    ------     ----  ----                                       -------                                                                                                                                                                                                             Normal  Issuing    44s   cert-manager-certificates-trigger          Issuing certificate as Secret does not exist                                                                                                                                                                        Normal  Generated  44s   cert-manager-certificates-key-manager      Stored new private key in temporary Secret resource \"nextcloud-tls-rf2l7\"                                                                                                                                           Normal  Requested  44s   cert-manager-certificates-request-manager  Created new CertificateRequest resource \"nextcloud-tls-1\"                                                                                                                                                           Normal  Issuing    9s    cert-manager-certificates-issuing          The certificate has been successfully issued
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208109
- command: kubectl logs -n cert-manager deploy/cert-manager^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208163
- command: kubectl get storageclass                                                                                                                                                                                                                                          NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                                                                                      efs-sc   efs.csi.aws.com         Retain          Immediate              false                  16h                                                                                                                                                                                      gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  16h
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208208
- command: kubectl delete pvc nextcloud-data -n nextcloud                                                                                                                                                                                                                    persistentvolumeclaim \"nextcloud-data\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208263
- command: 3291900\"                                                                                                                                                                                                                                                          I0514 07:35:00.160114       1 controller.go:152] \"re-queuing item due to optimistic locking on resource\" logger=\"cert-manager.controller\" error=\"Operation cannot be fulfilled on certificates.cert-manager.io \\\"nextcloud-tls\\\": the object has been modified; please apply your changes to the latest version and try again\"                                                                                                                                                                                                                                                  I0514 07:35:00.161201       1 conditions.go:201] \"Found status change for Certificate condition; setting lastTransitionTime\" logger=\"cert-manager\" certificate=\"nextcloud/nextcloud-tls\" condition=\"Ready\" oldStatus=\"False\" status=\"True\" lastTransitionTime=\"2025-05-14 07:35:00.161165751 +0000 UTC m=+50.241946057\"                                                                                                                                                                                                                                                         cloudshell-user@:~~ $ kubectl get storageclass                                                                                                                                                                                                                                          NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                                                                                      efs-sc   efs.csi.aws.com         Retain          Immediate              false                  16h                                                                                                                                                                                      gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  16h                                                                                                                                                                                      cloudshell-user@:~~ $ kubectl delete pvc nextcloud-data -n nextcloud                                                                                                                                                                                                                    persistentvolumeclaim \"nextcloud-data\" deleted                                                                                                                                                                                                                                          cloudshell-user@:~~ $ nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208298
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                         persistentvolumeclaim/nextcloud-data created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208302
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208308
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-5d94cc7865-xmlbd   0/1     Pending   0          16m                                                                                                                                                                                                                           nextcloud-b9b79f699-4lhvd    0/1     Pending   0          7s                                                                                                                                                                                                                            nextcloud-mariadb-0          1/1     Running   0          24m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208315
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-5d94cc7865-xmlbd   0/1     Pending   0          20m                                                                                                                                                                                                                           nextcloud-b9b79f699-4lhvd    0/1     Pending   0          3m30s                                                                                                                                                                                                                         nextcloud-mariadb-0          1/1     Running   0          27m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208518
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-5d94cc7865-xmlbd   0/1     Pending   0          20m                                                                                                                                                                                                                           nextcloud-b9b79f699-4lhvd    0/1     Pending   0          3m38s                                                                                                                                                                                                                         nextcloud-mariadb-0          1/1     Running   0          27m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208526
- command: kubectl describe pod nextcloud-b9b79f699-4lhvd -n nextcloud                                                                                                                                                                                                       Name:             nextcloud-b9b79f699-4lhvd                                                                                                                                                                                                                                             Namespace:        nextcloud                                                                                                                                                                                                                                                             Priority:         0                                                                                                                                                                                                                                                                     Service Account:  default                                                                                                                                                                                                                                                               Node:             <none>                                                                                                                                                                                                                                                                Labels:           app=nextcloud                                                                                                                                                                                                                                                                           pod-template-hash=b9b79f699                                                                                                                                                                                                                                           Annotations:      kubectl.kubernetes.io/restartedAt: 2025-05-14T07:38:28Z                                                                                                                                                                                                               Status:           Pending                                                                                                                                                                                                                                                               IP:                                                                                                                                                                                                                                                                                     IPs:              <none>                                                                                                                                                                                                                                                                Controlled By:    ReplicaSet/nextcloud-b9b79f699                                                                                                                                                                                                                                        Containers:                                                                                                                                                                                                                                                                               nextcloud:                                                                                                                                                                                                                                                                                Image:      nextcloud:28                                                                                                                                                                                                                                                                Port:       80/TCP                                                                                                                                                                                                                                                                      Host Port:  0/TCP                                                                                                                                                                                                                                                                       Environment:                                                                                                                                                                                                                                                                              MYSQL_PASSWORD:  <set to the key 'password' in secret 'nextcloud-db-secret'>  Optional: false                                                                                                                                                                                           MYSQL_DATABASE:  nextcloud                                                                                                                                                                                                                                                              MYSQL_USER:      nextcloud                                                                                                                                                                                                                                                              MYSQL_HOST:      nextcloud-db                                                                                                                                                                                                                                                         Mounts:                                                                                                                                                                                                                                                                                   /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-z7g6c (ro)                                                                                                                                                                                                           /var/www/html from nextcloud-storage (rw)                                                                                                                                                                                                                                         Volumes:                                                                                                                                                                                                                                                                                  nextcloud-storage:                                                                                                                                                                                                                                                                        Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)                                                                                                                                                                                        ClaimName:  nextcloud-data                                                                                                                                                                                                                                                              ReadOnly:   false                                                                                                                                                                                                                                                                     kube-api-access-z7g6c:                                                                                                                                                                                                                                                                    Type:                    Projected (a volume that contains injected data from multiple sources)                                                                                                                                                                                         TokenExpirationSeconds:  3607                                                                                                                                                                                                                                                           ConfigMapName:           kube-root-ca.crt                                                                                                                                                                                                                                               ConfigMapOptional:       <nil>                                                                                                                                                                                                                                                          DownwardAPI:             true                                                                                                                                                                                                                                                       QoS Class:                   BestEffort                                                                                                                                                                                                                                                 Node-Selectors:              <none>                                                                                                                                                                                                                                                     Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s                                                                                                                                                                                                                               node.kubernetes.io/unreachable:NoExecute op=Exists for 300s                                                                                                                                                                                                Events:                      <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208568
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                      NAME             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                                nextcloud-data   Pending                                      gp2            <unset>                 5m22s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208624
- command: kubectl get pods -n kube-system | grep ebs
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208676
- command: kubectl get pods -n kube-system | grep ebs
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208678
- command: kubectl apply -k \"github.com/kubernetes-sigs/aws-ebs-csi-driver/deploy/kubernetes/overlays/stable/ecr/?ref=release-1.30\"                                                                                                                                          serviceaccount/ebs-csi-controller-sa created                                                                                                                                                                                                                                            serviceaccount/ebs-csi-node-sa created                                                                                                                                                                                                                                                  role.rbac.authorization.k8s.io/ebs-csi-leases-role created                                                                                                                                                                                                                              clusterrole.rbac.authorization.k8s.io/ebs-csi-node-role created                                                                                                                                                                                                                         clusterrole.rbac.authorization.k8s.io/ebs-external-attacher-role created                                                                                                                                                                                                                clusterrole.rbac.authorization.k8s.io/ebs-external-provisioner-role created                                                                                                                                                                                                             clusterrole.rbac.authorization.k8s.io/ebs-external-resizer-role created                                                                                                                                                                                                                 clusterrole.rbac.authorization.k8s.io/ebs-external-snapshotter-role created                                                                                                                                                                                                             rolebinding.rbac.authorization.k8s.io/ebs-csi-leases-rolebinding created                                                                                                                                                                                                                clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-attacher-binding created                                                                                                                                                                                                           clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-node-getter-binding created                                                                                                                                                                                                        clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-provisioner-binding created                                                                                                                                                                                                        clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-resizer-binding created                                                                                                                                                                                                            clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-snapshotter-binding created                                                                                                                                                                                                        deployment.apps/ebs-csi-controller created                                                                                                                                                                                                                                              poddisruptionbudget.policy/ebs-csi-controller created                                                                                                                                                                                                                                   daemonset.apps/ebs-csi-node created                                                                                                                                                                                                                                                     csidriver.storage.k8s.io/ebs.csi.aws.com created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208694
- command: kubectl get pods -n kube-system | grep ebs                                                                                                                                                                                                                        ebs-csi-controller-77687dd957-b7k5r   0/6     ErrImagePull        0          8s                                                                                                                                                                                                         ebs-csi-controller-77687dd957-p687l   0/6     ContainerCreating   0          8s                                                                                                                                                                                                         ebs-csi-node-w2dcx                    0/3     ErrImagePull        0          8s                                                                                                                                                                                                         ebs-csi-node-zbsw9                    0/3     ErrImagePull        0          8s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208702
- command: kubectl get pods -n kube-system | grep ebs                                                                                                                                                                                                                        ebs-csi-controller-77687dd957-b7k5r   0/6     ErrImagePull   0          14s                                                                                                                                                                                                             ebs-csi-controller-77687dd957-p687l   0/6     ErrImagePull   0          14s                                                                                                                                                                                                             ebs-csi-node-w2dcx                    0/3     ErrImagePull   0          14s                                                                                                                                                                                                             ebs-csi-node-zbsw9                    0/3     ErrImagePull   0          14s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208708
- command: kubectl get pods -n kube-system | grep ebs                                                                                                                                                                                                                        ebs-csi-controller-77687dd957-b7k5r   0/6     ErrImagePull       0          18s                                                                                                                                                                                                         ebs-csi-controller-77687dd957-p687l   0/6     ErrImagePull       0          18s                                                                                                                                                                                                         ebs-csi-node-w2dcx                    0/3     ImagePullBackOff   0          18s                                                                                                                                                                                                         ebs-csi-node-zbsw9                    0/3     ErrImagePull       0          18s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208712
- command: kubectl delete -k \"github.com/kubernetes-sigs/aws-ebs-csi-driver/deploy/kubernetes/overlays/stable/ecr/?ref=release-1.30\"                                                                                                                                         serviceaccount \"ebs-csi-controller-sa\" deleted                                                                                                                                                                                                                                          serviceaccount \"ebs-csi-node-sa\" deleted                                                                                                                                                                                                                                                role.rbac.authorization.k8s.io \"ebs-csi-leases-role\" deleted                                                                                                                                                                                                                            clusterrole.rbac.authorization.k8s.io \"ebs-csi-node-role\" deleted                                                                                                                                                                                                                       clusterrole.rbac.authorization.k8s.io \"ebs-external-attacher-role\" deleted                                                                                                                                                                                                              clusterrole.rbac.authorization.k8s.io \"ebs-external-provisioner-role\" deleted                                                                                                                                                                                                           clusterrole.rbac.authorization.k8s.io \"ebs-external-resizer-role\" deleted                                                                                                                                                                                                               clusterrole.rbac.authorization.k8s.io \"ebs-external-snapshotter-role\" deleted                                                                                                                                                                                                           rolebinding.rbac.authorization.k8s.io \"ebs-csi-leases-rolebinding\" deleted                                                                                                                                                                                                              clusterrolebinding.rbac.authorization.k8s.io \"ebs-csi-attacher-binding\" deleted                                                                                                                                                                                                         clusterrolebinding.rbac.authorization.k8s.io \"ebs-csi-node-getter-binding\" deleted                                                                                                                                                                                                      clusterrolebinding.rbac.authorization.k8s.io \"ebs-csi-provisioner-binding\" deleted                                                                                                                                                                                                      clusterrolebinding.rbac.authorization.k8s.io \"ebs-csi-resizer-binding\" deleted                                                                                                                                                                                                          clusterrolebinding.rbac.authorization.k8s.io \"ebs-csi-snapshotter-binding\" deleted                                                                                                                                                                                                      deployment.apps \"ebs-csi-controller\" deleted                                                                                                                                                                                                                                            poddisruptionbudget.policy \"ebs-csi-controller\" deleted                                                                                                                                                                                                                                 daemonset.apps \"ebs-csi-node\" deleted                                                                                                                                                                                                                                                   csidriver.storage.k8s.io \"ebs.csi.aws.com\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747208782
- command: kubectl apply -k github.com/kubernetes-sigs/aws-ebs-csi-driver/deploy/kubernetes/overlays/stable                                                                                                                                                                  serviceaccount/ebs-csi-controller-sa created                                                                                                                                                                                                                                            serviceaccount/ebs-csi-node-sa created                                                                                                                                                                                                                                                  role.rbac.authorization.k8s.io/ebs-csi-leases-role created                                                                                                                                                                                                                              clusterrole.rbac.authorization.k8s.io/ebs-csi-node-role created                                                                                                                                                                                                                         clusterrole.rbac.authorization.k8s.io/ebs-external-attacher-role created                                                                                                                                                                                                                clusterrole.rbac.authorization.k8s.io/ebs-external-provisioner-role created                                                                                                                                                                                                             clusterrole.rbac.authorization.k8s.io/ebs-external-resizer-role created                                                                                                                                                                                                                 clusterrole.rbac.authorization.k8s.io/ebs-external-snapshotter-role created                                                                                                                                                                                                             rolebinding.rbac.authorization.k8s.io/ebs-csi-leases-rolebinding created                                                                                                                                                                                                                clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-attacher-binding created                                                                                                                                                                                                           clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-node-getter-binding created                                                                                                                                                                                                        clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-provisioner-binding created                                                                                                                                                                                                        clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-resizer-binding created                                                                                                                                                                                                            clusterrolebinding.rbac.authorization.k8s.io/ebs-csi-snapshotter-binding created                                                                                                                                                                                                        deployment.apps/ebs-csi-controller created                                                                                                                                                                                                                                              poddisruptionbudget.policy/ebs-csi-controller created                                                                                                                                                                                                                                   daemonset.apps/ebs-csi-node created                                                                                                                                                                                                                                                     csidriver.storage.k8s.io/ebs.csi.aws.com created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209060
- command: kubectl get pods -n kube-system | grep ebs                                                                                                                                                                                                                        ebs-csi-controller-c89cc4cd5-hvfmz    0/6     ContainerCreating   0          6s                                                                                                                                                                                                         ebs-csi-controller-c89cc4cd5-wwkp6    0/6     ContainerCreating   0          6s                                                                                                                                                                                                         ebs-csi-node-pzcj4                    0/3     ContainerCreating   0          6s                                                                                                                                                                                                         ebs-csi-node-wvhdp                    0/3     ContainerCreating   0          6s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209066
- command: kubectl get pods -n kube-system | grep ebs                                                                                                                                                                                                                        ebs-csi-controller-c89cc4cd5-hvfmz    0/6     ContainerCreating   0          15s                                                                                                                                                                                                        ebs-csi-controller-c89cc4cd5-wwkp6    0/6     ContainerCreating   0          15s                                                                                                                                                                                                        ebs-csi-node-pzcj4                    3/3     Running             0          15s                                                                                                                                                                                                        ebs-csi-node-wvhdp                    3/3     Running             0          15s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209075
- command: kubectl get pods -n kube-system | grep ebs                                                                                                                                                                                                                        ebs-csi-controller-c89cc4cd5-hvfmz    6/6     Running   0          46s                                                                                                                                                                                                                  ebs-csi-controller-c89cc4cd5-wwkp6    6/6     Running   0          46s                                                                                                                                                                                                                  ebs-csi-node-pzcj4                    3/3     Running   0          46s                                                                                                                                                                                                                  ebs-csi-node-wvhdp                    3/3     Running   0          46s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209106
- command: kubectl delete pvc nextcloud-data -n nextcloud                                                                                                                                                                                                                    persistentvolumeclaim \"nextcloud-data\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209133
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209171
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                         persistentvolumeclaim/nextcloud-data created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209174
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209177
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209179
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                      NAME             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                                nextcloud-data   Pending                                      gp2            <unset>                 13s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209187
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7fdf8bc775-r8zbr   0/1     Pending   0          9s                                                                                                                                                                                                                            nextcloud-b9b79f699-4lhvd    0/1     Pending   0          14m                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          38m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209188
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7fdf8bc775-r8zbr   0/1     Pending   0          47s                                                                                                                                                                                                                           nextcloud-b9b79f699-4lhvd    0/1     Pending   0          15m                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          39m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209226
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                      NAME             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                                nextcloud-data   Pending                                      gp2            <unset>                 55s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209229
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                      NAME             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                                nextcloud-data   Pending                                      gp2            <unset>                 84s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209258
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7fdf8bc775-r8zbr   0/1     Pending   0          81s                                                                                                                                                                                                                           nextcloud-b9b79f699-4lhvd    0/1     Pending   0          15m                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          40m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209260
- command: kubectl get storageclass                                                                                                                                                                                                                                          NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                                                                                      efs-sc   efs.csi.aws.com         Retain          Immediate              false                  16h                                                                                                                                                                                      gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  17h
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209331
- command: eksctl-clusternextcloud-nodegroup--NodeInstanceRole-aMZspuPfOwsZ                                                                                                                                                                                                  bash: eksctl-clusternextcloud-nodegroup--NodeInstanceRole-aMZspuPfOwsZ: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209395
- command: eksctl-clusternextcloud-nodegroup--NodeInstanceRole-aMZspuPfOwsZ                                                                                                                                                                                                  bash: eksctl-clusternextcloud-nodegroup--NodeInstanceRole-aMZspuPfOwsZ: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209398
- command: aws iam attach-role-policy \\                                                                                                                                                                                                                                      >   --role-name eksctl-clusternextcloud-nodegroup--NodeInstanceRole-aMZspuPfOwsZ \\                                                                                                                                                                                                      >   --policy-arn arn:aws:iam::aws:policy/AmazonEBSCSIDriverPolicy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               An error occurred (NoSuchEntity) when calling the AttachRolePolicy operation: Policy arn:aws:iam::aws:policy/AmazonEBSCSIDriverPolicy does not exist or is not attachable.
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209442
- command: aws iam list-policies --scope AWS --query 'Policies[?contains(PolicyName, `EBS`)].{Name:PolicyName, ARN:Arn}' --output table                                                                                                                                      -----------------------------------------------------------------------------------------------------------------------                                                                                                                                                                 |                                                    ListPolicies                                                     |                                                                                                                                                                 +----------------------------------------------------------------------------+----------------------------------------+                                                                                                                                                                 |                                     ARN                                    |                 Name                   |                                                                                                                                                                 +----------------------------------------------------------------------------+----------------------------------------+                                                                                                                                                                 |  arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy             |  AmazonEBSCSIDriverPolicy              |                                                                                                                                                                 |  arn:aws:iam::aws:policy/service-role/ROSAAmazonEBSCSIDriverOperatorPolicy |  ROSAAmazonEBSCSIDriverOperatorPolicy  |                                                                                                                                                                 +----------------------------------------------------------------------------+----------------------------------------+
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209507
- command: aws iam attach-role-policy \\                                                                                                                                                                                                                                      >   --role-name eksctl-clusternextcloud-nodegroup--NodeInstanceRole-aMZspuPfOwsZ \\                                                                                                                                                                                                      >   --policy-arn arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209535
- command: kubectl delete pvc nextcloud-data -n nextcloud                                                                                                                                                                                                                    persistentvolumeclaim \"nextcloud-data\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209552
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  namespace.yaml  pvc.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209556
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                         persistentvolumeclaim/nextcloud-data created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209561
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                      NAME             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                               nextcloud-data   Bound    pvc-6beaf7dd-0046-4fa4-bdbb-eea4c5eddf70   10Gi       RWO            gp2            <unset>                 7s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209568
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                      NAME             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                               nextcloud-data   Bound    pvc-6beaf7dd-0046-4fa4-bdbb-eea4c5eddf70   10Gi       RWO            gp2            <unset>                 21s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209582
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209588
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS                       RESTARTS   AGE                                                                                                                                                                                                        nextcloud-69df6ffbf4-4svhl   0/1     CreateContainerConfigError   0          34s                                                                                                                                                                                                        nextcloud-7fdf8bc775-r8zbr   0/1     CreateContainerConfigError   0          7m23s                                                                                                                                                                                                      nextcloud-mariadb-0          1/1     Running                      0          46m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209622
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS                       RESTARTS   AGE                                                                                                                                                                                                        nextcloud-69df6ffbf4-4svhl   0/1     CreateContainerConfigError   0          47s                                                                                                                                                                                                        nextcloud-7fdf8bc775-r8zbr   0/1     CreateContainerConfigError   0          7m36s                                                                                                                                                                                                      nextcloud-mariadb-0          1/1     Running                      0          46m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209635
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS                       RESTARTS   AGE                                                                                                                                                                                                        nextcloud-69df6ffbf4-4svhl   0/1     CreateContainerConfigError   0          70s                                                                                                                                                                                                        nextcloud-7fdf8bc775-r8zbr   0/1     CreateContainerConfigError   0          7m59s                                                                                                                                                                                                      nextcloud-mariadb-0          1/1     Running                      0          46m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209658
- command: echo -n 'nextcloud123' | base64                                                                                                                                                                                                                                   bmV4dGNsb3VkMTIz
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209857
- command: nano secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209891
- command: nano secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209895
- command: kubectl apply -f secret.yaml                                                                                                                                                                                                                                      secret/nextcloud-db-secret created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209900
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209904
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS        RESTARTS   AGE                                                                                                                                                                                                                       nextcloud-7fdf8bc775-r8zbr   1/1     Terminating   0          12m                                                                                                                                                                                                                       nextcloud-8466466548-q92m2   1/1     Running       0          6s                                                                                                                                                                                                                        nextcloud-mariadb-0          1/1     Running       0          50m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209910
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS        RESTARTS   AGE                                                                                                                                                                                                                       nextcloud-7fdf8bc775-r8zbr   1/1     Terminating   0          12m                                                                                                                                                                                                                       nextcloud-8466466548-q92m2   1/1     Running       0          11s                                                                                                                                                                                                                       nextcloud-mariadb-0          1/1     Running       0          51m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209915
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS        RESTARTS   AGE                                                                                                                                                                                                                       nextcloud-7fdf8bc775-r8zbr   1/1     Terminating   0          12m                                                                                                                                                                                                                       nextcloud-8466466548-q92m2   1/1     Running       0          24s                                                                                                                                                                                                                       nextcloud-mariadb-0          1/1     Running       0          51m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209928
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7fdf8bc775-r8zbr   0/1     Error     0          12m                                                                                                                                                                                                                           nextcloud-8466466548-q92m2   1/1     Running   0          32s                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          51m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209936
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-8466466548-q92m2   1/1     Running   0          37s                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          51m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209941
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-8466466548-q92m2   1/1     Running   0          52s                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          51m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747209956
- command: kubectl get svc -n nextcloud                                                                                                                                                                                                                                      NAME                TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE                                                                                                                                                                                                            nextcloud           ClusterIP   10.100.137.90   <none>        8080/TCP   52m                                                                                                                                                                                                            nextcloud-mariadb   ClusterIP   10.100.4.131    <none>        3306/TCP   52m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210023
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210243
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210264
- command: kubectl apply -f ingress.yaml                                                                                                                                                                                                                                     ingress.networking.k8s.io/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210270
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   57m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210319
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                From                       Message                                                                                                                                                                                                        ----    ------             ----               ----                       -------                                                                                                                                                                                                        Normal  CreateCertificate  37m                cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                               Normal  Sync               50s (x4 over 45m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210320
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                From                       Message                                                                                                                                                                                                        ----    ------             ----               ----                       -------                                                                                                                                                                                                        Normal  CreateCertificate  37m                cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                               Normal  Sync               68s (x4 over 45m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210338
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210344
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210344
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210344
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210345
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210345
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   58m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210347
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                From                       Message                                                                                                                                                                                                        ----    ------             ----               ----                       -------                                                                                                                                                                                                        Normal  CreateCertificate  38m                cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                               Normal  Sync               78s (x4 over 45m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210348
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   59m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210395
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                 From                       Message                                                                                                                                                                                                       ----    ------             ----                ----                       -------                                                                                                                                                                                                       Normal  CreateCertificate  38m                 cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                              Normal  Sync               2m6s (x4 over 46m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210396
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Error when retrieving credentials from container-role: Error retrieving metadata: Received non 200 response 500 from container metadata: <?xml version=\"1.0\" encoding=\"iso-8859-1\"?>                                                                                                    <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"                                                                                                                                                                                                                          \t       \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">                                                                                                                                                                                                                      <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">                                                                                                                                                                                                                      <head>                                                                                                                                                                                                                                                                                   <title>500 - Internal Server Error</title>                                                                                                                                                                                                                                             </head>                                                                                                                                                                                                                                                                                 <body>                                                                                                                                                                                                                                                                                   <h1>500 - Internal Server Error</h1>                                                                                                                                                                                                                                                   </body>                                                                                                                                                                                                                                                                                </html>                                                                                                                                                                                                                                                                                 Unable to connect to the server: getting credentials: exec: executable aws failed with exit code 255
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210767
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                                     Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                  From                       Message                                                                                                                                                                                                      ----    ------             ----                 ----                       -------                                                                                                                                                                                                      Normal  CreateCertificate  45m                  cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                             Normal  Sync               8m50s (x4 over 53m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210800
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   66m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210813
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                 From                       Message                                                                                                                                                                                                       ----    ------             ----                ----                       -------                                                                                                                                                                                                       Normal  CreateCertificate  45m                 cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                              Normal  Sync               9m4s (x4 over 53m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210814
- command: kubectl logs deployment/nextcloud -n nextcloud                                                                                                                                                                                                                    Another process is initializing Nextcloud. Waiting...                                                                                                                                                                                                                                   => Searching for scripts (*.sh) to run, located in the folder: /docker-entrypoint-hooks.d/before-starting                                                                                                                                                                               AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.41.220. Set the 'ServerName' directive globally to suppress this message                                                                                                         AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.41.220. Set the 'ServerName' directive globally to suppress this message                                                                                                         [Wed May 14 08:05:07.772979 2025] [mpm_prefork:notice] [pid 1:tid 1] AH00163: Apache/2.4.62 (Debian) PHP/8.2.27 configured -- resuming normal operations                                                                                                                                [Wed May 14 08:05:07.773242 2025] [core:notice] [pid 1:tid 1] AH00094: Command line: 'apache2 -D FOREGROUND'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210835
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210856
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210865
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   67m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210872
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                From                       Message                                                                                                                                                                                                        ----    ------             ----               ----                       -------                                                                                                                                                                                                        Normal  CreateCertificate  46m                cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                               Normal  Sync               10m (x4 over 54m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210873
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210875
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210876
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210876
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210876
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210876
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210876
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210876
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   67m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210882
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                From                       Message                                                                                                                                                                                                        ----    ------             ----               ----                       -------                                                                                                                                                                                                        Normal  CreateCertificate  46m                cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                               Normal  Sync               10m (x4 over 54m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210883
- command: kubectl logs deployment/nextcloud -n nextcloud                                                                                                                                                                                                                    Another process is initializing Nextcloud. Waiting...                                                                                                                                                                                                                                   => Searching for scripts (*.sh) to run, located in the folder: /docker-entrypoint-hooks.d/before-starting                                                                                                                                                                               AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.41.220. Set the 'ServerName' directive globally to suppress this message                                                                                                         AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.41.220. Set the 'ServerName' directive globally to suppress this message                                                                                                         [Wed May 14 08:05:07.772979 2025] [mpm_prefork:notice] [pid 1:tid 1] AH00163: Apache/2.4.62 (Debian) PHP/8.2.27 configured -- resuming normal operations                                                                                                                                [Wed May 14 08:05:07.773242 2025] [core:notice] [pid 1:tid 1] AH00094: Command line: 'apache2 -D FOREGROUND'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210887
- command: nano ingresss.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210900
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210907
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210913
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210914
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210914
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210914
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210914
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210914
- command: kubectl get endpoints nextcloud -n nextcloud                                                                                                                                                                                                                      NAME        ENDPOINTS   AGE                                                                                                                                                                                                                                                             nextcloud   <none>      67m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210917
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210922
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210922
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210922
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210923
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210923
- command: kubectl get ingress nextcloud -n nextcloud                                                                                                                                                                                                                        NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                     nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   67m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210927
- command: kubectl describe ingress nextcloud -n nextcloud                                                                                                                                                                                                                   Name:             nextcloud                                                                                                                                                                                                                                                             Labels:           app.kubernetes.io/component=app                                                                                                                                                                                                                                                         app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=nextcloud                                                                                                                                                                                                                                                        app.kubernetes.io/version=30.0.10                                                                                                                                                                                                                                                       helm.sh/chart=nextcloud-6.6.10                                                                                                                                                                                                                                        Namespace:        nextcloud                                                                                                                                                                                                                                                             Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                                                                                      Ingress Class:    nginx                                                                                                                                                                                                                                                                 Default backend:  <default>                                                                                                                                                                                                                                                             TLS:                                                                                                                                                                                                                                                                                      nextcloud-tls terminates nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                 Rules:                                                                                                                                                                                                                                                                                    Host                          Path  Backends                                                                                                                                                                                                                                            ----                          ----  --------                                                                                                                                                                                                                                            nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                                          /   nextcloud:8080 ()                                                                                                                                                                                                                                   Annotations:                    cert-manager.io/cluster-issuer: letsencrypt-prod                                                                                                                                                                                                                                        kubernetes.io/ingress.class: nginx                                                                                                                                                                                                                                                      meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                                               nginx.ingress.kubernetes.io/ssl-redirect: true                                                                                                                                                                                                          Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age                From                       Message                                                                                                                                                                                                        ----    ------             ----               ----                       -------                                                                                                                                                                                                        Normal  CreateCertificate  47m                cert-manager-ingress-shim  Successfully created Certificate \"nextcloud-tls\"                                                                                                                                                               Normal  Sync               10m (x4 over 55m)  nginx-ingress-controller   Scheduled for sync
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210929
- command: kubectl logs deployment/nextcloud -n nextcloud                                                                                                                                                                                                                    Another process is initializing Nextcloud. Waiting...                                                                                                                                                                                                                                   => Searching for scripts (*.sh) to run, located in the folder: /docker-entrypoint-hooks.d/before-starting                                                                                                                                                                               AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.41.220. Set the 'ServerName' directive globally to suppress this message                                                                                                         AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.41.220. Set the 'ServerName' directive globally to suppress this message                                                                                                         [Wed May 14 08:05:07.772979 2025] [mpm_prefork:notice] [pid 1:tid 1] AH00163: Apache/2.4.62 (Debian) PHP/8.2.27 configured -- resuming normal operations                                                                                                                                [Wed May 14 08:05:07.773242 2025] [core:notice] [pid 1:tid 1] AH00094: Command line: 'apache2 -D FOREGROUND'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210931
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-8466466548-q92m2   1/1     Running   0          18m                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          69m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747210993
- command: kubectl run testpod -n nextcloud --rm -it --image=alpine -- /bin/sh                                                                                                                                                                                               If you don't see a command prompt, try pressing enter.                                                                                                                                                                                                                                  / #                                                                                                                                                                                                                                                                                     / #                                                                                                                                                                                                                                                                                     / #                                                                                                                                                                                                                                                                                     / #                                                                                                                                                                                                                                                                                     / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # kubectl run testpod -n nextcloud --rm -it --image=alpine -- /bin/sh                                                                                                                                                                                                                 /bin/sh: kubectl: not found                                                                                                                                                                                                                                                             / # apk add --no-cache curl                                                                                                                                                                                                                                                             fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz                                                                                                                                                                                                           fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz                                                                                                                                                                                                      (1/9) Installing brotli-libs (1.1.0-r2)                                                                                                                                                                                                                                                 (2/9) Installing c-ares (1.34.5-r0)                                                                                                                                                                                                                                                     (3/9) Installing libunistring (1.2-r0)                                                                                                                                                                                                                                                  (4/9) Installing libidn2 (2.3.7-r0)                                                                                                                                                                                                                                                     (5/9) Installing nghttp2-libs (1.64.0-r0)                                                                                                                                                                                                                                               (6/9) Installing libpsl (0.21.5-r3)                                                                                                                                                                                                                                                     (7/9) Installing zstd-libs (1.5.6-r2)                                                                                                                                                                                                                                                   (8/9) Installing libcurl (8.12.1-r1)                                                                                                                                                                                                                                                    (9/9) Installing curl (8.12.1-r1)                                                                                                                                                                                                                                                       Executing busybox-1.37.0-r12.trigger                                                                                                                                                                                                                                                    OK: 12 MiB in 24 packages                                                                                                                                                                                                                                                               / # curl http://nextcloud:8080                                                                                                                                                                                                                                                          curl: (7) Failed to connect to nextcloud port 8080 after 1 ms: Could not connect to server                                                                                                                                                                                              / # curl http://nextcloud.ewe-netz-backup.de:8080                                                                                                                                                                                                                                       se^C                                                                                                                                                                                                                                                                                    / # nano^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # nano service.yaml                                                                                                                                                                                                                                                                   /bin/sh: nano: not found                                                                                                                                                                                                                                                                / # exit                                                                                                                                                                                                                                                                                Session ended, resume using 'kubectl attach testpod -c testpod -i -t' command when the pod is running                                                                                                                                                                                   pod \"testpod\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211184
- command: / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # ^C                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          / # nano service.yaml                                                                                                                                                                                                                                                                   /bin/sh: nano: not found                                                                                                                                                                                                                                                                / # exit                                                                                                                                                                                                                                                                                Session ended, resume using 'kubectl attach testpod -c testpod -i -t' command when the pod is running                                                                                                                                                                                   pod \"testpod\" deleted                                                                                                                                                                                                                                                                   cloudshell-user@:~~ $ nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211228
- command: kubectl apply -f service.yaml                                                                                                                                                                                                                                     Warning: resource services/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                         The Service \"nextcloud\" is invalid: spec.ports[0].name: Required value
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211232
- command: y -f service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211254
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211285
- command: kubectl apply -f ingress.yaml                                                                                                                                                                                                                                     ingress.networking.k8s.io/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211289
- command: using 'kubectl attach testpod -c testpod -i -t' command when the pod is running                                                                                                                                                                                   pod \"testpod\" deleted                                                                                                                                                                                                                                                                   cloudshell-user@:~~ $ nano service.yaml                                                                                                                                                                                                                                                 cloudshell-user@:~~ $ kubectl apply -f service.yaml                                                                                                                                                                                                                                     Warning: resource services/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                         The Service \"nextcloud\" is invalid: spec.ports[0].name: Required value                                                                                                                                                                                                                  clounano$ kubectl apply -f service.yaml                                                                                                                                                                                                                                                 cloudshell-user@:~~ $ nano ingress.yaml                                                                                                                                                                                                                                                 cloudshell-user@:~~ $ kubectl apply -f ingress.yaml                                                                                                                                                                                                                                     ingress.networking.k8s.io/nextcloud configured                                                                                                                                                                                                                                          cloudshell-user@:~~ $ nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211325
- command: kubectl apply -f service.yaml                                                                                                                                                                                                                                     Warning: resource services/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                         The Service \"nextcloud\" is invalid: spec.ports[1].name: Duplicate value: \"http\"
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211330
- command: ices/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                         The Service \"nextcloud\" is invalid: spec.ports[0].name: Required value                                                                                                                                                                                                                  clounano$ kubectl apply -f service.yaml                                                                                                                                                                                                                                                 cloudshell-user@:~~ $ nano ingress.yaml                                                                                                                                                                                                                                                 cloudshell-user@:~~ $ kubectl apply -f ingress.yaml                                                                                                                                                                                                                                     ingress.networking.k8s.io/nextcloud configured                                                                                                                                                                                                                                          cloudshell-user@:~~ $ nano service.yaml                                                                                                                                                                                                                                                 cloudshell-user@:~~ $ kubectl apply -f service.yaml                                                                                                                                                                                                                                     Warning: resource services/nextcloud is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                         The Service \"nextcloud\" is invalid: spec.ports[1].name: Duplicate value: \"http\"                                                                                                                                                                                                         cloudshell-user@:~~ $ nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211392
- command: kubectl delete service nextcloud -n nextcloud                                                                                                                                                                                                                     service \"nextcloud\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211400
- command: kubectl apply -f service.yaml                                                                                                                                                                                                                                     service/nextcloud created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211404
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211410
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211425
- command: nano cluster-issuer.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211680
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211717
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211754
- command: nano namespace.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211778
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211807
- command: secret.yaml                                                                                                                                                                                                                                                       bash: secret.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211810
- command: nano secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211834
- command: service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747211861
- command: kubectl get storageclass                                                                                                                                                                                                                                          NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                                                                                      efs-sc   efs.csi.aws.com         Retain          Immediate              false                  17h                                                                                                                                                                                      gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  17h
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212016
- command: kubectl get all -n nextcloud                                                                                                                                                                                                                                     NAME                             READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                       pod/nextcloud-76465bbdf7-djbqf   1/1     Running   0          11m                                                                                                                                                                                                                       pod/nextcloud-mariadb-0          1/1     Running   0          87m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               NAME                        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE                                                                                                                                                                                                    service/nextcloud           ClusterIP   10.100.191.29   <none>        80/TCP     11m                                                                                                                                                                                                    service/nextcloud-mariadb   ClusterIP   10.100.4.131    <none>        3306/TCP   87m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            NAME                        READY   UP-TO-DATE   AVAILABLE   AGE                                                                                                                                                                                                                        deployment.apps/nextcloud   1/1     1            1           80m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                NAME                                   DESIRED   CURRENT   READY   AGE                                                                                                                                                                                                                  replicaset.apps/nextcloud-5d94cc7865   0         0         0       80m                                                                                                                                                                                                                  replicaset.apps/nextcloud-69df6ffbf4   0         0         0       42m                                                                                                                                                                                                                  replicaset.apps/nextcloud-76465bbdf7   1         1         1       11m                                                                                                                                                                                                                  replicaset.apps/nextcloud-7fdf8bc775   0         0         0       48m                                                                                                                                                                                                                  replicaset.apps/nextcloud-8466466548   0         0         0       36m                                                                                                                                                                                                                  replicaset.apps/nextcloud-b9b79f699    0         0         0       63m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          NAME                                 READY   AGE                                                                                                                                                                                                                                        statefulset.apps/nextcloud-mariadb   1/1     87m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212111
- command: kubectl get svc -n nextcloud                                                                                                                                                                                                                                      NAME                TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE                                                                                                                                                                                                            nextcloud           ClusterIP   10.100.191.29   <none>        80/TCP     12m                                                                                                                                                                                                            nextcloud-mariadb   ClusterIP   10.100.4.131    <none>        3306/TCP   88m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212141
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212358
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212556
- command: kubectl apply -f deployment.yaml                                                                                                                                                                                                                                  deployment.apps/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212564
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7cd689955c-5zckh   1/1     Running   0          74s                                                                                                                                                                                                                           nextcloud-mariadb-0          1/1     Running   0          96m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212638
- command: kubectl get secret nextcloud-db-secret -n nextcloud -o jsonpath=\"{.data.password}\" | base64 -d && echo                                                                                                                                                            nextcloud123
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212733
- command: kubectl exec -it nextcloud-mariadb-0 -n nextcloud -- bash                                                                                                                                                                                                         Defaulted container \"mariadb\" out of: mariadb, preserve-logs-symlinks (init)                                                                                                                                                                                                            I have no name!@nextcloud-mariadb-0:/$ mysql -u root -p                                                                                                                                                                                                                                 mysql: Deprecated program name. It will be removed in a future release, use '/opt/bitnami/mariadb/bin/mariadb' instead                                                                                                                                                                  Enter password:                                                                                                                                                                                                                                                                         ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)                                                                                                                                                                                                     I have no name!@nextcloud-mariadb-0:/$ mysql -u root -p                                                                                                                                                                                                                                 mysql: Deprecated program name. It will be removed in a future release, use '/opt/bitnami/mariadb/bin/mariadb' instead                                                                                                                                                                  Enter password:                                                                                                                                                                                                                                                                         ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)                                                                                                                                                                                                     I have no name!@nextcloud-mariadb-0:/$ ls                                                                                                                                                                                                                                               bin  bitnami  boot  dev  docker-entrypoint-initdb.d  etc  home\t lib  lib64  media  mnt\t opt  proc  root  run  sbin  srv  sys  tmp  usr\t var                                                                                                                                             I have no name!@nextcloud-mariadb-0:/$ ^C                                                                                                                                                                                                                                               I have no name!@nextcloud-mariadb-0:/$ ^C                                                                                                                                                                                                                                               I have no name!@nextcloud-mariadb-0:/$ ls                                                                                                                                                                                                                                               bin  bitnami  boot  dev  docker-entrypoint-initdb.d  etc  home\t lib  lib64  media  mnt\t opt  proc  root  run  sbin  srv  sys  tmp  usr\t var                                                                                                                                             I have no name!@nextcloud-mariadb-0:/$ kubectl get secrets -n nextcloud                                                                                                                                                                                                                 bash: kubectl: command not found                                                                                                                                                                                                                                                        I have no name!@nextcloud-mariadb-0:/$ exit                                                                                                                                                                                                                                             exit                                                                                                                                                                                                                                                                                    command terminated with exit code 127
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212918
- command: kubectl get secrets -n nextcloud                                                                                                                                                                                                                                  NAME                              TYPE                 DATA   AGE                                                                                                                                                                                                                       nextcloud                         Opaque               2      101m                                                                                                                                                                                                                      nextcloud-db                      Opaque               2      101m                                                                                                                                                                                                                      nextcloud-db-secret               Opaque               1      50m                                                                                                                                                                                                                       nextcloud-mariadb                 Opaque               2      101m                                                                                                                                                                                                                      nextcloud-tls                     kubernetes.io/tls    2      80m                                                                                                                                                                                                                       sh.helm.release.v1.nextcloud.v1   helm.sh/release.v1   1      101m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212919
- command: nano nextcloud-mariodb
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212974
- command: nano nextcloud-mariadb
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212980
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747212991
- command: kubectl get secret nextcloud-mariadb -n nextcloud -o jsonpath=\"{.data.mariadb-root-password}\" | base64 -d && echo                                                                                                                                                 rsbfbuZDfY
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213001
- command: kubectl exec -it nextcloud-mariadb-0 -n nextcloud -- bash                                                                                                                                                                                                         Defaulted container \"mariadb\" out of: mariadb, preserve-logs-symlinks (init)                                                                                                                                                                                                            I have no name!@nextcloud-mariadb-0:/$ /opt/bitnami/mariadb/bin/mysql -u root -p                                                                                                                                                                                                        /opt/bitnami/mariadb/bin/mysql: Deprecated program name. It will be removed in a future release, use '/opt/bitnami/mariadb/bin/mariadb' instead                                                                                                                                         Enter password:                                                                                                                                                                                                                                                                         Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                                             Your MariaDB connection id is 1228                                                                                                                                                                                                                                                      Server version: 11.3.2-MariaDB Source distribution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MariaDB [(none)]> CREATE DATABASE IF NOT EXISTS nextcloud;                                                                                                                                                                                                                              Query OK, 0 rows affected, 1 warning (0.000 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                MariaDB [(none)]> CREATE USER 'nextcloud'@'%' IDENTIFIED BY 'nextcloud123';                                                                                                                                                                                                             ERROR 1396 (HY000): Operation CREATE USER failed for 'nextcloud'@'%'                                                                                                                                                                                                                    MariaDB [(none)]> GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'%';                                                                                                                                                                                                               Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> FLUSH PRIVILEGES;                                                                                                                                                                                                                                                     Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> exit                                                                                                                                                                                                                                                                  Bye                                                                                                                                                                                                                                                                                     I have no name!@nextcloud-mariadb-0:/$ ^C                                                                                                                                                                                                                                               I have no name!@nextcloud-mariadb-0:/$ exit                                                                                                                                                                                                                                             exit                                                                                                                                                                                                                                                                                    command terminated with exit code 130
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213138
- command: ~ $ kubectl exec -it nextcloud-mariadb-0 -n nextcloud -- bash                                                                                                                                                                                                     bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Defaulted container \"mariadb\" out of: mariadb, preserve-logs-symlinks (init)                                                                                                                                                                                      bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: /opt/bitnami/mariadb/bin/mysql: Deprecated program name. It will be removed in a future release, use '/opt/bitnami/mariadb/bin/mariadb' instead                                                                                                                                     bash: /opt/bitnami/mariadb/bin/mysql:: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Enter password:                                                                                                                                                                                                                                                   bash: Enter: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                       bash: Welcome: command not found                                                                                                                                                                                                                                                        bash: or: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Your MariaDB connection id is 1228                                                                                                                                                                                                                                bash: Your: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Server version: 11.3.2-MariaDB Source distribution                                                                                                                                                                                                                bash: Server: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                              bash: syntax error near unexpected token `c'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213141
- command: Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                    bash: Type: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: MariaDB [(none)]> CREATE DATABASE IF NOT EXISTS nextcloud;                                                                                                                                                                                                        bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: Query OK, 0 rows affected, 1 warning (0.000 sec)                                                                                                                                                                                                                  bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: MariaDB [(none)]> CREATE USER 'nextcloud'@'%' IDENTIFIED BY 'nextcloud123';                                                                                                                                                                                       bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: ERROR 1396 (HY000): Operation CREATE USER failed for 'nextcloud'@'%'                                                                                                                                                                                              bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: MariaDB [(none)]> GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'%';                                                                                                                                                                                         bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                             bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: MariaDB [(none)]> FLUSH PRIVILEGES;                                                                                                                                                                                                                               bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                             bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213142
- command: MariaDB [(none)]> ~ $ kubectl exec -it nextcloud-mariadb-0 -n nextcloud -- bash                                                                                                                                                                                   bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Defaulted container \"mariadb\" out of: mariadb, preserve-logs-symlinks (init)                                                                                                                                                                                      bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: /opt/bitnami/mariadb/bin/mysql: Deprecated program name. It will be removed in a future release, use '/opt/bitnami/mariadb/bin/mariadb' instead                                                                                                                                     bash: /opt/bitnami/mariadb/bin/mysql:: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Enter password:                                                                                                                                                                                                                                                   bash: Enter: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                       bash: Welcome: command not found                                                                                                                                                                                                                                                        bash: or: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Your MariaDB connection id is 1228                                                                                                                                                                                                                                bash: Your: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Server version: 11.3.2-MariaDB Source distribution                                                                                                                                                                                                                bash: Server: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                              bash: syntax error near unexpected token `c'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                    bash: Type: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: MariaDB [(none)]> CREATE DATABASE IF NOT EXISTS nextcloud;                                                                                                                                                                                                        bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Query OK, 0 rows affected, 1 warning (0.000 sec)                                                                                                                                                                                                                  bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: MariaDB [(none)]> CREATE USER 'nextcloud'@'%' IDENTIFIED BY 'nextcloud123';                                                                                                                                                                                       bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: ERROR 1396 (HY000): Operation CREATE USER failed for 'nextcloud'@'%'                                                                                                                                                                                              bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: MariaDB [(none)]> GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'%';                                                                                                                                                                                         bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                             bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: MariaDB [(none)]> FLUSH PRIVILEGES;                                                                                                                                                                                                                               bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                             bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213156
- command: MariaDB [(none)]> exit                                                                                                                                                                                                                                            bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213158
- command: kubectl delete pod -l app=nextcloud -n nextcloud                                                                                                                                                                                                                  pod \"nextcloud-7cd689955c-5zckh\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213165
- command: kubectl get pods                                                                                                                                                                                                                                                  NAME                                    READY   STATUS                       RESTARTS         AGE                                                                                                                                                                                       my-release-nextcloud-55cf8b56fc-hqwpt   0/2     CreateContainerConfigError   43 (2m39s ago)   122m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213180
- command: kubectl get pods                                                                                                                                                                                                                                                  NAME                                    READY   STATUS                       RESTARTS        AGE                                                                                                                                                                                        my-release-nextcloud-55cf8b56fc-hqwpt   0/2     CreateContainerConfigError   43 (3m5s ago)   123m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213206
- command: kubectl get deployments -n nextcloud                                                                                                                                                                                                                              NAME        READY   UP-TO-DATE   AVAILABLE   AGE                                                                                                                                                                                                                                        nextcloud   1/1     1            1           99m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213290
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7cd689955c-ncfk2   1/1     Running   0          2m8s                                                                                                                                                                                                                          nextcloud-mariadb-0          1/1     Running   0          107m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213291
- command: kubectl get svc -n nextcloud                                                                                                                                                                                                                                      NAME                TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE                                                                                                                                                                                                            nextcloud           ClusterIP   10.100.191.29   <none>        80/TCP     31m                                                                                                                                                                                                            nextcloud-mariadb   ClusterIP   10.100.4.131    <none>        3306/TCP   107m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213292
- command: helm uninstall my-release -n nextcloud                                                                                                                                                                                                                            Error: uninstall: Release not loaded: my-release: release: not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213296
- command: kubectl apply -f deployment.yaml                                                                                                                                                                                                                                  deployment.apps/nextcloud unchanged
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213302
- command: kubectl get pods -n nextcloud -w                                                                                                                                                                                                                                  NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7cd689955c-ncfk2   1/1     Running   0          2m22s                                                                                                                                                                                                                         nextcloud-mariadb-0          1/1     Running   0          107m                                                                                                                                                                                                                          kubectl get deployment -n nextcloud                                                                                                                                                                                                                                                     ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213574
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213575
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213575
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213575
- command: kubectl get deployment -n nextcloud                                                                                                                                                                                                                               NAME        READY   UP-TO-DATE   AVAILABLE   AGE                                                                                                                                                                                                                                        nextcloud   1/1     1            1           104m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213577
- command: kubectl exec -it <pod-name> -n nextcloud -- printenv | grep MYSQL                                                                                                                                                                                                 bash: pod-name: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213587
- command: kubectl get pods                                                                                                                                                                                                                                                  NAME                                    READY   STATUS                       RESTARTS         AGE                                                                                                                                                                                       my-release-nextcloud-55cf8b56fc-hqwpt   0/2     CreateContainerConfigError   45 (3m19s ago)   129m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213600
- command: kubectl exec -it my-release-nextcloud-55cf8b56fc-hqwpt -n nextcloud -- printenv | grep MYSQL                                                                                                                                                                      Error from server (NotFound): pods \"my-release-nextcloud-55cf8b56fc-hqwpt\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213628
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7cd689955c-ncfk2   1/1     Running   0          9m10s                                                                                                                                                                                                                         nextcloud-mariadb-0          1/1     Running   0          114m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213713
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7cd689955c-ncfk2   1/1     Running   0          9m30s                                                                                                                                                                                                                         nextcloud-mariadb-0          1/1     Running   0          114m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213733
- command: kubectl exec -it nextcloud-7cd689955c-ncfk2 -n nextcloud -- printenv | grep MYSQL                                                                                                                                                                                 MYSQL_HOST=nextcloud-mariadb                                                                                                                                                                                                                                                            MYSQL_PASSWORD=nextcloud123                                                                                                                                                                                                                                                             MYSQL_DATABASE=nextcloud                                                                                                                                                                                                                                                                MYSQL_USER=nextcloud                                                                                                                                                                                                                                                                    NEXTCLOUD_MARIADB_SERVICE_PORT_MYSQL=3306
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747213757
- command: kubectl exec -it nextcloud-mariadb-0 -n nextcloud -- /opt/bitnami/mariadb/bin/mariadb -u root -p                                                                                                                                                                  Defaulted container \"mariadb\" out of: mariadb, preserve-logs-symlinks (init)                                                                                                                                                                                                            Enter password:                                                                                                                                                                                                                                                                         Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                                             Your MariaDB connection id is 1468                                                                                                                                                                                                                                                      Server version: 11.3.2-MariaDB Source distribution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MariaDB [(none)]> DROP USER IF EXISTS 'nextcloud'@'%';                                                                                                                                                                                                                                  Query OK, 0 rows affected (0.003 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> CREATE USER 'nextcloud'@'%' IDENTIFIED BY 'nextcloud123';                                                                                                                                                                                                             Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'%';                                                                                                                                                                                                               Query OK, 0 rows affected (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> FLUSH PRIVILEGES;                                                                                                                                                                                                                                                     Query OK, 0 rows affected (0.000 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> kubectl exec -it deploy/nextcloud -n nextcloud -- /bin/bash                                                                                                                                                                                                               -> ^C                                                                                                                                                                                                                                                                                   -> ^C                                                                                                                                                                                                                                                                                   -> apt update && apt install -y mariadb-client                                                                                                                                                                                                                                          -> exit                                                                                                                                                                                                                                                                                 -> mysql -h nextcloud-mariadb -u nextcloud -pnextcloud123 nextcloud                                                                                                                                                                                                                     -> exit                                                                                                                                                                                                                                                                                 -> ^C                                                                                                                                                                                                                                                                                   -> ^C                                                                                                                                                                                                                                                                                   -> ^C                                                                                                                                                                                                                                                                                   -> ^C                                                                                                                                                                                                                                                                                   -> exit                                                                                                                                                                                                                                                                                 -> exit;                                                                                                                                                                                                                                                                            ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'kubectl exec -it deploy/nextcloud -n nextcloud                                                                             apt update && apt install -y ...' at line 1                                                                                                                                                                                                                                             MariaDB [(none)]> kubectl exec -it deploy/nextcloud -n nextcloud -- /bin/bash                                                                                                                                                                                                               -> apt update && apt install -y mariadb-client                                                                                                                                                                                                                                          -> mysql -h nextcloud-mariadb -u nextcloud -pnextcloud123 nextcloud                                                                                                                                                                                                                     -> exit;                                                                                                                                                                                                                                                                            ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'kubectl exec -it deploy/nextcloud -n nextcloud                                                                             apt update && apt install -y ...' at line 1                                                                                                                                                                                                                                             MariaDB [(none)]> ^C                                                                                                                                                                                                                                                                    MariaDB [(none)]> exit                                                                                                                                                                                                                                                                  Bye
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214391
- command: nano init.sql
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214653
- command: nano mariadb-init-configmap.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214679
- command: kubectl apply -f mariadb-init-configmap.yaml                                                                                                                                                                                                                      configmap/mariadb-init-script created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214683
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214751
- command: nano statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214823
- command: kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         Warning: resource statefulsets/nextcloud-mariadb is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                             The StatefulSet \"nextcloud-mariadb\" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'ordinals', 'template', 'updateStrategy', 'persistentVolumeClaimRetentionPolicy' and 'minReadySeconds' are forbidden
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214828
- command: kubectl delete statefulset nextcloud-mariadb -n nextcloud                                                                                                                                                                                                         statefulset.apps \"nextcloud-mariadb\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214917
- command: kubectl delete pvc -n nextcloud -l app=nextcloud-mariadb                                                                                                                                                                                                          No resources found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214918
- command: kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         statefulset.apps/nextcloud-mariadb created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214926
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                          Error from server (NotFound): persistentvolumeclaims \"data-nextcloud-mariadb-0\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214968
- command: kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         statefulset.apps/nextcloud-mariadb configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214974
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS             RESTARTS      AGE                                                                                                                                                                                                               nextcloud-7cd689955c-ncfk2   1/1     Running            0             30m                                                                                                                                                                                                               nextcloud-mariadb-0          0/1     CrashLoopBackOff   2 (17s ago)   55s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747214981
- command: kubectl logs nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                     mariadb 09:29:50.44 INFO  ==>                                                                                                                                                                                                                                                           mariadb 09:29:50.44 INFO  ==> Welcome to the Bitnami mariadb container                                                                                                                                                                                                                  mariadb 09:29:50.44 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers                                                                                                                                                                            mariadb 09:29:50.44 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.                                                                                                                                                                                                                    mariadb 09:29:50.44 INFO  ==>                                                                                                                                                                                                                                                           mariadb 09:29:50.45 INFO  ==> ** Starting MariaDB setup **                                                                                                                                                                                                                              mariadb 09:29:50.46 INFO  ==> Validating settings in MYSQL_*/MARIADB_* env vars                                                                                                                                                                                                         mariadb 09:29:50.47 INFO  ==> Initializing mariadb database                                                                                                                                                                                                                             mkdir: cannot create directory '/bitnami/mariadb/data': Permission denied
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215013
- command: tcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS             RESTARTS      AGE                                                                                                                                                                                                               nextcloud-7cd689955c-ncfk2   1/1     Running            0             31m                                                                                                                                                                                                               nextcloud-mariadb-0          0/1     CrashLoopBackOff   3 (35s ago)   99s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215025
- command: ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'kubectl exec -it deploy/nextcloud -n nextcloud                                                                             apt update && apt install -y ...' at line 1                                                                                                                                                                                                                                             MariaDB [(none)]> ^C                                                                                                                                                                                                                                                                    MariaDB [(none)]> exit                                                                                                                                                                                                                                                                  Bye                                                                                                                                                                                                                                                                                     ~ $ nano init.sql                                                                                                                                                                                                                                                                       cloudshell-user@:~~ $ nano mariadb-init-configmap.yaml                                                                                                                                                                                                                                  cloudshell-user@:~~ $ kubectl apply -f mariadb-init-configmap.yaml                                                                                                                                                                                                                      configmap/mariadb-init-script created                                                                                                                                                                                                                                                   cloudshell-user@:~~ $ ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml                                                                                                                                          cloudshell-user@:~~ $ nano statefulset-mariadb.yaml                                                                                                                                                                                                                                     cloudshell-user@:~~ $ kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         Warning: resource statefulsets/nextcloud-mariadb is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                             The StatefulSet \"nextcloud-mariadb\" is invalid: spec: Forbidden: updates to statefulset spec for fields other than 'replicas', 'ordinals', 'template', 'updateStrategy', 'persistentVolumeClaimRetentionPolicy' and 'minReadySeconds' are forbidden                                     cloudshell-user@:~~ $ kubectl delete statefulset nextcloud-mariadb -n nextcloud                                                                                                                                                                                                         statefulset.apps \"nextcloud-mariadb\" deleted                                                                                                                                                                                                                                            cloudshell-user@:~~ $ kubectl delete pvc -n nextcloud -l app=nextcloud-mariadb                                                                                                                                                                                                          No resources found                                                                                                                                                                                                                                                                      cloudshell-user@:~~ $ kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         statefulset.apps/nextcloud-mariadb created                                                                                                                                                                                                                                              cloudshell-user@:~~ $ kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                          Error from server (NotFound): persistentvolumeclaims \"data-nextcloud-mariadb-0\" not found                                                                                                                                                                                               cloudshell-user@:~~ $ kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         statefulset.apps/nextcloud-mariadb configured                                                                                                                                                                                                                                           cloudshell-user@:~~ $ kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS             RESTARTS      AGE                                                                                                                                                                                                               nextcloud-7cd689955c-ncfk2   1/1     Running            0             30m                                                                                                                                                                                                               nextcloud-mariadb-0          0/1     CrashLoopBackOff   2 (17s ago)   55s                                                                                                                                                                                                               cloudshell-user@:~~ $ kubectl logs nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                     mariadb 09:29:50.44 INFO  ==>                                                                                                                                                                                                                                                           mariadb 09:29:50.44 INFO  ==> Welcome to the Bitnami mariadb container                                                                                                                                                                                                                  mariadb 09:29:50.44 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers                                                                                                                                                                            mariadb 09:29:50.44 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.                                                                                                                                                                                                                    mariadb 09:29:50.44 INFO  ==>                                                                                                                                                                                                                                                           mariadb 09:29:50.45 INFO  ==> ** Starting MariaDB setup **                                                                                                                                                                                                                              mariadb 09:29:50.46 INFO  ==> Validating settings in MYSQL_*/MARIADB_* env vars                                                                                                                                                                                                         mariadb 09:29:50.47 INFO  ==> Initializing mariadb database                                                                                                                                                                                                                             mkdir: cannot create directory '/bitnami/mariadb/data': Permission denied                                                                                                                                                                                                               cloudshell-uget podsextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS             RESTARTS      AGE                                                                                                                                                                                                               nextcloud-7cd689955c-ncfk2   1/1     Running            0             31m                                                                                                                                                                                                               nextcloud-mariadb-0          0/1     CrashLoopBackOff   3 (35s ago)   99s                                                                                                                                                                                                               cloudshell-user@:~~ $ nano statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215170
- command: kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                                                                                         statefulset.apps/nextcloud-mariadb configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215174
- command: kubectl delete pod nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                               pod \"nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215179
- command: kubectl logs nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                     mariadb 09:33:00.62 INFO  ==>                                                                                                                                                                                                                                                           mariadb 09:33:00.62 INFO  ==> Welcome to the Bitnami mariadb container                                                                                                                                                                                                                  mariadb 09:33:00.62 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers                                                                                                                                                                            mariadb 09:33:00.63 INFO  ==> Did you know there are enterprise versions of the Bitnami catalog? For enhanced secure software supply chain features, unlimited pulls from Docker, LTS support, or application customization, see Bitnami Premium or Tanzu Application Catalog. See https://www.arrow.com/globalecs/na/vendors/bitnami/ for more information.                                                                                                                                                                                                                    mariadb 09:33:00.63 INFO  ==>                                                                                                                                                                                                                                                           mariadb 09:33:00.63 INFO  ==> ** Starting MariaDB setup **                                                                                                                                                                                                                              mariadb 09:33:00.65 INFO  ==> Validating settings in MYSQL_*/MARIADB_* env vars                                                                                                                                                                                                         mariadb 09:33:00.65 INFO  ==> Initializing mariadb database                                                                                                                                                                                                                             mariadb 09:33:00.66 INFO  ==> Updating 'my.cnf' with custom configuration                                                                                                                                                                                                               mariadb 09:33:00.67 INFO  ==> Setting slow_query_log option                                                                                                                                                                                                                             mariadb 09:33:00.67 INFO  ==> Setting long_query_time option                                                                                                                                                                                                                            mariadb 09:33:00.68 INFO  ==> Installing database                                                                                                                                                                                                                                       /opt/bitnami/mariadb/bin/mysql: Deprecated program name. It will be removed in a future release, use '/opt/bitnami/mariadb/bin/mariadb' instead                                                                                                                                         mariadb 09:33:03.20 INFO  ==> Starting mariadb in background                                                                                                                                                                                                                            2025-05-14  9:33:03 0 [Note] Starting MariaDB 11.4.6-MariaDB source revision 63a5552e76feb60ff62725e0274268e35e7a77e8 server_uid K7xFFzqXR+xkezMIiDve83xGQbw= as process 98                                                                                                             2025-05-14  9:33:03 0 [Note] InnoDB: Compressed tables use zlib 1.2.13                                                                                                                                                                                                                  2025-05-14  9:33:03 0 [Note] InnoDB: Number of transaction pools: 1                                                                                                                                                                                                                     2025-05-14  9:33:03 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions                                                                                                                                                                                                               2025-05-14  9:33:03 0 [Note] mysqld: O_TMPFILE is not supported on /opt/bitnami/mariadb/tmp (disabling future attempts)                                                                                                                                                                 2025-05-14  9:33:03 0 [Note] InnoDB: Using Linux native AIO                                                                                                                                                                                                                             2025-05-14  9:33:03 0 [Note] InnoDB: innodb_buffer_pool_size_max=128m, innodb_buffer_pool_size=128m                                                                                                                                                                                     2025-05-14  9:33:03 0 [Note] InnoDB: Completed initialization of buffer pool                                                                                                                                                                                                            2025-05-14  9:33:03 0 [Note] InnoDB: File system buffers for log disabled (block size=512 bytes)                                                                                                                                                                                        2025-05-14  9:33:03 0 [Note] InnoDB: End of log at LSN=47763                                                                                                                                                                                                                            2025-05-14  9:33:03 0 [Note] InnoDB: Opened 3 undo tablespaces                                                                                                                                                                                                                          2025-05-14  9:33:03 0 [Note] InnoDB: 128 rollback segments in 3 undo tablespaces are active.                                                                                                                                                                                            2025-05-14  9:33:03 0 [Note] InnoDB: Setting file './ibtmp1' size to 12.000MiB. Physically writing the file full; Please wait ...                                                                                                                                                       2025-05-14  9:33:03 0 [Note] InnoDB: File './ibtmp1' size is now 12.000MiB.                                                                                                                                                                                                             2025-05-14  9:33:03 0 [Note] InnoDB: log sequence number 47763; transaction id 14                                                                                                                                                                                                       2025-05-14  9:33:03 0 [Note] InnoDB: Loading buffer pool(s) from /bitnami/mariadb/data/ib_buffer_pool                                                                                                                                                                                   2025-05-14  9:33:03 0 [Note] Plugin 'FEEDBACK' is disabled.                                                                                                                                                                                                                             2025-05-14  9:33:03 0 [Note] Plugin 'wsrep-provider' is disabled.                                                                                                                                                                                                                       2025-05-14  9:33:03 0 [Note] InnoDB: Buffer pool(s) load completed at 250514  9:33:03
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215183
- command: kubectl exec -it nextcloud-mariadb-0 -n nextcloud -- /opt/bitnami/mariadb/bin/mariadb -u root -prootpass123                                                                                                                                                       Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                                             Your MariaDB connection id is 3                                                                                                                                                                                                                                                         Server version: 11.4.6-MariaDB Source distribution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MariaDB [(none)]> SHOW DATABASES;                                                                                                                                                                                                                                                       +--------------------+                                                                                                                                                                                                                                                                  | Database           |                                                                                                                                                                                                                                                                  +--------------------+                                                                                                                                                                                                                                                                  | information_schema |                                                                                                                                                                                                                                                                  | mysql              |                                                                                                                                                                                                                                                                  | nextcloud          |                                                                                                                                                                                                                                                                  | performance_schema |                                                                                                                                                                                                                                                                  | sys                |                                                                                                                                                                                                                                                                  | test               |                                                                                                                                                                                                                                                                  +--------------------+                                                                                                                                                                                                                                                                  6 rows in set (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       MariaDB [(none)]> SELECT User, Host FROM mysql.user WHERE User = 'nextcloud';                                                                                                                                                                                                           +-----------+------+                                                                                                                                                                                                                                                                    | User      | Host |                                                                                                                                                                                                                                                                    +-----------+------+                                                                                                                                                                                                                                                                    | nextcloud | %    |                                                                                                                                                                                                                                                                    +-----------+------+                                                                                                                                                                                                                                                                    1 row in set (0.002 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        MariaDB [(none)]> exit                                                                                                                                                                                                                                                                  Bye
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215254
- command: kubectl delete pod -l app=nextcloud -n nextcloud                                                                                                                                                                                                                  pod \"nextcloud-7cd689955c-ncfk2\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215259
- command: kubectl logs -n nextcloud deploy/nextcloud                                                                                                                                                                                                                        => Searching for scripts (*.sh) to run, located in the folder: /docker-entrypoint-hooks.d/before-starting                                                                                                                                                                               AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.40.123. Set the 'ServerName' directive globally to suppress this message                                                                                                         AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.40.123. Set the 'ServerName' directive globally to suppress this message                                                                                                         [Wed May 14 09:34:19.175033 2025] [mpm_prefork:notice] [pid 1:tid 1] AH00163: Apache/2.4.62 (Debian) PHP/8.2.27 configured -- resuming normal operations                                                                                                                                [Wed May 14 09:34:19.175289 2025] [core:notice] [pid 1:tid 1] AH00094: Command line: 'apache2 -D FOREGROUND'                                                                                                                                                                            213.183.191.98 - - [14/May/2025:09:34:40 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:34:40 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                               213.183.191.98 - - [14/May/2025:09:34:47 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:34:47 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                               213.183.191.98 - - [14/May/2025:09:34:48 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:34:50 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215325
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                           nextcloud-7cd689955c-dfnhz   1/1     Running   0          2m55s                                                                                                                                                                                                                         nextcloud-mariadb-0          1/1     Running   0          4m14s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215433
- command: kubectl logs -n nextcloud deploy/nextcloud-mariadb                                                                                                                                                                                                                error: error from server (NotFound): deployments.apps \"nextcloud-mariadb\" not found in namespace \"nextcloud\"
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215443
- command: kubectl get statefulsets -n nextcloud                                                                                                                                                                                                                             NAME                READY   AGE                                                                                                                                                                                                                                                         nextcloud-mariadb   1/1     8m51s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215457
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215510
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215510
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215510
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215510
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215511
- command: kubectl logs -n nextcloud deploy/nextcloud                                                                                                                                                                                                                        => Searching for scripts (*.sh) to run, located in the folder: /docker-entrypoint-hooks.d/before-starting                                                                                                                                                                               AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.40.123. Set the 'ServerName' directive globally to suppress this message                                                                                                         AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 192.168.40.123. Set the 'ServerName' directive globally to suppress this message                                                                                                         [Wed May 14 09:34:19.175033 2025] [mpm_prefork:notice] [pid 1:tid 1] AH00163: Apache/2.4.62 (Debian) PHP/8.2.27 configured -- resuming normal operations                                                                                                                                [Wed May 14 09:34:19.175289 2025] [core:notice] [pid 1:tid 1] AH00094: Command line: 'apache2 -D FOREGROUND'                                                                                                                                                                            213.183.191.98 - - [14/May/2025:09:34:40 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:34:40 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                               213.183.191.98 - - [14/May/2025:09:34:47 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:34:47 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                               213.183.191.98 - - [14/May/2025:09:34:48 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:34:50 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                               213.183.191.98 - - [14/May/2025:09:36:47 +0000] \"GET / HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"                                                                                          213.183.191.98 - - [14/May/2025:09:36:48 +0000] \"GET /favicon.ico HTTP/1.1\" 500 702 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36\"
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215537
- command: kubectl exec -n nextcloud -it nextcloud-mariadb-0 -- mariadb -u root -p                                                                                                                                                                                           Enter password:                                                                                                                                                                                                                                                                         ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)                                                                                                                                                                                                     command terminated with exit code 1
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215647
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215648
- command: kubectl exec -n nextcloud -it nextcloud-mariadb-0 -- mariadb -u root -p                                                                                                                                                                                           Enter password:                                                                                                                                                                                                                                                                         ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)                                                                                                                                                                                                     command terminated with exit code 1
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215661
- command: kubectl describe deploy nextcloud -n nextcloud                                                                                                                                                                                                                    Name:                   nextcloud                                                                                                                                                                                                                                                       Namespace:              nextcloud                                                                                                                                                                                                                                                       CreationTimestamp:      Wed, 14 May 2025 07:21:41 +0000                                                                                                                                                                                                                                 Labels:                 <none>                                                                                                                                                                                                                                                          Annotations:            deployment.kubernetes.io/revision: 7                                                                                                                                                                                                                            Selector:               app=nextcloud                                                                                                                                                                                                                                                   Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable                                                                                                                                                                                                   StrategyType:           RollingUpdate                                                                                                                                                                                                                                                   MinReadySeconds:        0                                                                                                                                                                                                                                                               RollingUpdateStrategy:  25% max unavailable, 25% max surge                                                                                                                                                                                                                              Pod Template:                                                                                                                                                                                                                                                                             Labels:       app=nextcloud                                                                                                                                                                                                                                                             Annotations:  kubectl.kubernetes.io/restartedAt: 2025-05-14T08:30:10Z                                                                                                                                                                                                                   Containers:                                                                                                                                                                                                                                                                              nextcloud:                                                                                                                                                                                                                                                                               Image:      nextcloud:28                                                                                                                                                                                                                                                                Port:       80/TCP                                                                                                                                                                                                                                                                      Host Port:  0/TCP                                                                                                                                                                                                                                                                       Environment:                                                                                                                                                                                                                                                                              MYSQL_PASSWORD:  <set to the key 'password' in secret 'nextcloud-db-secret'>  Optional: false                                                                                                                                                                                           MYSQL_DATABASE:  nextcloud                                                                                                                                                                                                                                                              MYSQL_USER:      nextcloud                                                                                                                                                                                                                                                              MYSQL_HOST:      nextcloud-mariadb                                                                                                                                                                                                                                                    Mounts:                                                                                                                                                                                                                                                                                   /var/www/html from nextcloud-storage (rw)                                                                                                                                                                                                                                           Volumes:                                                                                                                                                                                                                                                                                 nextcloud-storage:                                                                                                                                                                                                                                                                       Type:          PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)                                                                                                                                                                                     ClaimName:     nextcloud-data                                                                                                                                                                                                                                                           ReadOnly:      false                                                                                                                                                                                                                                                                  Node-Selectors:  <none>                                                                                                                                                                                                                                                                 Tolerations:     <none>                                                                                                                                                                                                                                                               Conditions:                                                                                                                                                                                                                                                                               Type           Status  Reason                                                                                                                                                                                                                                                           ----           ------  ------                                                                                                                                                                                                                                                           Progressing    True    NewReplicaSetAvailable                                                                                                                                                                                                                                           Available      True    MinimumReplicasAvailable                                                                                                                                                                                                                                       OldReplicaSets:  nextcloud-5d94cc7865 (0/0 replicas created), nextcloud-b9b79f699 (0/0 replicas created), nextcloud-7fdf8bc775 (0/0 replicas created), nextcloud-69df6ffbf4 (0/0 replicas created), nextcloud-8466466548 (0/0 replicas created), nextcloud-76465bbdf7 (0/0 replicas created)                                                                                                                                                                                                                                                                                    NewReplicaSet:   nextcloud-7cd689955c (1/1 replicas created)                                                                                                                                                                                                                            Events:                                                                                                                                                                                                                                                                                   Type    Reason             Age   From                   Message                                                                                                                                                                                                                         ----    ------             ----  ----                   -------                                                                                                                                                                                                                         Normal  ScalingReplicaSet  51m   deployment-controller  Scaled up replica set nextcloud-7cd689955c from 0 to 1                                                                                                                                                                          Normal  ScalingReplicaSet  51m   deployment-controller  Scaled down replica set nextcloud-76465bbdf7 from 1 to 0
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215665
- command: kubectl get secret nextcloud-db-secret -n nextcloud -o jsonpath=\"{.data.password}\" | base64 -d                                                                                                                                                                    nextcloud123
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215729
- command: nextcloud123                                                                                                                                                                                                                                          bash: nextcloud123: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215761
- command: kubectl get secret nextcloud-db-secret -n nextcloud -o jsonpath=\"{.data.password}\" | base64 -d                                                                                                                                                                    nextcloud123
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215765
- command: nextcloud                                                                                                                                                                                                                                             bash: nextcloud: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215768
- command: kubectl get secret nextcloud-db-secret -n nextcloud -o jsonpath=\"{.data.password}\" | base64 -d                                                                                                                                                                    nextcloud123
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215787
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215795
- command: kubectl exec -n nextcloud deploy/nextcloud -it -- bash                                                                                                                                                                                                            root@nextcloud-7cd689955c-dfnhz:/var/www/html# mariadb -h nextcloud-mariadb -u nextcloud -p                                                                                                                                                                                             Enter password:                                                                                                                                                                                                                                                                         ERROR 2002 (HY000): Can't connect to server on 'nextcloud-mariadb' (115)                                                                                                                                                                                                                root@nextcloud-7cd689955c-dfnhz:/var/www/html# mariadb -h nextcloud-mariadb -u nextcloud -p                                                                                                                                                                                             Enter password:                                                                                                                                                                                                                                                                         ERROR 2002 (HY000): Can't connect to server on 'nextcloud-mariadb' (115)                                                                                                                                                                                                                root@nextcloud-7cd689955c-dfnhz:/var/www/html# xit                                                                                                                                                                                                                                      bash: xit: command not found                                                                                                                                                                                                                                                            root@nextcloud-7cd689955c-dfnhz:/var/www/html# exit                                                                                                                                                                                                                                     exit                                                                                                                                                                                                                                                                                    command terminated with exit code 127
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215873
- command: kubectl get secret nextcloud-db-secret -n nextcloud -o jsonpath=\"{.data.password}\" | base64 -d                                                                                                                                                                    nextcloud123
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215878
- command: kubectl exec -n nextcloud deploy/nextcloud -it -- bash                                                                                                                                                                                                root@nextcloud-7cd689955c-dfnhz:/var/www/html# apt update && apt install mariadb-client -y                                                                                                                                                                                              Hit:1 http://deb.debian.org/debian bookworm InRelease                                                                                                                                                                                                                                   Hit:2 http://deb.debian.org/debian bookworm-updates InRelease                                                                                                                                                                                                                           Hit:3 http://deb.debian.org/debian-security bookworm-security InRelease                                                                                                                                                                                                                 Reading package lists... Done                                                                                                                                                                                                                                                           Building dependency tree... Done                                                                                                                                                                                                                                                        Reading state information... Done                                                                                                                                                                                                                                                       21 packages can be upgraded. Run 'apt list --upgradable' to see them.                                                                                                                                                                                                                   Reading package lists... Done                                                                                                                                                                                                                                                           Building dependency tree... Done                                                                                                                                                                                                                                                        Reading state information... Done                                                                                                                                                                                                                                                       mariadb-client is already the newest version (1:10.11.11-0+deb12u1).                                                                                                                                                                                                                    0 upgraded, 0 newly installed, 0 to remove and 21 not upgraded.                                                                                                                                                                                                                         root@nextcloud-7cd689955c-dfnhz:/var/www/html# mariadb -h nextcloud-mariadb -u nextcloud -p                                                                                                                                                                                             Enter password:                                                                                                                                                                                                                                                                         ERROR 2002 (HY000): Can't connect to server on 'nextcloud-mariadb' (115)                                                                                                                                                                                                                root@nextcloud-7cd689955c-dfnhz:/var/www/html# root@nextcloud-7cd689955c-dfnhz:/var/www/html# mariadb -h nextcloud-mariadb -u nextcloud -p                                                                                                                                              bash: root@nextcloud-7cd689955c-dfnhz:/var/www/html#: No such file or directory                                                                                                                                                                                                         root@nextcloud-7cd689955c-dfnhz:/var/www/html# Enter password:                                                                                                                                                                                                                          bash: Enter: command not found                                                                                                                                                                                                                                                          root@nextcloud-7cd689955c-dfnhz:/var/www/html# ERROR 2002 (HY000): Can't connect to server on 'nextcloud-mariadb' (115)                                                                                                                                                                 bash: syntax error near unexpected token `('                                                                                                                                                                                                                                            root@nextcloud-7cd689955c-dfnhz:/var/www/html# root@nextcloud-7cd689955c-dfnhz:/var/www/html# ex^C                                                                                                                                                                                      root@nextcloud-7cd689955c-dfnhz:/var/www/html# exit                                                                                                                                                                                                                                     exit                                                                                                                                                                                                                                                                                    command terminated with exit code 130
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215944
- command: kubectl get svc -n nextcloud                                                                                                                                                                                                                                      NAME                TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE                                                                                                                                                                                                            nextcloud           ClusterIP   10.100.191.29   <none>        80/TCP     75m                                                                                                                                                                                                            nextcloud-mariadb   ClusterIP   10.100.4.131    <none>        3306/TCP   151m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215949
- command: kubectl describe svc nextcloud-mariadb -n nextcloud                                                                                                                                                                                                               Name:                     nextcloud-mariadb                                                                                                                                                                                                                                             Namespace:                nextcloud                                                                                                                                                                                                                                                     Labels:                   app.kubernetes.io/component=primary                                                                                                                                                                                                                                                     app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=mariadb                                                                                                                                                                                                                                                          app.kubernetes.io/version=11.3.2                                                                                                                                                                                                                                                        helm.sh/chart=mariadb-18.2.0                                                                                                                                                                                                                                  Annotations:              meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                     Selector:                 app.kubernetes.io/component=primary,app.kubernetes.io/instance=nextcloud,app.kubernetes.io/name=mariadb                                                                                                                                                       Type:                     ClusterIP                                                                                                                                                                                                                                                     IP Family Policy:         SingleStack                                                                                                                                                                                                                                                   IP Families:              IPv4                                                                                                                                                                                                                                                          IP:                       10.100.4.131                                                                                                                                                                                                                                                  IPs:                      10.100.4.131                                                                                                                                                                                                                                                  Port:                     mysql  3306/TCP                                                                                                                                                                                                                                               TargetPort:               mysql/TCP                                                                                                                                                                                                                                                     Endpoints:                                                                                                                                                                                                                                                                              Session Affinity:         None                                                                                                                                                                                                                                                          Internal Traffic Policy:  Cluster                                                                                                                                                                                                                                                       Events:                   <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747215958
- command: kubectl exec -it -n nextcloud nextcloud-mariadb-0 -- bash                                                                                                                                                                                                         I have no name!@nextcloud-mariadb-0:/$ netstat -tuln | grep 3306                                                                                                                                                                                                                        bash: netstat: command not found                                                                                                                                                                                                                                                        I have no name!@nextcloud-mariadb-0:/$ ss -tuln | grep 3306                                                                                                                                                                                                                             bash: ss: command not found                                                                                                                                                                                                                                                             I have no name!@nextcloud-mariadb-0:/$ nslookup nextcloud-mariadb                                                                                                                                                                                                                       bash: nslookup: command not found                                                                                                                                                                                                                                                       I have no name!@nextcloud-mariadb-0:/$ exit                                                                                                                                                                                                                                             exit                                                                                                                                                                                                                                                                                    command terminated with exit code 127
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216003
- command: nslookup nextcloud-mariadb                                                                                                                                                                                                                                        bash: nslookup: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216003
- command: apt update && apt install dnsutils -y                                                                                                                                                                                                                             bash: apt: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216018
- command: kubectl exec -it -n nextcloud nextcloud-mariadb-0 -- bash                                                                                                                                                                                                         I have no name!@nextcloud-mariadb-0:/$ apt update && apt install dnsutils -y                                                                                                                                                                                                            Reading package lists... Done                                                                                                                                                                                                                                                           E: List directory /var/lib/apt/lists/partial is missing. - Acquire (2: No such file or directory)                                                                                                                                                                                       I have no name!@nextcloud-mariadb-0:/$ nslookup nextcloud-mariadb                                                                                                                                                                                                                       bash: nslookup: command not found                                                                                                                                                                                                                                                       I have no name!@nextcloud-mariadb-0:/$ kubectl get pod nextcloud-mariadb-0 -n nextcloud --show-labels                                                                                                                                                                                   bash: kubectl: command not found                                                                                                                                                                                                                                                        I have no name!@nextcloud-mariadb-0:/$ exit                                                                                                                                                                                                                                             exit                                                                                                                                                                                                                                                                                    command terminated with exit code 127
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216087
- command: kubectl get pod nextcloud-mariadb-0 -n nextcloud --show-labels                                                                                                                                                                                                    NAME                  READY   STATUS    RESTARTS   AGE   LABELS                                                                                                                                                                                                                         nextcloud-mariadb-0   1/1     Running   0          15m   app=nextcloud-mariadb,apps.kubernetes.io/pod-index=0,controller-revision-hash=nextcloud-mariadb-dfb44c594,statefulset.kubernetes.io/pod-name=nextcloud-mariadb-0
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216088
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216090
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216090
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216090
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216090
- command: kubectl get pod nextcloud-mariadb-0 -n nextcloud --show-labels                                                                                                                                                                                                    NAME                  READY   STATUS    RESTARTS   AGE   LABELS                                                                                                                                                                                                                         nextcloud-mariadb-0   1/1     Running   0          15m   app=nextcloud-mariadb,apps.kubernetes.io/pod-index=0,controller-revision-hash=nextcloud-mariadb-dfb44c594,statefulset.kubernetes.io/pod-name=nextcloud-mariadb-0
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216091
- command: kubectl label pod nextcloud-mariadb-0 \\                                                                                                                                                                                                                           >   app.kubernetes.io/component=primary \\                                                                                                                                                                                                                                               >   app.kubernetes.io/instance=nextcloud \\                                                                                                                                                                                                                                              >   app.kubernetes.io/name=mariadb \\                                                                                                                                                                                                                                                    >   -n nextcloud --overwrite                                                                                                                                                                                                                                                            pod/nextcloud-mariadb-0 labeled
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216218
- command: kubectl describe svc nextcloud-mariadb -n nextcloud                                                                                                                                                                                                               Name:                     nextcloud-mariadb                                                                                                                                                                                                                                             Namespace:                nextcloud                                                                                                                                                                                                                                                     Labels:                   app.kubernetes.io/component=primary                                                                                                                                                                                                                                                     app.kubernetes.io/instance=nextcloud                                                                                                                                                                                                                                                    app.kubernetes.io/managed-by=Helm                                                                                                                                                                                                                                                       app.kubernetes.io/name=mariadb                                                                                                                                                                                                                                                          app.kubernetes.io/version=11.3.2                                                                                                                                                                                                                                                        helm.sh/chart=mariadb-18.2.0                                                                                                                                                                                                                                  Annotations:              meta.helm.sh/release-name: nextcloud                                                                                                                                                                                                                                                    meta.helm.sh/release-namespace: nextcloud                                                                                                                                                                                                                     Selector:                 app.kubernetes.io/component=primary,app.kubernetes.io/instance=nextcloud,app.kubernetes.io/name=mariadb                                                                                                                                                       Type:                     ClusterIP                                                                                                                                                                                                                                                     IP Family Policy:         SingleStack                                                                                                                                                                                                                                                   IP Families:              IPv4                                                                                                                                                                                                                                                          IP:                       10.100.4.131                                                                                                                                                                                                                                                  IPs:                      10.100.4.131                                                                                                                                                                                                                                                  Port:                     mysql  3306/TCP                                                                                                                                                                                                                                               TargetPort:               mysql/TCP                                                                                                                                                                                                                                                     Endpoints:                192.168.8.240:3306                                                                                                                                                                                                                                            Session Affinity:         None                                                                                                                                                                                                                                                          Internal Traffic Policy:  Cluster                                                                                                                                                                                                                                                       Events:                   <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216222
- command: kubectl exec -it -n nextcloud deploy/nextcloud -- bash                                                                                                                                                                                                            extcloud -poud-7cd689955c-dfnhz:/var/www/html# mariadb -h nextcloud-mariadb -u ne                                                                                                                                                                                                       Enter password:                                                                                                                                                                                                                                                                         Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                                             Your MariaDB connection id is 6                                                                                                                                                                                                                                                         Server version: 11.4.6-MariaDB Source distribution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MariaDB [(none)]> exit                                                                                                                                                                                                                                                                  Bye                                                                                                                                                                                                                                                                                     root@nextcloud-7cd689955c-dfnhz:/var/www/html# exit                                                                                                                                                                                                                                     exit
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216345
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216346
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216600
- command: kubectl exec -it -n nextcloud deploy/nextcloud -- mariadb -h nextcloud-mariadb -u nextcloud -p                                                                                                                                                                    Enter password:                                                                                                                                                                                                                                                                         Welcome to the MariaDB monitor.  Commands end with ; or \\g.                                                                                                                                                                                                                             Your MariaDB connection id is 15                                                                                                                                                                                                                                                        Server version: 11.4.6-MariaDB Source distribution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MariaDB [(none)]> DROP DATABASE nextcloud;                                                                                                                                                                                                                                              Query OK, 0 rows affected (0.009 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> CREATE DATABASE nextcloud;                                                                                                                                                                                                                                            Query OK, 1 row affected (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            MariaDB [(none)]> DROP DATABASE nextcloud;                                                                                                                                                                                                                                              Query OK, 0 rows affected (0.004 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MariaDB [(none)]> CREATE DATABASE nextcloud;                                                                                                                                                                                                                                            Query OK, 1 row affected (0.001 sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            MariaDB [(none)]> exit                                                                                                                                                                                                                                                                  Bye
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216712
- command: kubectl exec -it -n nextcloud deploy/nextcloud -- bash                                                                                                                                                                                                            rm -rf /var/www/html/config/config.php                                                                                                                                                                                                                                                  rm -rf /var/www/html/data/*                                                                                                                                                                                                                                                             root@nextcloud-7cd689955c-dfnhz:/var/www/html# rm -rf /var/www/html/config/config.php                                                                                                                                                                                                   root@nextcloud-7cd689955c-dfnhz:/var/www/html# rm -rf /var/www/html/data/*                                                                                                                                                                                                              root@nextcloud-7cd689955c-dfnhz:/var/www/html# exit                                                                                                                                                                                                                                     exit
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216721
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216723
- command: kubectl exec -n nextcloud deploy/nextcloud -- rm /var/www/html/config/config.php                                                                                                                                                                                  rm: cannot remove '/var/www/html/config/config.php': No such file or directory                                                                                                                                                                                                          command terminated with exit code 1
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216785
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216796
- command: kubectl exec -n nextcloud deploy/nextcloud -- mariadb -h nextcloud-mariadb -u nextcloud -p                                                                                                                                                                        error: Internal error occurred: Internal error occurred: error executing command in container: failed to exec in container: failed to start exec \"70b06bbcd4ad80fe21762ab863dec4c71ab40ccbf46353fe77759d993388f648\": OCI runtime exec failed: exec failed: unable to start container process: exec: \"mariadb\": executable file not found in $PATH: unknown
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216838
- command: kubectl delete deployment nextcloud -n nextcloud                                                                                                                                                                                                                  deployment.apps \"nextcloud\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216913
- command: kubectl delete pvc nextcloud-data -n nextcloud                                                                                                                                                                                                                    persistentvolumeclaim \"nextcloud-data\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216916
- command: kubectl delete secret nextcloud-db-secret -n nextcloud                                                                                                                                                                                                            secret \"nextcloud-db-secret\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216917
- command: kubectl delete svc nextcloud -n nextcloud                                                                                                                                                                                                                         service \"nextcloud\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216918
- command: kubectl delete svc nextcloud-mariadb -n nextcloud                                                                                                                                                                                                                 service \"nextcloud-mariadb\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216918
- command: kubectl delete statefulset nextcloud-mariadb -n nextcloud                                                                                                                                                                                                         statefulset.apps \"nextcloud-mariadb\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216919
- command: kubectl delete pvc -l app=nextcloud-mariadb -n nextcloud                                                                                                                                                                                                          persistentvolumeclaim \"mariadb-data-nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216921
- command: kubectl delete deployment nextcloud -n nextcloud                                                                                                                                                                                                                  Error from server (NotFound): deployments.apps \"nextcloud\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216929
- command: kubectl delete pvc nextcloud-data -n nextcloud                                                                                                                                                                                                                    Error from server (NotFound): persistentvolumeclaims \"nextcloud-data\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216929
- command: kubectl delete secret nextcloud-db-secret -n nextcloud                                                                                                                                                                                                            Error from server (NotFound): secrets \"nextcloud-db-secret\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216931
- command: kubectl delete svc nextcloud -n nextcloud                                                                                                                                                                                                                         Error from server (NotFound): services \"nextcloud\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216932
- command: kubectl delete svc nextcloud-mariadb -n nextcloud                                                                                                                                                                                                                 Error from server (NotFound): services \"nextcloud-mariadb\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216933
- command: kubectl delete statefulset nextcloud-mariadb -n nextcloud                                                                                                                                                                                                         Error from server (NotFound): statefulsets.apps \"nextcloud-mariadb\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216934
- command: kubectl delete pvc -l app=nextcloud-mariadb -n nextcloud                                                                                                                                                                                                          No resources found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216935
- command: kubectl create secret generic nextcloud-db-secret \\                                                                                                                                                                                                               >   --from-literal=password=nextcloud123 \\                                                                                                                                                                                                                                              >   -n nextcloud                                                                                                                                                                                                                                                                        secret/nextcloud-db-secret created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216939
- command: ls                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216945
- command: mariadb.yaml                                                                                                                                                                                                                                                      bash: mariadb.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216954
- command: nano mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216960
- command: kubectl apply -f mariadb.yaml                                                                                                                                                                                                                                     statefulset.apps/nextcloud-mariadb created                                                                                                                                                                                                                                              service/nextcloud-mariadb created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216966
- command: kubectl port-forward svc/nextcloud -n nextcloud 8080:80                                                                                                                                                                                                           Error from server (NotFound): services \"nextcloud\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747216979
- command: 503 Service Temporarily Unavailable                                                                                                                                                                                                                                              bash: 503: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218392
- command: nginxkubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                     bash: nginxkubectl: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218394
- command: ex^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218397
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218397
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218397
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218397
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218397
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                          NAME                  READY   STATUS    RESTARTS   AGE   IP       NODE     NOMINATED NODE   READINESS GATES                                                                                                                                                                          nextcloud-mariadb-0   0/1     Pending   0          23m   <none>   <none>   <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218401
- command: kubectl get svc -n nextcloud                                                                                                                                                                                                                                   NAME                TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE                                                                                                                                                                                                         nextcloud-mariadb   ClusterIP   10.100.157.79   <none>        3306/TCP   24m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218416
- command: kubectl get ingress -n nextcloud                                                                                                                                                                                                                               NAME        CLASS   HOSTS                          ADDRESS                                                                            PORTS     AGE                                                                                                                                  nextcloud   nginx   nextcloud.ewe-netz-backup.de   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80, 443   3h12m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218425
- command: nano ingress.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218455
- command: ls                                                                                                                                                                                                                                                             cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  mariadb.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218457
- command: service.yaml                                                                                                                                                                                                                                                   bash: service.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218461
- command: nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218478
- command: kubectl get pods -n ingress-nginx                                                                                                                                                                                                                              NAME                                        READY   STATUS      RESTARTS   AGE                                                                                                                                                                                                       ingress-nginx-admission-create-f7mfm        0/1     Completed   0          3h1m                                                                                                                                                                                                      ingress-nginx-admission-patch-xzfvl         0/1     Completed   1          3h1m                                                                                                                                                                                                      ingress-nginx-controller-7bd4bbb674-t6h66   1/1     Running     0          3h1m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218483
- command: kubectl get svc -n ingress-nginx                                                                                                                                                                                                                               NAME                                 TYPE           CLUSTER-IP       EXTERNAL-IP                                                                        PORT(S)                      AGE                                                                                             ingress-nginx-controller             LoadBalancer   10.100.168.193   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80:30165/TCP,443:32547/TCP   3h1m                                                                                            ingress-nginx-controller-admission   ClusterIP      10.100.107.11    <none>                                                                             443/TCP                      3h1m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218495
- command: ~ $ kubectl get svc -n ingress-nginx                                                                                                                                                                                                                           bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218537
- command: NAME                                 TYPE           CLUSTER-IP       EXTERNAL-IP                                                                        PORT(S)                      AGE                                                                       bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218537
- command: ingress-nginx-controller             LoadBalancer   10.100.168.193   aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com   80:30165/TCP,443:32547/TCP   3h1m                                                                      bash: ingress-nginx-controller: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218537
- command: ingress-nginx-controller-admission   ClusterIP      10.100.107.11    <none>                                                                             443/TCP                      3h1m^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218539
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218539
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218539
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218539
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 26m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218541
- command: kubectl get storageclass                                                                                                                                                                                                                                       NAME     PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE                                                                                                                                                                                   efs-sc   efs.csi.aws.com         Retain          Immediate              false                  19h                                                                                                                                                                                   gp2      kubernetes.io/aws-ebs   Delete          WaitForFirstConsumer   false                  19h
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218554
- command: nano pcv.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218626
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218710
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                       persistentvolumeclaim \"data-nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218715
- command: kubectl rollout restart statefulset nextcloud-mariadb -n nextcloud                                                                                                                                                                                             statefulset.apps/nextcloud-mariadb restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218719
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 10s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218725
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 17s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218732
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 23s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218738
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 25s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218740
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 28s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218743
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 35s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218750
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 38s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218753
- command: GNU nano 8.3                                                                                                                          pvc.yaml                                                                                                                                                                                                                                                                                                                                                                                                    bash: GNU: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: # pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: apiVersion: v1                                                                                                                                                                                                                                                 bash: apiVersion:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: kind: PersistentVolumeClaim                                                                                                                                                                                                                                    bash: kind:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: metadata:                                                                                                                                                                                                                                                      bash: metadata:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: name: data-nextcloud-mariadb-0                                                                                                                                                                                                                               bash: name:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: namespace: nextcloud                                                                                                                                                                                                                                         bash: namespace:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: spec:                                                                                                                                                                                                                                                          bash: spec:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: accessModes:                                                                                                                                                                                                                                                 bash: accessModes:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: - ReadWriteOnce                                                                                                                                                                                                                                            bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: resources:                                                                                                                                                                                                                                                   bash: resources:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: requests:                                                                                                                                                                                                                                                  bash: requests:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: storage: 10Gi                                                                                                                                                                                                                                            bash: storage:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: storageClassName: gp2                                                                                                                                                                                                                                        bash: storageClassName:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218788
- command: ubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                        bash: ubectl: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218793
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                      Warning: resource persistentvolumeclaims/data-nextcloud-mariadb-0 is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                      The PersistentVolumeClaim \"data-nextcloud-mariadb-0\" is invalid: spec: Forbidden: spec is immutable after creation except resources.requests and volumeAttributesClassName for bound claims                                                                                            core.PersistentVolumeClaimSpec{                                                                                                                                                                                                                                                      \t     AccessModes: {\"ReadWriteOnce\"},                                                                                                                                                                                                                                                \t     Selector:    nil,                                                                                                                                                                                                                                                              \t     Resources: core.VolumeResourceRequirements{                                                                                                                                                                                                                                    \t     \t       Limits: nil,                                                                                                                                                                                                                                                         - \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                         - \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 1073741824}, s: \"1Gi\", Format: \"BinarySI\"},                                                                                                                                                                      - \t     \t       },                                                                                                                                                                                                                                                                   + \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                         + \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 10737418240}, s: \"10Gi\", Format: \"BinarySI\"},                                                                                                                                                                    + \t     \t       },                                                                                                                                                                                                                                                                     \t     },                                                                                                                                                                                                                                                                             \t     VolumeName:       \"\",                                                                                                                                                                                                                                                          \t     StorageClassName: nil,                                                                                                                                                                                                                                                         \t     ... // 4 identical fields                                                                                                                                                                                                                                                      }
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218797
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                       persistentvolumeclaim \"data-nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218804
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                      Warning: resource persistentvolumeclaims/data-nextcloud-mariadb-0 is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                      The PersistentVolumeClaim \"data-nextcloud-mariadb-0\" is invalid: spec: Forbidden: spec is immutable after creation except resources.requests and volumeAttributesClassName for bound claims                                                                                            core.PersistentVolumeClaimSpec{                                                                                                                                                                                                                                                      \t     AccessModes: {\"ReadWriteOnce\"},                                                                                                                                                                                                                                                \t     Selector:    nil,                                                                                                                                                                                                                                                              \t     Resources: core.VolumeResourceRequirements{                                                                                                                                                                                                                                    \t     \t       Limits: nil,                                                                                                                                                                                                                                                         - \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                         - \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 1073741824}, s: \"1Gi\", Format: \"BinarySI\"},                                                                                                                                                                      - \t     \t       },                                                                                                                                                                                                                                                                   + \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                         + \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 10737418240}, s: \"10Gi\", Format: \"BinarySI\"},                                                                                                                                                                    + \t     \t       },                                                                                                                                                                                                                                                                     \t     },                                                                                                                                                                                                                                                                             \t     VolumeName:       \"\",                                                                                                                                                                                                                                                          \t     StorageClassName: nil,                                                                                                                                                                                                                                                         \t     ... // 4 identical fields                                                                                                                                                                                                                                                      }
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218809
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                   data-nextcloud-mariadb-0   Pending                                                     <unset>                 19s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218823
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218874
- command: ml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218894
- command: ployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218940
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218965
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218972
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747218999
- command: apiVersion: apps/v1                                                                                                                                                                                                                                            bash: apiVersion:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: kind: Deployment                                                                                                                                                                                                                                               bash: kind:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: metadata:                                                                                                                                                                                                                                                      bash: metadata:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: name: nextcloud                                                                                                                                                                                                                                              bash: name:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: namespace: nextcloud                                                                                                                                                                                                                                         bash: namespace:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: spec:                                                                                                                                                                                                                                                          bash: spec:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: replicas: 1                                                                                                                                                                                                                                                  bash: replicas:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: selector:                                                                                                                                                                                                                                                    bash: selector:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: matchLabels:                                                                                                                                                                                                                                               bash: matchLabels:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: app: nextcloud                                                                                                                                                                                                                                           bash: app:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: template:                                                                                                                                                                                                                                                    bash: template:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: metadata:                                                                                                                                                                                                                                                  bash: metadata:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: labels:                                                                                                                                                                                                                                                  bash: labels:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: app: nextcloud                                                                                                                                                                                                                                         bash: app:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: spec:                                                                                                                                                                                                                                                      bash: spec:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: containers:                                                                                                                                                                                                                                              bash: containers:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: - name: nextcloud                                                                                                                                                                                                                                        bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: image: nextcloud:28                                                                                                                                                                                                                                    bash: image:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: ports:                                                                                                                                                                                                                                                 bash: ports:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: - containerPort: 80                                                                                                                                                                                                                                    bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: volumeMounts:                                                                                                                                                                                                                                          bash: volumeMounts:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: - mountPath: /var/www/html                                                                                                                                                                                                                             bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: name: nextcloud-storage                                                                                                                                                                                                                              bash: name:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: env:                                                                                                                                                                                                                                                   bash: env:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: - name: MYSQL_PASSWORD                                                                                                                                                                                                                                 bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: valueFrom:                                                                                                                                                                                                                                           bash: valueFrom:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: secretKeyRef:                                                                                                                                                                                                                                      bash: secretKeyRef:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: name: nextcloud-db-secret                                                                                                                                                                                                                        bash: name:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: key: password                                                                                                                                                                                                                                    bash: key:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: - name: MYSQL_DATABASE                                                                                                                                                                                                                                 bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: value: nextcloud                                                                                                                                                                                                                                     bash: value:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219010
- command: - name: MYSQL_USER                                                                                                                                                                                                                                     bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: value: nextcloud                                                                                                                                                                                                                                     bash: value:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: - name: MYSQL_HOST                                                                                                                                                                                                                                     bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: value: nextcloud-mariadb                                                                                                                                                                                                                             bash: value:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: volumes:                                                                                                                                                                                                                                                 bash: volumes:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: - name: nextcloud-storage                                                                                                                                                                                                                                bash: -: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: persistentVolumeClaim:                                                                                                                                                                                                                                 bash: persistentVolumeClaim:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219011
- command: claimName: nextcloud-mariadb^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219013
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                      persistentvolumeclaim/nextcloud-mariadb created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219016
- command: kubectl apply -f deployment.yaml                                                                                                                                                                                                                               deployment.apps/nextcloud created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219020
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                      deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219025
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                          NAME                         READY   STATUS              RESTARTS   AGE   IP       NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                nextcloud-69c8c757c7-qkl8w   0/1     ContainerCreating   0          11s   <none>   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                         nextcloud-7ccd4df64f-kgjzs   0/1     ContainerCreating   0          6s    <none>   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                         nextcloud-mariadb-0          0/1     Pending             0          34m   <none>   <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219031
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                          NAME                         READY   STATUS        RESTARTS   AGE   IP               NODE                                              NOMINATED NODE   READINESS GATES                                                                                                              nextcloud-69c8c757c7-qkl8w   1/1     Terminating   0          33s   192.168.17.207   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                       nextcloud-7ccd4df64f-kgjzs   1/1     Running       0          28s   192.168.8.240    ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                       nextcloud-mariadb-0          0/1     Pending       0          34m   <none>           <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219053
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                          NAME                         READY   STATUS        RESTARTS   AGE   IP               NODE                                              NOMINATED NODE   READINESS GATES                                                                                                              nextcloud-69c8c757c7-qkl8w   1/1     Terminating   0          48s   192.168.17.207   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                       nextcloud-7ccd4df64f-kgjzs   1/1     Running       0          43s   192.168.8.240    ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                       nextcloud-mariadb-0          0/1     Pending       0          35m   <none>           <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219068
- command: kubectl get csidriver                                                                                                                                                                                                                                          NAME              ATTACHREQUIRED   PODINFOONMOUNT   STORAGECAPACITY   TOKENREQUESTS   REQUIRESREPUBLISH   MODES        AGE                                                                                                                                                           ebs.csi.aws.com   true             false            false             <unset>         false               Persistent   167m                                                                                                                                                          efs.csi.aws.com   false            false            false             <unset>         false               Persistent   19h
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219139
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219146
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219146
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219146
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219146
- command: kubectl get csidriver                                                                                                                                                                                                                                          NAME              ATTACHREQUIRED   PODINFOONMOUNT   STORAGECAPACITY   TOKENREQUESTS   REQUIRESREPUBLISH   MODES        AGE                                                                                                                                                           ebs.csi.aws.com   true             false            false             <unset>         false               Persistent   168m                                                                                                                                                          efs.csi.aws.com   false            false            false             <unset>         false               Persistent   19h
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219148
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                 data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 6m28s                                                                                                                               nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 2m56s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219192
- command: kubectl patch pvc data-nextcloud-mariadb-0 -n nextcloud -p '{\"metadata\":{\"finalizers\":null}}' --type=merge                                                                                                                                                     persistentvolumeclaim/data-nextcloud-mariadb-0 patched
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219206
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                      persistentvolumeclaim/nextcloud-mariadb unchanged
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219211
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                 data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 6m53s                                                                                                                               nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 3m21s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219217
- command: kubectl delete pod nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                            pod \"nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219225
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                          NAME                         READY   STATUS    RESTARTS   AGE     IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                 nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          3m29s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                          nextcloud-mariadb-0          0/1     Pending   0          9s      <none>          <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219234
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                   NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                 data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 7m11s                                                                                                                               nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 3m39s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219235
- command: Events:                                                                                                                                                                                                                                                                                                           bash: Events:: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: Type     Reason            Age                   From               Message                                                                                                                                                                                                                   bash: Type: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ----     ------            ----                  ----               -------                                                                                                                                                                                                                   bash: ----: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: Warning  FailedScheduling  5m6s (x2 over 6m35s)  default-scheduler  0/2 nodes are available: persistentvolumeclaim \"data-nextcloud-mariadb-0\" is being deleted. preemption: 0/2 nodes are available: 2 Preemption is not helpful for scheduling.                                              bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: Warning  FailedScheduling  77s (x10 over 35m)    default-scheduler  0/2 nodes are available: pod has unbound immediate PersistentVolumeClaims. preemption: 0/2 nodes are available: 2 Preemption is not helpful for scheduling.                                                               bash: syntax error near unexpected token `('
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ kubectl get csidriver                                                                                                                                                                                                                                                                       bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: NAME              ATTACHREQUIRED   PODINFOONMOUNT   STORAGECAPACITY   TOKENREQUESTS   REQUIRESREPUBLISH   MODES        AGE                                                                                                                                                                      bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ebs.csi.aws.com   true             false            false             <unset>         false               Persistent   167m                                                                                                                                                                     bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: efs.csi.aws.com   false            false            false             <unset>         false               Persistent   19h                                                                                                                                                                      bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ ^C                                                                                                                                                                                                                                                                                          bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ ^C                                                                                                                                                                                                                                                                                          bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ ^C                                                                                                                                                                                                                                                                                          bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ ^C                                                                                                                                                                                                                                                                                          bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ kubectl get csidriver                                                                                                                                                                                                                                                                       bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: NAME              ATTACHREQUIRED   PODINFOONMOUNT   STORAGECAPACITY   TOKENREQUESTS   REQUIRESREPUBLISH   MODES        AGE                                                                                                                                                                      bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ebs.csi.aws.com   true             false            false             <unset>         false               Persistent   168m                                                                                                                                                                     bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: efs.csi.aws.com   false            false            false             <unset>         false               Persistent   19h                                                                                                                                                                      bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: ~ $ kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219264
- command: NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                            bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 6m28s                                                                                                                                          bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 2m56s                                                                                                                                          bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: ~ $ kubectl patch pvc data-nextcloud-mariadb-0 -n nextcloud -p '{\"metadata\":{\"finalizers\":null}}' --type=merge                                                                                                                                                                                  bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: persistentvolumeclaim/data-nextcloud-mariadb-0 patched                                                                                                                                                                                                                                          bash: persistentvolumeclaim/data-nextcloud-mariadb-0: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: ~ $ kubectl apply -f pvc.yaml                                                                                                                                                                                                                                                                   bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: persistentvolumeclaim/nextcloud-mariadb unchanged                                                                                                                                                                                                                                               bash: persistentvolumeclaim/nextcloud-mariadb: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: ~ $ kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                            bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 6m53s                                                                                                                                          bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 3m21s                                                                                                                                          bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: ~ $ kubectl delete pod nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                         bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: pod \"nextcloud-mariadb-0\" deleted                                                                                                                                                                                                                                                               bash: pod: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: ~ $ kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                                                       bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: NAME                         READY   STATUS    RESTARTS   AGE     IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                            bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          3m29s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                                     bash: syntax error near unexpected token `<'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: nextcloud-mariadb-0          0/1     Pending   0          9s      <none>          <none>                                            <none>           <none>                                                                                                                                     bash: syntax error near unexpected token `<'
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: ~ $ kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                bash: /home/cloudshell-user: Is a directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                            bash: NAME: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 7m11s                                                                                                                                          bash: unset: No such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219265
- command: nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 3m39s^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219266
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219266
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219266
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219266
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219267
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                                                           NAME                         READY   STATUS    RESTARTS   AGE    IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                                                   nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          4m4s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                                                            nextcloud-mariadb-0          0/1     Pending   0          44s    <none>          <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219269
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                    NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                  data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 7m46s                                                                                                                                                                nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 4m14s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219270
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                        persistentvolumeclaim \"data-nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219315
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                                                           NAME                         READY   STATUS    RESTARTS   AGE     IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                                                  nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          4m58s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          98s     <none>          <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219323
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                    NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                  data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 9s                                                                                                                                                                   nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 5m8s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219324
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                                                           NAME                         READY   STATUS    RESTARTS   AGE    IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                                                   nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          5m6s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                                                            nextcloud-mariadb-0          0/1     Pending   0          106s   <none>          <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219331
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                    NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                  data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 17s                                                                                                                                                                  nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 5m16s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219332
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                        persistentvolumeclaim \"data-nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219344
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                                                           NAME                         READY   STATUS    RESTARTS   AGE     IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                                                  nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          5m27s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          2m7s    <none>          <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219352
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                    NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                  data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 9s                                                                                                                                                                   nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 5m37s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219353
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219464
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                                                       persistentvolumeclaim/data-nextcloud-mariadb created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219468
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                                                   NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                         nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          7m44s                                                                                                                                                                                                                                                       nextcloud-mariadb-0          0/1     Pending   0          4m24s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219489
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                                                   NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                         nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          7m53s                                                                                                                                                                                                                                                       nextcloud-mariadb-0          0/1     Pending   0          4m33s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219498
- command: kubectl delete pod nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                             pod \"nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219520
- command: tcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                                                   NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                         nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          8m18s                                                                                                                                                                                                                                                       nextcloud-mariadb-0          0/1     Pending   0          3s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219523
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                                                   NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                         nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          9m15s                                                                                                                                                                                                                                                       nextcloud-mariadb-0          0/1     Pending   0          60s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219580
- command: kubectl get pods -n nextcloud -o wide                                                                                                                                                                                                                                                           NAME                         READY   STATUS    RESTARTS   AGE     IP              NODE                                              NOMINATED NODE   READINESS GATES                                                                                                                                                  nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          9m30s   192.168.8.240   ip-192-168-11-198.eu-central-1.compute.internal   <none>           <none>                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          75s     <none>          <none>                                            <none>           <none>
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219595
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                    NAME                       STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                                  data-nextcloud-mariadb     Pending                                                                        gp2            <unset>                 2m8s                                                                                                                                                                 data-nextcloud-mariadb-0   Pending                                                                                       <unset>                 4m12s                                                                                                                                                                nextcloud-mariadb          Bound     pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 9m40s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219596
- command: kubectl delete pvc nextcloud-mariadb -n nextcloud                                                                                                                                                                                                                                               persistentvolumeclaim \"nextcloud-mariadb\" deleted                                                                                                                                                                                                                                                                     ^[[A^[[A^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219635
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219641
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219641
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219641
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                   NAME                       STATUS        VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                              data-nextcloud-mariadb     Pending                                                                            gp2            <unset>                 3m2s                                                                                                                                                             data-nextcloud-mariadb-0   Pending                                                                                           <unset>                 5m6s                                                                                                                                                             nextcloud-mariadb          Terminating   pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 10m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219650
- command: kubectl get pvc -n nextcloud                                                                                                                                                                                                                                                                   NAME                       STATUS        VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE                                                                                                                                                              data-nextcloud-mariadb     Pending                                                                            gp2            <unset>                 3m11s                                                                                                                                                            data-nextcloud-mariadb-0   Pending                                                                                           <unset>                 5m15s                                                                                                                                                            nextcloud-mariadb          Terminating   pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 10m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219659
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219696
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219696
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219697
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219697
- command: kubectl delete pvc nextcloud-mariadb -n nextcloud                                                                                                                                                                                                                                                 persistentvolumeclaim \"nextcloud-mariadb\" deleted                                                                                                                                                                                                                                                                       ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219706
- command: kubectl delete pvc data-nextcloud-mariadb -n nextcloud                                                                                                                                                                                                                                          persistentvolumeclaim \"data-nextcloud-mariadb\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219711
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219734
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219765
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                                                         Warning: resource persistentvolumeclaims/data-nextcloud-mariadb-0 is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                                                            The PersistentVolumeClaim \"data-nextcloud-mariadb-0\" is invalid: spec: Forbidden: spec is immutable after creation except resources.requests and volumeAttributesClassName for bound claims                                                                                                                               core.PersistentVolumeClaimSpec{                                                                                                                                                                                                                                                                                         \t     AccessModes: {\"ReadWriteOnce\"},                                                                                                                                                                                                                                                                                   \t     Selector:    nil,                                                                                                                                                                                                                                                                                                 \t     Resources: core.VolumeResourceRequirements{                                                                                                                                                                                                                                                                       \t     \t       Limits: nil,                                                                                                                                                                                                                                                                                            - \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                                                            - \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 1073741824}, s: \"1Gi\", Format: \"BinarySI\"},                                                                                                                                                                                                         - \t     \t       },                                                                                                                                                                                                                                                                                                      + \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                                                            + \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 10737418240}, s: \"10Gi\", Format: \"BinarySI\"},                                                                                                                                                                                                       + \t     \t       },                                                                                                                                                                                                                                                                                                        \t     },                                                                                                                                                                                                                                                                                                                \t     VolumeName:       \"\",                                                                                                                                                                                                                                                                                             \t     StorageClassName: nil,                                                                                                                                                                                                                                                                                            \t     ... // 4 identical fields                                                                                                                                                                                                                                                                                         }
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219770
- command: kubectl apply -f deployment.yaml                                                                                                                                                                                                                                                                  deployment.apps/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219781
- command: kubectl apply -f pvc.yaml                                                                                                                                                                                                                                                                         Warning: resource persistentvolumeclaims/data-nextcloud-mariadb-0 is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                                                            The PersistentVolumeClaim \"data-nextcloud-mariadb-0\" is invalid: spec: Forbidden: spec is immutable after creation except resources.requests and volumeAttributesClassName for bound claims                                                                                                                               core.PersistentVolumeClaimSpec{                                                                                                                                                                                                                                                                                         \t     AccessModes: {\"ReadWriteOnce\"},                                                                                                                                                                                                                                                                                   \t     Selector:    nil,                                                                                                                                                                                                                                                                                                 \t     Resources: core.VolumeResourceRequirements{                                                                                                                                                                                                                                                                       \t     \t       Limits: nil,                                                                                                                                                                                                                                                                                            - \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                                                            - \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 1073741824}, s: \"1Gi\", Format: \"BinarySI\"},                                                                                                                                                                                                         - \t     \t       },                                                                                                                                                                                                                                                                                                      + \t     \t       Requests: core.ResourceList{                                                                                                                                                                                                                                                                            + \t     \t       \t       s\"storage\": {i: resource.int64Amount{value: 10737418240}, s: \"10Gi\", Format: \"BinarySI\"},                                                                                                                                                                                                       + \t     \t       },                                                                                                                                                                                                                                                                                                        \t     },                                                                                                                                                                                                                                                                                                                \t     VolumeName:       \"\",                                                                                                                                                                                                                                                                                             \t     StorageClassName: nil,                                                                                                                                                                                                                                                                                            \t     ... // 4 identical fields                                                                                                                                                                                                                                                                                         }
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219784
- command: kubectl delete pod nextcloud-mariadb-0 -n nextcloud                                                                                                                                                                                                                                               pod \"nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219789
- command: kubectl get statefulsets -n nextcloud                                                                                                                                                                                                                                                             NAME                READY   AGE                                                                                                                                                                                                                                                                                         nextcloud-mariadb   0/1     47m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219794
- command: ls                                                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  mariadb.yaml  namespace.yaml  pvc.yaml  secret.yaml  service.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219814
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219853
- command: nano init.sql
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219888
- command: configmag.yamlonfigmag.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219904
- command: nano mariadb-init-configmap.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219920
- command: namespace.yaml                                                                                                                                                                                                                                                                                    bash: namespace.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219939
- command: nano namespace.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219949
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219959
- command: service.yaml                                                                                                                                                                                                                                                                                      bash: service.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219964
- command: nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747219974
- command: nano statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220152
- command: kubectl get pods -n nextcloud^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220155
- command: kubectl get pods -n nextcloud                                                                                                                                                                                                                                                                     NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                           nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          18m                                                                                                                                                                                                                                                           nextcloud-7db757cd87-d6r9f   0/1     Pending   0          6m17s                                                                                                                                                                                                                                                         nextcloud-mariadb-0          0/1     Pending   0          6m9s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220158
- command: nextcloud-pvc.yaml                                                                                                                                                                                                                                                                                bash: nextcloud-pvc.yaml: command not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220201
- command: nano nextcloud-pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220215
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220248
- command: nano service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220267
- command: nano init.sql
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220289
- command: nano mariadb-service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220311
- command: ls                                                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  mariadb-service.yaml  mariadb.yaml  namespace.yaml  nextcloud-pvc.yaml  pvc.yaml  secret.yaml  service.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220334
- command: nano nextcloud-secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220350
- command: kubectl apply -f nextcloud-pvc.yaml                                                                                                                                                                                                                                                               persistentvolumeclaim/nextcloud-storage created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220354
- command: kubectl apply -f mariadb-service.yaml                                                                                                                                                                                                                                                             The Service \"nextcloud-mariadb\" is invalid: spec.clusterIPs[0]: Invalid value: []string{\"None\"}: may not change once set
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220355
- command: kubectl apply -f nextcloud-secret.yaml                                                                                                                                                                                                                                                            Warning: resource secrets/nextcloud-db-secret is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.                                                                                                                                                                                                                                                                                                secret/nextcloud-db-secret configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220356
- command: kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                                                         deployment.apps/nextcloud restarted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220357
- command: # Wait for pods
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220364
- command: kubectl get pods -n nextcloud -w                                                                                                                                                                                                                                                                  NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                           nextcloud-76475f6b7d-bkzg5   0/1     Pending   0          8s                                                                                                                                                                                                                                                            nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          22m                                                                                                                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          9m36s                                                                                                                                                                                                                                                         ^[[A                                                                                                                                                                                                                                                                                                                    ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220412
- command: kubectl get pods -n nextcloud -w                                                                                                                                                                                                                                                                NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                           nextcloud-76475f6b7d-bkzg5   0/1     Pending   0          58s                                                                                                                                                                                                                                                           nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          23m                                                                                                                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          10m                                                                                                                                                                                                                                                           ^[[A^[[A^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747220947
- command: kubectl get pods -n nextcloud -w                                                                                                                                                                                                                                                        NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                           nextcloud-76475f6b7d-bkzg5   0/1     Pending   0          9m56s                                                                                                                                                                                                                                                         nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          32m                                                                                                                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          19m
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747222769
- command: kubectl get pods -n nextcloud -w                                                                                                                                                                                                                                                                                    NAME                         READY   STATUS    RESTARTS   AGE                                                                                                                                                                                                                                                           nextcloud-76475f6b7d-bkzg5   0/1     Pending   0          47m                                                                                                                                                                                                                                                           nextcloud-7ccd4df64f-kgjzs   1/1     Running   0          69m                                                                                                                                                                                                                                                           nextcloud-mariadb-0          0/1     Pending   0          57m                                                                                                                                                                                                                                                           kubectl apply -f nextcloud-pvc.yaml                                                                                                                                                                                                                                                                                     kubectl apply -f mariadb-service.yaml                                                                                                                                                                                                                                                                                   kubectl apply -f nextcloud-secret.yaml                                                                                                                                                                                                                                                                                  kubectl rollout restart deployment nextcloud -n nextcloud                                                                                                                                                                                                                                                               # Wait for pods                                                                                                                                                                                                                                                                                                         kubectl get pods -n nextcloud -w                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                # Endpoints should now show a ready address                                                                                                                                                                                                                                                                             kubectl get endpoints nextcloud -n nextcloud                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    # Ingress should start returning 200                                                                                                                                                                                                                                                                                    curl -I https://nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                                            ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223259
- command: curl -I https://nextcloud.ewe-netz-backup.de                                                                                                                                                                                                                                                    HTTP/2 503                                                                                                                                                                                                                                                                                                              date: Wed, 14 May 2025 11:47:41 GMT                                                                                                                                                                                                                                                                                     content-type: text/html                                                                                                                                                                                                                                                                                                 content-length: 190                                                                                                                                                                                                                                                                                                     strict-transport-security: max-age=31536000; includeSubDomains
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223261
- command: ls                                                                                                                                                                                                                                                                                                cluster-issuer.yaml  deployment.yaml  ingress.yaml  init.sql  mariadb-init-configmap.yaml  mariadb-service.yaml  mariadb.yaml  namespace.yaml  nextcloud-pvc.yaml  nextcloud-secret.yaml  pvc.yaml  secret.yaml  service.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223375
- command: rm nextcloud-secret.yaml^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223560
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223560
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223561
- command: ^C
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223561
- command: kubectl get pvc,pv -n nextcloud -o wide                                                                                                                                                                                                                                                         NAME                                             STATUS        VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE   VOLUMEMODE                                                                                                                           persistentvolumeclaim/data-nextcloud-mariadb-0   Pending                                                                                           <unset>                 70m   Filesystem                                                                                                                           persistentvolumeclaim/nextcloud-mariadb          Terminating   pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            gp2            <unset>                 75m   Filesystem                                                                                                                           persistentvolumeclaim/nextcloud-storage          Pending                                                                            gp2            <unset>                 53m   Filesystem                                                                                                                                                                                                                                                                                                                                                                                                                                                 NAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                    STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE   VOLUMEMODE                                                                                             persistentvolume/pvc-297fe59f-be21-433a-a226-a2b386d78d4f   20Gi       RWX            Retain           Bound    default/my-release-nextcloud-nextcloud   efs-sc         <unset>                          20h   Filesystem                                                                                             persistentvolume/pvc-fc024256-413b-4e58-8e53-c3d097a50b7c   10Gi       RWO            Delete           Bound    nextcloud/nextcloud-mariadb              gp2            <unset>                          75m   Filesystem
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223564
- command: kubectl scale deploy/nextcloud -n nextcloud --replicas=0                                                                                                                                                               deployment.apps/nextcloud scaled
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223580
- command: kubectl scale sts/nextcloud-mariadb -n nextcloud --replicas=0                                                                                                                                        statefulset.apps/nextcloud-mariadb scaled
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223582
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                             persistentvolumeclaim \"data-nextcloud-mariadb-0\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223593
- command: kubectl delete pvc data-nextcloud-mariadb-0 -n nextcloud                                                                                                                                             Error from server (NotFound): persistentvolumeclaims \"data-nextcloud-mariadb-0\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223604
- command: kubectl delete pvc nextcloud-mariadb -n nextcloud                                                                                                                                                    Error from server (NotFound): persistentvolumeclaims \"nextcloud-mariadb\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223625
- command: kubectl delete pvc nextcloud-storage -n nextcloud                                                                                                                                                    persistentvolumeclaim \"nextcloud-storage\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223639
- command: -n nextcloud -o wide -n nextcloud                                                                                                                                                                   NAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                                    STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE   VOLUMEMODE  persistentvolume/pvc-297fe59f-be21-433a-a226-a2b386d78d4f   20Gi       RWX            Retain           Bound    default/my-release-nextcloud-nextcloud   efs-sc         <unset>                          20h   Filesystem
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223646
- command: pvc-297fe59f-be21-433a-a226-a2b386d78d4f -n nextcloud -o wide                                                                                                                                       Error from server (NotFound): persistentvolumeclaims \"pvc-297fe59f-be21-433a-a226-a2b386d78d4f\" not found
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223665
- command: ls                                                                                                                                                                                                   cluster-issuer.yaml  ingress.yaml  mariadb-init-configmap.yaml  mariadb.yaml    nextcloud-pvc.yaml     pvc.yaml     service.yaml                                                                                           deployment.yaml      init.sql      mariadb-service.yaml         namespace.yaml  nextcloud-secret.yaml  secret.yaml  statefulset-mariadb.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223720
- command: nano mariadb-service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223747
- command: rm mariadb-service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223752
- command: ls                                                                                                                                                                                                   cluster-issuer.yaml  ingress.yaml  mariadb-init-configmap.yaml  namespace.yaml      nextcloud-secret.yaml  secret.yaml   statefulset-mariadb.yaml                                                                          deployment.yaml      init.sql      mariadb.yaml                 nextcloud-pvc.yaml  pvc.yaml               service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223754
- command: nano mariadb-service.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223771
- command: nano pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223801
- command: rm pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223806
- command: $ rm pvc.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223812
- command: nano deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223833
- command: rm deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223838
- command: $ rm deployment.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223843
- command: nano secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223871
- command: rm secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223875
- command: $ rm secret.yaml
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223881
- command: kubectl apply -k manifests/               # or kubectl apply -f <each.yaml>                                                                                                                          error: must build at directory: not a valid directory: evalsymlink failure on 'manifests/' : lstat /home/cloudshell-user/manifests: no such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223886
- command: kubectl rollout status deploy/nextcloud -n nextcloud                                                                                                                                                 deployment \"nextcloud\" successfully rolled out
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223887
- command: kubectl rollout status sts/nextcloud-mariadb -n nextcloud                                                                                                                                            partitioned roll out complete: 0 new pods have been updated...
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223888
- command: kubectl apply -k -f                                                                                                                                                                                  error: must build at directory: not a valid directory: evalsymlink failure on '-f' : lstat /home/cloudshell-user/-f: no such file or directory
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223912
- command: kubectl apply -f                                                                                                                                                                                     error: flag needs an argument: 'f' in -f                                                                                                                                                                                   See 'kubectl apply --help' for usage.
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747223918
- command: kubectl scale deploy/nextcloud -n nextcloud --replicas=0                                                                                                                                             deployment.apps/nextcloud scaled
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224122
- command: kubectl delete sts nextcloud-mariadb -n nextcloud --wait=true                                                                                                                                        statefulset.apps \"nextcloud-mariadb\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224128
- command: kubectl delete svc nextcloud-mariadb -n nextcloud                                                                                                                                                    service \"nextcloud-mariadb\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224133
- command: kubectl apply -f mariadb-service.yaml                                                                                                                                                                service/nextcloud-mariadb created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224141
- command: kubectl apply -f statefulset-mariadb.yaml                                                                                                                                                            statefulset.apps/nextcloud-mariadb created
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224146
- command: kubectl apply -f deployment.yaml                                                                                                                                                                     deployment.apps/nextcloud configured
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224166
- command: kubectl apply -f ingress.yaml                                                                                                                                                                        ingress.networking.k8s.io/nextcloud unchanged
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224172
- command: kubectl scale deploy/nextcloud -n nextcloud --replicas=1                                                                                                                                             deployment.apps/nextcloud scaled
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224177
- command: kubectl delete pvc nextcloud-storage -n nextcloud                                                                                                                                                    persistentvolumeclaim \"nextcloud-storage\" deleted
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224207
- command: kubectl get endpoints nextcloud nextcloud-mariadb -n nextcloud                                                                                                                                       NAME                ENDPOINTS             AGE                                                                                                                                                                              nextcloud           192.168.8.240:80      4m49s                                                                                                                                                                            nextcloud-mariadb   192.168.17.207:3306   73s
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224214
- command: kubectl describe ingress nextcloud -n nextcloud | grep \"Address\\|Backend\"                                                                                                                            Address:          aa0dc00a576d34a44af11dcbb794efa7-40e6ed2673e35a76.elb.eu-central-1.amazonaws.com                                                                                                                           Host                          Path  Backends
  exit_code: 0
  shell: bash
  session_id: c63b4a338efa4a1c9ca62be6621eb211
  cwd: /home/cloudshell-user
  time: 1747224230